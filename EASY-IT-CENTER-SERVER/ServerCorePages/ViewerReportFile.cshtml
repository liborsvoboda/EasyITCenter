@page "/ServerCoreTools/ViewerReportFile/{ReportId?}"
@{
    Layout = "/ServerCorePages/Shared/ViewerReportFileLayout.cshtml";
}

@addTagHelper *, WebOptimizer.Core
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@using ServerCorePages;
@using Microsoft.AspNetCore.Html;
@using EasyITCenter.DBModel;
@using EasyITCenter.ServerCoreWebPages;
@using EasyITCenter.ServerCoreStructure;
@using System.Security.Claims;
@model ServerCorePages.ViewerReportFileModel
@{


    //https://github.com/FastReports/FastReport.Documentation
    //Standalone Load File From Url Request
    string? requestedUrlPath = ""; string fileContent = null;
    try {
        try { requestedUrlPath = ((string?)this.HttpContext.Items.FirstOrDefault(a => a.Key.ToString() == "FileValidUrl").Value); } catch { }
        string? filePath = System.IO.Path.Combine(ServerRuntimeData.WebRoot_path) + FileOperations.ConvertSystemFilePathFromUrl(requestedUrlPath);
        fileContent = System.IO.File.ReadAllText(filePath);
    } catch { }

}


<div class="container">
    <div class="reports">
        <div class="d-block mt-2 text-center bg-cyan">EIC&ESB Webový Prohlížeč Reportů</div>

        @foreach (var item in Model.reportList.ReportNameList.Select((value, i) => new { value, i })) {
            <a href="~/ServerCoreTools/ViewerReportFile?ReportId=@item.i" >@item.value</a>
        }
    </div>
    <div class="webreport">  
        @await Model.reportList.WebReport.Render()
    </div>
    <footer>&copy; @DateTime.Now.Year - GroupWare - Solution.Eu</footer>
</div>

@* <script> *@



 



   

@* 
</script> *@


@* 
@if (this.BodyContent != null) {
    Html.Raw(this.BodyContent);
}
 *@