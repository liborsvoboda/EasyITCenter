async function GetWebSettingsList(){var n;window.showPageLoading();let i=await fetch(Metro.storage.getItem("ApiOriginSuffix",null)+"/WebPages/GetSettingList",{method:"GET",headers:{"Content-type":"application/json"}}),t=await i.json();t.Status=="error"?(n=Metro.notify,n.setup({width:300,timeout:Metro.storage.getItem("NotifyShowTime",null),duration:500}),n.create(t.ErrorMessage,"Error",{cls:"alert"}),n.reset()):t.Status!=undefined?(n=Metro.notify,n.setup({width:300,timeout:Metro.storage.getItem("NotifyShowTime",null),duration:500}),n.create(t.ErrorMessage,"Error",{cls:"alert"}),n.reset()):(t.forEach(n=>{switch(n.key){case"NotifyShowTime":Metro.storage.setItem("NotifyShowTime",n.value);break;case"AutomaticDetectedLanguageTranslate":Metro.storage.setItem("AutomaticDetectedLanguageTranslate",JSON.parse(n.value.toLowerCase()));break;case"BackgroundOpacitySetting":Metro.storage.setItem("BackgroundOpacitySetting",n.value);break;case"BackgroundColorSetting":Metro.storage.setItem("BackgroundColorSetting",n.value);break;case"BackgroundVideoSetting":Metro.storage.setItem("BackgroundVideoSetting",n.value);break;case"BackgroundImageSetting":Metro.storage.setItem("BackgroundImageSetting",n.value);break;case"WebPagesName":Metro.storage.setItem("WebPagesName",n.value);break;case"WebPagesNameSmall":Metro.storage.setItem("WebPagesNameSmall",n.value);break;case"WebSettingRefreshOnEachLoad":Metro.storage.setItem("WebSettingRefreshOnEachLoad",JSON.parse(n.value.toLowerCase()));break;case"AutoHighlightEnabled":Metro.storage.setItem("AutoHighlightEnabled",JSON.parse(n.value.toLowerCase()));break;case"AutoMermaidEnabled":Metro.storage.setItem("AutoMermaidEnabled",JSON.parse(n.value.toLowerCase()));break;case"WebBuilderHeadSection":Metro.storage.setItem("WebBuilderHeadSection",n.value);break;case"CycleWebPageMottosEnabled":Metro.storage.setItem("CycleWebPageMottosEnabled",JSON.parse(n.value.toLowerCase()));break;case"CycleWebPageMottosSecTime":Metro.storage.setItem("CycleWebPageMottosSecTime",n.value);break;case"ReloadContentOnly":Metro.storage.setItem("ReloadContentOnly",JSON.parse(n.value.toLowerCase()));break;case"WebSystemPortalLogEnabled":Metro.storage.setItem("WebSystemPortalLogEnabled",JSON.parse(n.value.toLowerCase()))}}),Metro.storage.getItem("CycleWebPageMottosEnabled",null)!=null&&Metro.storage.getItem("CycleWebPageMottosEnabled",null)&&GetMottoList(),Metro.storage.getItem("WebSettingsList",null)==null&&(Metro.storage.setItem("WebSettingsList",t),ApplyLoadedWebSetting("reload")),ApplyLoadedWebSetting("reload"));window.hidePageLoading()}async function GetWebMenuList(){let i=await fetch(Metro.storage.getItem("ApiOriginSuffix",null)+(Metro.storage.getItem("ApiToken",null)==null?"/WebPages/GetWebMenuList":"/WebPages/GetAuthWebMenuList"),{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer "+Metro.storage.getItem("ApiToken",null)}}),n=await i.json();if(n.Status=="error"){var t=Metro.notify;t.setup({width:300,timeout:Metro.storage.getItem("NotifyShowTime",null),duration:500});t.create(n.ErrorMessage,"Error",{cls:"alert"});t.reset();ShowBlockedMessage()}else Metro.storage.getItem("WebMenuList",null)==null?(Metro.storage.setItem("WebMenuList",n),SetWebMenuPanel(),SetWebMenuHtml()):(Metro.storage.setItem("WebMenuList",n),SetWebMenuPanel())}function SendMessage(){showPageLoading();var n=$.ajax({global:!1,type:"POST",url:Metro.storage.getItem("ApiOriginSuffix",null)+"/WebPages/InsertMessage",dataType:"json",headers:{"Content-type":"application/json"},data:JSON.stringify({Message:$("#NewMessage").val()})});n.fail(function(){var n=Metro.notify;n.setup({width:300,duration:1e3,animation:"easeOutBounce"});n.create("Saving Message Failed","Alert",{cls:"alert"});n.reset();hidePageLoading()});n.done(function(){var n=Metro.notify;n.setup({width:300,duration:1e3,animation:"easeOutBounce"});n.create("Saving Message Sucessfully","Info",{cls:"success"});n.reset();$("#NewMessage").val(null);hidePageLoading();GetMessages()})}function GetMessages(){showPageLoading();$.ajax({url:Metro.storage.getItem("ApiOriginSuffix",null)+"/WebPages/GetMessageList",dataType:"json",type:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer "+Metro.storage.getItem("ApiToken",null)},success:function(n){n=JSON.parse(JSON.stringify(n));let t="";n.forEach(n=>{t+='<div class="card image-header"><div class="card-content p-2 op-lightBrown-low"><p class="fg-black">'+n.Name+"<\/p>"+n.Description+"<\/div><\/div>"});$("#MessageBox").html(t);hidePageLoading()},error:function(){var n=Metro.notify;n.setup({width:300,duration:1e3,animation:"easeOutBounce"});n.create("Downloading Messages Failed","Alert",{cls:"alert"});n.reset();hidePageLoading()}})}function GetNewsList(){if(Metro.storage.getItem("NewsList",null)==null)showPageLoading(),$.ajax({url:Metro.storage.getItem("ApiOriginSuffix",null)+"/WebPages/GetNewsList",dataType:"json",type:"GET",headers:{"Content-type":"application/json"},success:function(n){n=JSON.parse(JSON.stringify(n));Metro.storage.setItem("NewsList",n);let t="";n.forEach(n=>{t+='<div class="card image-header">',t+="<span title='print' class=\"c-pointer mif-printer rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=PrintElement('tisk_"+n.id+'\') style="top: 5px; right: 5px;z-index:10;"><\/span>',t+="<span title='downloadHtml' class=\"c-pointer mif-download2 rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=DownloadHtmlElement('tisk_"+n.id+'\') style="top: 5px; right: 55px;z-index:10;"><\/span>',t+="<span title='downloadImage' class=\"c-pointer mif-image rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=ImageFromElement('tisk_"+n.id+'\') style="top: 5px; right: 105px;z-index:10;"><\/span>',t+="<span title='copy' class=\"c-pointer mif-copy rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=CopyElement('tisk_"+n.id+'\') style="top: 5px; right: 155px;z-index:10;"><\/span><br />',t+="<div id='tisk_"+n.id+'\' class="card-content p-2"><p class="fg-black"><b>'+new Date(n.timeStamp).toLocaleDateString()+"<\/b> "+n.title+"<\/p>"+n.description+"<\/div><\/div>"});$("#NewsListBox").html(t);Metro.infobox.open("#NewsInfoBox");hidePageLoading()},error:function(){var n=Metro.notify;n.setup({width:300,duration:1e3,animation:"easeOutBounce"});n.create("Downloading Messages Failed","Alert",{cls:"alert"});n.reset();hidePageLoading()}});else{let t=Metro.storage.getItem("NewsList",null),n="";t.forEach(t=>{n+='<div class="card image-header">',n+="<span title='print' class=\"c-pointer mif-printer rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=PrintElement('tisk_"+t.id+'\') style="top: 5px; right: 5px;z-index:10;"><\/span>',n+="<span title='downloadHtml' class=\"c-pointer mif-download2 rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=DownloadHtmlElement('tisk_"+t.id+'\') style="top: 5px; right: 55px;z-index:10;"><\/span>',n+="<span title='downloadImage' class=\"c-pointer mif-image rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=ImageFromElement('tisk_"+t.id+'\') style="top: 5px; right: 105px;z-index:10;"><\/span>',n+="<span title='copy' class=\"c-pointer mif-copy rounded pos-absolute drop-shadow fg-cyan mif-4x shadowed p-1 \" onclick=CopyElement('tisk_"+t.id+'\') style="top: 5px; right: 155px;z-index:10;"><\/span><br />',n+='<div class="card-content p-2"><p class="fg-black"><b>'+new Date(t.timeStamp).toLocaleDateString()+"<\/b> "+t.title+"<\/p>"+t.description+"<\/div><\/div>"});$("#NewsListBox").html(n);Metro.infobox.open("#NewsInfoBox")}}function GetMottoList(){Metro.storage.getItem("MottoList",null)==null?$.ajax({url:Metro.storage.getItem("ApiOriginSuffix",null)+"/WebPages/GetMottoList",dataType:"json",type:"GET",headers:{"Content-type":"application/json"},success:function(n){n=JSON.parse(JSON.stringify(n));Metro.storage.setItem("MottoList",n);ShowWebPageMottos()},error:function(){var n=Metro.notify;n.setup({width:300,duration:1e3,animation:"easeOutBounce"});n.create("Downloading Messages Failed","Alert",{cls:"alert"});n.reset()}}):ShowWebPageMottos()}