<!DOCTYPE html>
<html><head><title>BinaryImage.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(217);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#EASYTools.ImageEffectLibrary/BinaryImage.cs" target="_top">BinaryImage.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#EASYTools.ImageEffectLibrary" target="_top">..\..\..\EASY-TOOLS\EASYTools.ImageEffectLibrary\EASYTools.ImageEffectLibrary.csproj</a> (EASYTools.ImageEffectLibrary)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>.<span class="i n">Imaging</span>;
 
<b>namespace</b> <span class="i n">EASYTools</span>.<span class="i n">ImageEffectLibrary</span>
{
    <b>public class</b> <a id="79091e2cec4a2cd2" href="R/79091e2cec4a2cd2.html" target="n" data-glyph="0,0" class="t t">BinaryImage</a> : <a href="Image.cs.html#ae7b6f60d70a2351" class="t t">Image</a>&lt;<a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>&gt;, <a href="Image.cs.html#eac4ea18336e3a94" class="t t">IBitmapSource</a>
    {
        <b>public</b> <a id="d05eaf72de58c8d6" href="R/d05eaf72de58c8d6.html" target="n" data-glyph="72,1" class="t constructor">BinaryImage</a>(<b>int</b> <span id="r0 rd" class="r0 r">pixelWidth</span>, <b>int</b> <span id="r1 rd" class="r1 r">pixelHeight</span>) : <a href="Image.cs.html#6f7b6d48e70d4091" class="k">base</a>(<span class="r0 r">pixelWidth</span>, <span class="r1 r">pixelHeight</span>) { }
 
        <b>public</b> <a id="ec01299d26b8e245" href="R/ec01299d26b8e245.html" target="n" data-glyph="72,1" class="t constructor">BinaryImage</a>(<a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>[,] <span id="r2 rd" class="r2 r">pixels</span>) : <a href="Image.cs.html#31a77774dc323871" class="k">base</a>(<span class="r2 r">pixels</span>) { }
 
        <b>public</b> <a id="07ab823493c9b8e6" href="R/07ab823493c9b8e6.html" target="n" data-glyph="72,1" class="t constructor">BinaryImage</a>(<b>byte</b>[] <span id="r3 rd" class="r3 r">grayScalePixels</span>, <b>int</b> <span id="r4 rd" class="r4 r">pixelWidth</span>, <b>int</b> <span id="r5 rd" class="r5 r">pixelHeight</span>) : <a href="Image.cs.html#6f7b6d48e70d4091" class="k">base</a>(<span class="r4 r">pixelWidth</span>, <span class="r5 r">pixelHeight</span>)
        {
            <b>double</b> <span id="r6 rd" class="r6 r">threshold</span> = <a href="#c2659ed9acb48c5b" class="i method">GetThresholdByOtsu</a>(<span class="r3 r">grayScalePixels</span>);
            <b>for</b> (<b>int</b> <span id="r7 rd" class="r7 r">x</span> = 0; <span class="r7 r">x</span> &lt; <span class="r4 r">pixelWidth</span>; <span class="r7 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r8 rd" class="r8 r">y</span> = 0; <span class="r8 r">y</span> &lt; <span class="r5 r">pixelHeight</span>; <span class="r8 r">y</span>++)
                {
                    <b>byte</b> <span id="r9 rd" class="r9 r">pixel</span> = <span class="r3 r">grayScalePixels</span>[<span class="r8 r">y</span> * <span class="r4 r">pixelWidth</span> + <span class="r7 r">x</span>];
                    <a href="Image.cs.html#5651742cc0b908e4" class="i property">Pixels</a>[<span class="r7 r">x</span>, <span class="r8 r">y</span>] = <span class="r9 r">pixel</span> &gt; <span class="r6 r">threshold</span> ? <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#78cd7a9725fd887d" class="i field">White</a> : <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>;
                }
            }
        }
 
        <b>public static</b> <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <b>operator</b> !(<a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <span id="r10 rd" class="r10 r">image</span>)
        {
            <a href="#79091e2cec4a2cd2" class="k">var</a> <span id="r11 rd" class="r11 r">res</span> = <b>new</b> <a href="#d05eaf72de58c8d6" class="t constructor">BinaryImage</a>(<span class="r10 r">image</span>.<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>, <span class="r10 r">image</span>.<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>);
            <b>for</b> (<b>int</b> <span id="r12 rd" class="r12 r">x</span> = 0; <span class="r12 r">x</span> &lt; <span class="r10 r">image</span>.<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r12 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r13 rd" class="r13 r">y</span> = 0; <span class="r13 r">y</span> &lt; <span class="r10 r">image</span>.<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r13 r">y</span>++)
                {
                    <span class="r11 r">res</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r12 r">x</span>, <span class="r13 r">y</span>] = (<span class="r10 r">image</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r12 r">x</span>, <span class="r13 r">y</span>] == <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a> ? <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#78cd7a9725fd887d" class="i field">White</a> : <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>);
                }
            }
            <b>return</b> <span class="r11 r">res</span>;
        }
 
        <b>private static long</b>[] <a id="88e89bc011f91503" href="R/88e89bc011f91503.html" target="n" data-glyph="76,1" class="i method">GetGrayScaleHistogram</a>(<b>byte</b>[] <span id="r14 rd" class="r14 r">grayScalePixels</span>)
        {
            <b>var</b> <span id="r15 rd" class="r15 r">res</span> = <b>new</b> <b>long</b>[256];
            <b>foreach</b> (<a href="@0@mscorlib/A.html#3933aebb80415ce0" class="k">var</a> <span id="r16 rd" class="r16 r">pixel</span> <b>in</b> <span class="r14 r">grayScalePixels</span>)
            {
                <span class="r15 r">res</span>[<span class="r16 r">pixel</span>]++;
            }
            <b>return</b> <span class="r15 r">res</span>;
        }
 
        <b>private static double</b> <a id="c2659ed9acb48c5b" href="R/c2659ed9acb48c5b.html" target="n" data-glyph="76,1" class="i method">GetThresholdByOtsu</a>(<b>byte</b>[] <span id="r17 rd" class="r17 r">grayScalePixels</span>)
        {
            <b>long</b> <span id="r18 rd" class="r18 r">pixelsCount</span> = <span class="r17 r">grayScalePixels</span>.<a href="@0@mscorlib/A.html#91ca842de2c70bd1" class="i property">LongLength</a>;
            <b>long</b>[] <span id="r19 rd" class="r19 r">histogram</span> = <a href="#88e89bc011f91503" class="i method">GetGrayScaleHistogram</a>(<span class="r17 r">grayScalePixels</span>);
 
            <b>long</b> <span id="r20 rd" class="r20 r">classSumTotal</span> = 0;
            <b>for</b> (<b>int</b> <span id="r21 rd" class="r21 r">i</span> = 1; <span class="r21 r">i</span> &lt; 256; <span class="r21 r">i</span>++) <span class="r20 r">classSumTotal</span> += <span class="r21 r">i</span> * <span class="r19 r">histogram</span>[<span class="r21 r">i</span>];
 
            <b>long</b> <span id="r22 rd" class="r22 r">classSumLeft</span> = 0;
            <b>long</b> <span id="r23 rd" class="r23 r">classProbLeft</span> = 0;
            <b>double</b> <span id="r24 rd" class="r24 r">maxInnerVar</span> = 0;
            <b>double</b> <span id="r25 rd" class="r25 r">threshold1</span> = 0;
            <b>double</b> <span id="r26 rd" class="r26 r">threshold2</span> = 0;
 
            <b>for</b> (<b>int</b> <span id="r27 rd" class="r27 r">threshold</span> = 0; <span class="r27 r">threshold</span> &lt; 256; <span class="r27 r">threshold</span>++)
            {
                <b>long</b> <span id="r28 rd" class="r28 r">probability</span> = <span class="r19 r">histogram</span>[<span class="r27 r">threshold</span>];
                <span class="r23 r">classProbLeft</span> += <span class="r28 r">probability</span>;
                <b>if</b> (<span class="r23 r">classProbLeft</span> == 0) <b>continue</b>;
 
                <b>long</b> <span id="r29 rd" class="r29 r">classProbRight</span> = <span class="r18 r">pixelsCount</span> - <span class="r23 r">classProbLeft</span>;
                <b>if</b> (<span class="r29 r">classProbRight</span> == 0) <b>continue</b>;
 
                <span class="r22 r">classSumLeft</span> += <span class="r27 r">threshold</span> * <span class="r28 r">probability</span>;
                <b>double</b> <span id="r30 rd" class="r30 r">classMeanDiff</span> = (<b>double</b>)<span class="r22 r">classSumLeft</span> / <span class="r23 r">classProbLeft</span> - (<b>double</b>)(<span class="r20 r">classSumTotal</span> - <span class="r22 r">classSumLeft</span>) / <span class="r29 r">classProbRight</span>;
                <b>double</b> <span id="r31 rd" class="r31 r">innerClassVar</span> = <span class="r23 r">classProbLeft</span> * <span class="r29 r">classProbRight</span> * <span class="r30 r">classMeanDiff</span> * <span class="r30 r">classMeanDiff</span>;
 
                <b>if</b> (<span class="r31 r">innerClassVar</span> &gt;= <span class="r24 r">maxInnerVar</span>)
                {
                    <span class="r25 r">threshold1</span> = <span class="r27 r">threshold</span>;
                    <b>if</b> (<span class="r31 r">innerClassVar</span> &gt; <span class="r24 r">maxInnerVar</span>) <span class="r26 r">threshold2</span> = <span class="r27 r">threshold</span>;
                    <span class="r24 r">maxInnerVar</span> = <span class="r31 r">innerClassVar</span>;
                }
            }
            <b>return</b> (<span class="r25 r">threshold1</span> + <span class="r26 r">threshold2</span>) / 2;
        }
 
        <b>public byte</b>[] <a id="351124d95f1a7789" href="R/351124d95f1a7789.html" target="n" data-glyph="72,1" class="i method">ToPixelsData</a>()
        {
            <b>byte</b>[] <span id="r32 rd" class="r32 r">data</span> = <b>new</b> <b>byte</b>[<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a> * <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>];
            <b>for</b> (<b>int</b> <span id="r33 rd" class="r33 r">x</span> = 0; <span class="r33 r">x</span> &lt; <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r33 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r34 rd" class="r34 r">y</span> = 0; <span class="r34 r">y</span> &lt; <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r34 r">y</span>++)
                {
                    <span class="r32 r">data</span>[<span class="r34 r">y</span> * <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a> + <span class="r33 r">x</span>] = (<b>byte</b>)(<a href="Image.cs.html#5651742cc0b908e4" class="i property">Pixels</a>[<span class="r33 r">x</span>, <span class="r34 r">y</span>] == <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a> ? 0 : 255);
                }
            }
            <b>return</b> <span class="r32 r">data</span>;
        }
 
        <b>private bool</b> <a id="fb04739b8fc402ca" href="R/fb04739b8fc402ca.html" target="n" data-glyph="76,1" class="i method">IsPointInImage</a>(<a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r35 rd" class="r35 r">point</span>)
        {
            <b>return</b> <span class="r35 r">point</span>.<a href="Utils.cs.html#5076fe065fd29731" class="i property">X</a> &gt; 0 &amp;&amp; <span class="r35 r">point</span>.<a href="Utils.cs.html#5076fe065fd29731" class="i property">X</a> &lt; <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a> &amp;&amp; <span class="r35 r">point</span>.<a href="Utils.cs.html#51414d1ba3c71184" class="i property">Y</a> &gt; 0 &amp;&amp; <span class="r35 r">point</span>.<a href="Utils.cs.html#51414d1ba3c71184" class="i property">Y</a> &lt; <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>;
        }
 
        <b>private bool</b> <a id="e74717b76d54d20f" href="R/e74717b76d54d20f.html" target="n" data-glyph="76,1" class="i method">IsOverlap</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r36 rd" class="r36 r">structElement</span>, <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r37 rd" class="r37 r">originOnImage</span>)
        {
            <b>for</b> (<b>int</b> <span id="r38 rd" class="r38 r">dx</span> = 0; <span class="r38 r">dx</span> &lt; <span class="r36 r">structElement</span>.<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r38 r">dx</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r39 rd" class="r39 r">dy</span> = 0; <span class="r39 r">dy</span> &lt; <span class="r36 r">structElement</span>.<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r39 r">dy</span>++)
                {
                    <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r40 rd" class="r40 r">point</span> = <span class="r37 r">originOnImage</span> - <span class="r36 r">structElement</span>.<a href="#5aa9340ffa427251" class="i property">Origin</a> + <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r38 r">dx</span>, <span class="r39 r">dy</span>);
                    <span class="c">//if (x1 &lt; 0 || x1 &gt;= PixelWidth || y1 &lt; 0 || y1 &gt;= PixelHeight) continue;</span>
                    <b>if</b> (!<a href="#fb04739b8fc402ca" class="i method">IsPointInImage</a>(<span class="r40 r">point</span>)) <b>continue</b>;
                    <b>if</b> (<span class="r36 r">structElement</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r38 r">dx</span>, <span class="r39 r">dy</span>] == <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a> &amp;&amp; <a href="#79091e2cec4a2cd2" class="k">this</a><a href="Image.cs.html#49934ec4274bca7d">[</a><span class="r40 r">point</span>] == <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>) <b>return</b> <b>true</b>;
                }
            }
            <b>return</b> <b>false</b>;
        }
 
        <b>private bool</b> <a id="5f2c97593cbad407" href="R/5f2c97593cbad407.html" target="n" data-glyph="76,1" class="i method">IsCovered</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r41 rd" class="r41 r">structElement</span>, <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r42 rd" class="r42 r">originOnImage</span>)
        {
            <b>for</b> (<b>int</b> <span id="r43 rd" class="r43 r">dx</span> = 0; <span class="r43 r">dx</span> &lt; <span class="r41 r">structElement</span>.<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r43 r">dx</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r44 rd" class="r44 r">dy</span> = 0; <span class="r44 r">dy</span> &lt; <span class="r41 r">structElement</span>.<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r44 r">dy</span>++)
                {
                    <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r45 rd" class="r45 r">point</span> = <span class="r42 r">originOnImage</span> - <span class="r41 r">structElement</span>.<a href="#5aa9340ffa427251" class="i property">Origin</a> + <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r43 r">dx</span>, <span class="r44 r">dy</span>);
                    <b>if</b> (!<a href="#fb04739b8fc402ca" class="i method">IsPointInImage</a>(<span class="r45 r">point</span>)) <b>continue</b>;
                    <b>if</b> (<span class="r41 r">structElement</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r43 r">dx</span>, <span class="r44 r">dy</span>] == <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a> &amp;&amp; <a href="#79091e2cec4a2cd2" class="k">this</a><a href="Image.cs.html#49934ec4274bca7d">[</a><span class="r45 r">point</span>] != <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>) <b>return</b> <b>false</b>;
                }
            }
            <b>return</b> <b>true</b>;
        }
 
        <b>public</b> <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <a id="9790da5404279b00" href="R/9790da5404279b00.html" target="n" data-glyph="72,1" class="i method">Dilation</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r46 rd" class="r46 r">structElement</span>)
        {
            <a href="#79091e2cec4a2cd2" class="k">var</a> <span id="r47 rd" class="r47 r">res</span> = <b>new</b> <a href="#d05eaf72de58c8d6" class="t constructor">BinaryImage</a>(<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>, <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>);
            <b>for</b> (<b>int</b> <span id="r48 rd" class="r48 r">x</span> = 0; <span class="r48 r">x</span> &lt; <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r48 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r49 rd" class="r49 r">y</span> = 0; <span class="r49 r">y</span> &lt; <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r49 r">y</span>++)
                {
                    <b>if</b> (<a href="#e74717b76d54d20f" class="i method">IsOverlap</a>(<span class="r46 r">structElement</span>, <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r48 r">x</span>, <span class="r49 r">y</span>))) <span class="r47 r">res</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r48 r">x</span>, <span class="r49 r">y</span>] = <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>;
                }
            }
            <b>return</b> <span class="r47 r">res</span>;
        }
 
        <b>public</b> <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <a id="ead8cbf8a702b45c" href="R/ead8cbf8a702b45c.html" target="n" data-glyph="72,1" class="i method">Erosion</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r50 rd" class="r50 r">structElement</span>)
        {
            <a href="#79091e2cec4a2cd2" class="k">var</a> <span id="r51 rd" class="r51 r">res</span> = <b>new</b> <a href="#d05eaf72de58c8d6" class="t constructor">BinaryImage</a>(<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>, <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>);
            <b>for</b> (<b>int</b> <span id="r52 rd" class="r52 r">x</span> = 0; <span class="r52 r">x</span> &lt; <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r52 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r53 rd" class="r53 r">y</span> = 0; <span class="r53 r">y</span> &lt; <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r53 r">y</span>++)
                {
                    <b>if</b> (<a href="#5f2c97593cbad407" class="i method">IsCovered</a>(<span class="r50 r">structElement</span>, <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r52 r">x</span>, <span class="r53 r">y</span>))) <span class="r51 r">res</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r52 r">x</span>, <span class="r53 r">y</span>] = <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>;
                }
            }
            <b>return</b> <span class="r51 r">res</span>;
        }
 
        <b>public</b> <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <a id="f133eb445f4ac887" href="R/f133eb445f4ac887.html" target="n" data-glyph="72,1" class="i method">Open</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r54 rd" class="r54 r">structElement</span>)
        {
            <b>return</b> <a href="#ead8cbf8a702b45c" class="i method">Erosion</a>(<span class="r54 r">structElement</span>).<a href="#9790da5404279b00" class="i method">Dilation</a>(<span class="r54 r">structElement</span>);
        }
 
        <b>public</b> <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a> <a id="38c67d3b22ed9a8f" href="R/38c67d3b22ed9a8f.html" target="n" data-glyph="72,1" class="i method">Close</a>(<a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <span id="r55 rd" class="r55 r">structElement</span>)
        {
            <b>return</b> <a href="#9790da5404279b00" class="i method">Dilation</a>(<span class="r55 r">structElement</span>).<a href="#ead8cbf8a702b45c" class="i method">Erosion</a>(<span class="r55 r">structElement</span>);
        }
 
        <b>public</b> <a href="@0@PresentationCore/A.html#0423ed363f952960" class="t t">BitmapSource</a> <a id="5c1f2aad7c102d66" href="R/5c1f2aad7c102d66.html" target="n" data-glyph="72,1" class="i method">ToBitmapSource</a>(<b>double</b> <span id="r56 rd" class="r56 r">dpiX</span>, <b>double</b> <span id="r57 rd" class="r57 r">dpiY</span>)
        {
            <b>return</b> <a href="@0@PresentationCore/A.html#0423ed363f952960" class="t t">BitmapSource</a>.<a href="@0@PresentationCore/A.html#773efce8ba35b36e" class="i method">Create</a>(<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>, <a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>, <span class="r56 r">dpiX</span>, <span class="r57 r">dpiY</span>, <a href="@0@PresentationCore/A.html#8f8a28423b24bd8e" class="t t">PixelFormats</a>.<a href="@0@PresentationCore/A.html#20014ee385b9c1d3" class="i property">Gray8</a>, <a href="@0@PresentationCore/A.html#5e1fae8c1b7e6c68" class="t t">BitmapPalettes</a>.<a href="@0@PresentationCore/A.html#567b261f5fda5061" class="i property">Gray256</a>, <a href="#351124d95f1a7789" class="i method">ToPixelsData</a>(), <a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>);
        }
    }
 
    <b>public class</b> <a id="0b246ee7efd51d3b" href="R/0b246ee7efd51d3b.html" target="n" data-glyph="0,0" class="t t">StructuringElement</a> : <a href="#79091e2cec4a2cd2" class="t t">BinaryImage</a>
    {
        <b>public</b> <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <a id="5aa9340ffa427251" href="R/5aa9340ffa427251.html" target="n" data-glyph="102,1" class="i property">Origin</a> { <b>get</b>; <b>set</b>; }
 
        <b>public</b> <a id="005281ff86ce797e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">StructuringElement</a>(<a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>[,] <span id="r58 rd" class="r58 r">pixels</span>, <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r59 rd" class="r59 r">origin</span>) : <a href="#ec01299d26b8e245" class="k">base</a>(<span class="r58 r">pixels</span>)
        {
            <a href="#5aa9340ffa427251" class="i property">Origin</a> = <span class="r59 r">origin</span>;
        }
 
        <b>public</b> <a id="3423ea16f69a4d10" href="R/3423ea16f69a4d10.html" target="n" data-glyph="72,1" class="t constructor">StructuringElement</a>(<b>int</b> <span id="r60 rd" class="r60 r">pixelWidth</span>, <b>int</b> <span id="r61 rd" class="r61 r">pixelHeight</span>, <a href="Utils.cs.html#f3050fa26e1403a8" class="t t">Point</a> <span id="r62 rd" class="r62 r">origin</span>) : <a href="#d05eaf72de58c8d6" class="k">base</a>(<span class="r60 r">pixelWidth</span>, <span class="r61 r">pixelHeight</span>)
        {
            <a href="#5aa9340ffa427251" class="i property">Origin</a> = <span class="r62 r">origin</span>;
        }
    }
 
    <b>public static class</b> <a id="fa2d84162e748d82" href="R/fa2d84162e748d82.html" target="n" data-glyph="0,0" class="t t">StructuringElements</a>
    {
        <b>public static</b> <a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <a id="70e553ed16090085" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Circle</a>(<b>int</b> <span id="r63 rd" class="r63 r">radius</span>)
        {
            <a href="Utils.cs.html#f3050fa26e1403a8" class="k">var</a> <span id="r64 rd" class="r64 r">origin</span> = <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r63 r">radius</span>, <span class="r63 r">radius</span>);
            <a href="#0b246ee7efd51d3b" class="k">var</a> <span id="r65 rd" class="r65 r">element</span> = <b>new</b> <a href="#3423ea16f69a4d10" class="t constructor">StructuringElement</a>(<span class="r63 r">radius</span> * 2, <span class="r63 r">radius</span> * 2, <span class="r64 r">origin</span>);
            <b>int</b> <span id="r66 rd" class="r66 r">squaredRadius</span> = <span class="r63 r">radius</span> * <span class="r63 r">radius</span>;
            <b>for</b> (<b>int</b> <span id="r67 rd" class="r67 r">x</span> = 0; <span class="r67 r">x</span> &lt; <span class="r65 r">element</span>.<a href="Image.cs.html#54ade488d528add0" class="i property">PixelWidth</a>; <span class="r67 r">x</span>++)
            {
                <b>for</b> (<b>int</b> <span id="r68 rd" class="r68 r">y</span> = 0; <span class="r68 r">y</span> &lt; <span class="r65 r">element</span>.<a href="Image.cs.html#a7d6e0fa5506e0af" class="i property">PixelHeight</a>; <span class="r68 r">y</span>++)
                {
                    <span class="r65 r">element</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r67 r">x</span>, <span class="r68 r">y</span>] = <span class="r65 r">element</span>.<a href="#5aa9340ffa427251" class="i property">Origin</a>.<a href="Utils.cs.html#f0d7ec017ff2c4b4" class="i method">GetSquaredDistance</a>(<b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r67 r">x</span>, <span class="r68 r">y</span>)) &lt; <span class="r66 r">squaredRadius</span> ? <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a> : <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#78cd7a9725fd887d" class="i field">White</a>;
                }
            }
            <b>return</b> <span class="r65 r">element</span>;
        }
 
        <b>public static</b> <a href="#0b246ee7efd51d3b" class="t t">StructuringElement</a> <a id="4701c0f732048d9a" href="R/4701c0f732048d9a.html" target="n" data-glyph="72,1" class="i method">Cross</a>(<b>int</b> <span id="r69 rd" class="r69 r">length</span>)
        {
            <a href="#0b246ee7efd51d3b" class="k">var</a> <span id="r70 rd" class="r70 r">element</span> = <b>new</b> <a href="#3423ea16f69a4d10" class="t constructor">StructuringElement</a>(<span class="r69 r">length</span>, <span class="r69 r">length</span>, <b>new</b> <a href="Utils.cs.html#c4c1324ab234eec1" class="t constructor">Point</a>(<span class="r69 r">length</span> / 2, <span class="r69 r">length</span> / 2));
            <b>for</b> (<b>int</b> <span id="r71 rd" class="r71 r">i</span> = 0; <span class="r71 r">i</span> &lt; <span class="r69 r">length</span>; <span class="r71 r">i</span>++)
            {
                <span class="r70 r">element</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r71 r">i</span>, <span class="r69 r">length</span> / 2] = <span class="r70 r">element</span><a href="Image.cs.html#9c349052b81e5e7e">[</a><span class="r69 r">length</span> / 2, <span class="r71 r">i</span>] = <a href="Pixels.cs.html#fbafd5c498d3cae7" class="t t">BinaryPixel</a>.<a href="Pixels.cs.html#ed384d1bb3a0196d" class="i field">Black</a>;
            }
            <b>return</b> <span class="r70 r">element</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>
