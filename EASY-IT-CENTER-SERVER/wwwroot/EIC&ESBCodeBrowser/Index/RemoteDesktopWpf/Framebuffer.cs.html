<!DOCTYPE html>
<html><head><title>Framebuffer.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(298);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#RemoteDesktopWpf/Framebuffer.cs" target="_top">Framebuffer.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#RemoteDesktopWpf" target="_top">..\..\..\EASY-TOOLS\EASYTools.VNCLib\EASYTools.VNCLib.csproj</a> (RemoteDesktopWpf)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// RemoteDesktopWpf - .NET VNC Client for WPF Library</span>
<span class="c">// Copyright (C) 2008 David Humphrey</span>
<span class="c">//</span>
<span class="c">// This program is free software; you can redistribute it and/or modify</span>
<span class="c">// it under the terms of the GNU General Public License as published by</span>
<span class="c">// the Free Software Foundation; either version 2 of the License, or</span>
<span class="c">// (at your option) any later version.</span>
<span class="c">//</span>
<span class="c">// This program is distributed in the hope that it will be useful,</span>
<span class="c">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">// GNU General Public License for more details.</span>
<span class="c">//</span>
<span class="c">// You should have received a copy of the GNU General Public License</span>
<span class="c">// along with this program; if not, write to the Free Software</span>
<span class="c">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Drawing</span>;
 
<b>namespace</b> <span class="i n">RemoteDesktopWpf</span>
{
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c"> Properties of a VNC Framebuffer, and its Pixel Format.</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
	<b>public class</b> <a id="271f2ef1d4bba1cb" href="R/271f2ef1d4bba1cb.html" target="n" data-glyph="0,0" class="t t">Framebuffer</a>
	{
		<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <a id="ccc3ab0061c0e47a" href="R/ccc3ab0061c0e47a.html" target="n" data-glyph="46,1" class="i field">name</a>;
 
		<b>int</b>	 <a id="4e11bfa992559898" href="R/4e11bfa992559898.html" target="n" data-glyph="46,1" class="i field">bpp</a>;
		<b>int</b>	 <a id="a23236c150b7c9c0" href="R/a23236c150b7c9c0.html" target="n" data-glyph="46,1" class="i field">depth</a>;
		<b>bool</b> <a id="6d09366cee9218f0" href="R/6d09366cee9218f0.html" target="n" data-glyph="46,1" class="i field">bigEndian</a>;
		<b>bool</b> <a id="151fa5ee8f8f417c" href="R/151fa5ee8f8f417c.html" target="n" data-glyph="46,1" class="i field">trueColour</a>;
		<b>int</b>	 <a id="9c64e8752a959256" href="R/9c64e8752a959256.html" target="n" data-glyph="46,1" class="i field">redMax</a>;
		<b>int</b>	 <a id="c7e76943d4088e67" href="R/c7e76943d4088e67.html" target="n" data-glyph="46,1" class="i field">greenMax</a>;
		<b>int</b>	 <a id="15af3a3164b6e33a" href="R/15af3a3164b6e33a.html" target="n" data-glyph="46,1" class="i field">blueMax</a>;
		<b>int</b>	 <a id="f41381e64cf28203" href="R/f41381e64cf28203.html" target="n" data-glyph="46,1" class="i field">redShift</a>;
		<b>int</b>	 <a id="8066faa146321033" href="R/8066faa146321033.html" target="n" data-glyph="46,1" class="i field">greenShift</a>;
		<b>int</b>	 <a id="0714d9098906033b" href="R/0714d9098906033b.html" target="n" data-glyph="46,1" class="i field">blueShift</a>;
 
		<b>readonly int</b> <a id="0fb5629a3ea004b1" href="R/0fb5629a3ea004b1.html" target="n" data-glyph="46,1" class="i field">width</a>;
		<b>readonly int</b> <a id="a679091aa1e1f942" href="R/a679091aa1e1f942.html" target="n" data-glyph="46,1" class="i field">height</a>;
		<b>readonly int</b>[] <a id="99ef618bd29717f4" href="R/99ef618bd29717f4.html" target="n" data-glyph="46,1" class="i field">pixels</a>;	 <span class="c">// I&#39;m reusing the same pixel buffer for all update rectangles.</span>
								 <span class="c">// Pixel values will always be 32-bits to match GDI representation</span>
		<b>readonly int</b> <a id="b9f2420549bfcf7a" href="R/b9f2420549bfcf7a.html" target="n" data-glyph="46,1" class="i field">pixelCount</a>; <span class="c">// The total number of pixels (w x h) assigned in SetSize()</span>
 
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Creates a new Framebuffer with (width x height) pixels.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">width</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The width in pixels of the remote desktop.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">height</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The height in pixels of the remote desktop.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<b>public</b> <a id="91ce29ae01937a33" href="R/91ce29ae01937a33.html" target="n" data-glyph="72,1" class="t constructor">Framebuffer</a>(<b>int</b> <span id="r0 rd" class="r0 r">width</span>, <b>int</b> <span id="r1 rd" class="r1 r">height</span>)
		{
			<a href="#271f2ef1d4bba1cb" class="k">this</a>.<a href="#0fb5629a3ea004b1" class="i field">width</a> = <span class="r0 r">width</span>;
			<a href="#271f2ef1d4bba1cb" class="k">this</a>.<a href="#a679091aa1e1f942" class="i field">height</a> = <span class="r1 r">height</span>;
			
			<span class="c">// Cache the total size of the pixel array and initialize</span>
			<a href="#b9f2420549bfcf7a" class="i field">pixelCount</a> = <span class="r0 r">width</span> * <span class="r1 r">height</span>;
			<a href="#99ef618bd29717f4" class="i field">pixels</a> = <b>new</b> <b>int</b>[<a href="#b9f2420549bfcf7a" class="i field">pixelCount</a>];
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> An indexer to allow access to the internal pixel buffer.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="9b6886350959b793" href="R/9b6886350959b793.html" target="n" data-glyph="102,1" class="k">this</a>[<b>int</b> <span id="r2 rd" class="r2 r">index</span>] {
			<b>get</b> {
				<b>return</b> <a href="#99ef618bd29717f4" class="i field">pixels</a>[<span class="r2 r">index</span>];
			}
			<b>set</b> {
				<a href="#99ef618bd29717f4" class="i field">pixels</a>[<span class="r2 r">index</span>] = <b>value</b>;				
			}
		}
 
        <b>public int</b>[] <a id="c27f1e523d5adfcd" href="R/c27f1e523d5adfcd.html" target="n" data-glyph="72,1" class="i method">GetPixelArray</a>()
        {
            <b>return</b> <a href="#271f2ef1d4bba1cb" class="k">this</a>.<a href="#99ef618bd29717f4" class="i field">pixels</a>;
        }
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The Width of the Framebuffer, measured in Pixels.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="bdb7a09c14a81c20" href="R/bdb7a09c14a81c20.html" target="n" data-glyph="102,1" class="i property">Width</a> {
			<b>get</b> {
				<b>return</b> <a href="#0fb5629a3ea004b1" class="i field">width</a>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The Height of the Framebuffer, measured in Pixels.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="17f24f78fa8f4196" href="R/17f24f78fa8f4196.html" target="n" data-glyph="102,1" class="i property">Height</a> {
			<b>get</b> {
				<b>return</b> <a href="#a679091aa1e1f942" class="i field">height</a>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Gets a Rectangle object constructed out of the Width and Height for the Framebuffer.  Used as a convenience in other classes.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public</b> <a href="@0@System.Drawing/A.html#17559e21008f381d" class="t t">Rectangle</a> <a id="3766ae41687468e6" href="R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">Rectangle</a> {
			<b>get</b> {
				<b>return</b> <b>new</b> <a href="@0@System.Drawing/A.html#3915ba377b43f9bf" class="t constructor">Rectangle</a>(0, 0, <a href="#0fb5629a3ea004b1" class="i field">width</a>, <a href="#a679091aa1e1f942" class="i field">height</a>);
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The number of Bits Per Pixel for the Framebuffer--one of 8, 24, or 32.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="0d4347085a68198e" href="R/0d4347085a68198e.html" target="n" data-glyph="102,1" class="i property">BitsPerPixel</a> {
			<b>get</b> {
				<b>return</b> <a href="#4e11bfa992559898" class="i field">bpp</a>;
			}
			<b>set</b> {
				<a href="#4e11bfa992559898" class="i field">bpp</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The Colour Depth of the Framebuffer.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="ce1d7513dec45dae" href="R/ce1d7513dec45dae.html" target="n" data-glyph="102,1" class="i property">Depth</a> {
			<b>get</b> {
				<b>return</b> <a href="#a23236c150b7c9c0" class="i field">depth</a>;
			}
			<b>set</b> {
				<a href="#a23236c150b7c9c0" class="i field">depth</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Indicates whether the remote host uses Big- or Little-Endian order when sending multi-byte values.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public bool</b> <a id="2b0fb6d46084c9cf" href="R/2b0fb6d46084c9cf.html" target="n" data-glyph="102,1" class="i property">BigEndian</a> {
			<b>get</b> {
				<b>return</b> <a href="#6d09366cee9218f0" class="i field">bigEndian</a>;
			}
			<b>set</b> {
				<a href="#6d09366cee9218f0" class="i field">bigEndian</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Indicates whether the remote host supports True Colour.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public bool</b> <a id="7472deb484dcc915" href="R/7472deb484dcc915.html" target="n" data-glyph="102,1" class="i property">TrueColour</a> {
			<b>get</b> {
				<b>return</b> <a href="#151fa5ee8f8f417c" class="i field">trueColour</a>;
			}
			<b>set</b> {
				<a href="#151fa5ee8f8f417c" class="i field">trueColour</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The maximum value for Red in a pixel&#39;s colour value.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="450a0deecc433721" href="R/450a0deecc433721.html" target="n" data-glyph="102,1" class="i property">RedMax</a> {
			<b>get</b> {
				<b>return</b> <a href="#9c64e8752a959256" class="i field">redMax</a>;
			}
			<b>set</b> {
				<a href="#9c64e8752a959256" class="i field">redMax</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The maximum value for Green in a pixel&#39;s colour value.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="1b89a3e32a40ac8c" href="R/1b89a3e32a40ac8c.html" target="n" data-glyph="102,1" class="i property">GreenMax</a> {
			<b>get</b> {
				<b>return</b> <a href="#c7e76943d4088e67" class="i field">greenMax</a>;
			}
			<b>set</b> {
				<a href="#c7e76943d4088e67" class="i field">greenMax</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The maximum value for Blue in a pixel&#39;s colour value.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="120d2969df56ea4e" href="R/120d2969df56ea4e.html" target="n" data-glyph="102,1" class="i property">BlueMax</a> {
			<b>get</b> {
				<b>return</b> <a href="#15af3a3164b6e33a" class="i field">blueMax</a>;
			}
			<b>set</b> {
				<a href="#15af3a3164b6e33a" class="i field">blueMax</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The number of bits to shift pixel values in order to obtain Red values.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="047dd9927dd94cdd" href="R/047dd9927dd94cdd.html" target="n" data-glyph="102,1" class="i property">RedShift</a> {
			<b>get</b> {
				<b>return</b> <a href="#f41381e64cf28203" class="i field">redShift</a>;
			}
			<b>set</b> {
				<a href="#f41381e64cf28203" class="i field">redShift</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The number of bits to shift pixel values in order to obtain Green values.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="9abc3593e6f909bb" href="R/9abc3593e6f909bb.html" target="n" data-glyph="102,1" class="i property">GreenShift</a> {
			<b>get</b> {
				<b>return</b> <a href="#8066faa146321033" class="i field">greenShift</a>;
			}
			<b>set</b> {
				<a href="#8066faa146321033" class="i field">greenShift</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The number of bits to shift pixel values in order to obtain Blue values.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<b>public int</b> <a id="799f58b2ca61b6f8" href="R/799f58b2ca61b6f8.html" target="n" data-glyph="102,1" class="i property">BlueShift</a> {
			<b>get</b> {
				<b>return</b> <a href="#0714d9098906033b" class="i field">blueShift</a>;
			}
			<b>set</b> {
				<a href="#0714d9098906033b" class="i field">blueShift</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> The name of the remote destkop, if any.  Must be non-null.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#c742289497493bb8" class="t t">ArgumentNullException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Thrown if a null string is used when setting DesktopName.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
		<b>public string</b> <a id="a2686b321fa26c2e" href="R/a2686b321fa26c2e.html" target="n" data-glyph="102,1" class="i property">DesktopName</a> {
			<b>get</b> {
				<b>return</b> <a href="#ccc3ab0061c0e47a" class="i field">name</a>;
			}
			<b>set</b> {
				<b>if</b> (<b>value</b> == <b>null</b>)
					<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<span class="s">&quot;DesktopName&quot;</span>);
				<a href="#ccc3ab0061c0e47a" class="i field">name</a> = <b>value</b>;
			}
		}
 
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> When communicating with the VNC Server, bytes are used to represent many of the values above.  However, internally it is easier to use Integers.  This method provides a translation between the two worlds.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A byte array of 16 bytes containing the properties of the framebuffer in a format ready for transmission to the VNC server.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public byte</b>[] <a id="1ee41f900dd1fe37" href="R/1ee41f900dd1fe37.html" target="n" data-glyph="72,1" class="i method">ToPixelFormat</a>()
		{
			<b>byte</b>[] <span id="r3 rd" class="r3 r">b</span> = <b>new</b> <b>byte</b>[16];
			
			<span class="r3 r">b</span>[0]  = (<b>byte</b>) <a href="#4e11bfa992559898" class="i field">bpp</a>;
			<span class="r3 r">b</span>[1]  = (<b>byte</b>) <a href="#a23236c150b7c9c0" class="i field">depth</a>;
			<span class="r3 r">b</span>[2]  = (<b>byte</b>) (<a href="#6d09366cee9218f0" class="i field">bigEndian</a> ? 1 : 0);
			<span class="r3 r">b</span>[3]  = (<b>byte</b>) (<a href="#151fa5ee8f8f417c" class="i field">trueColour</a> ? 1 : 0);
			<span class="r3 r">b</span>[4]  = (<b>byte</b>) ((<a href="#9c64e8752a959256" class="i field">redMax</a> &gt;&gt; 8) &amp; 0xff);
			<span class="r3 r">b</span>[5]  = (<b>byte</b>) (<a href="#9c64e8752a959256" class="i field">redMax</a> &amp; 0xff);
			<span class="r3 r">b</span>[6]  = (<b>byte</b>) ((<a href="#c7e76943d4088e67" class="i field">greenMax</a> &gt;&gt; 8) &amp; 0xff);
			<span class="r3 r">b</span>[7]  = (<b>byte</b>) (<a href="#c7e76943d4088e67" class="i field">greenMax</a> &amp; 0xff);
			<span class="r3 r">b</span>[8]  = (<b>byte</b>) ((<a href="#15af3a3164b6e33a" class="i field">blueMax</a> &gt;&gt; 8) &amp; 0xff);
			<span class="r3 r">b</span>[9]  = (<b>byte</b>) (<a href="#15af3a3164b6e33a" class="i field">blueMax</a> &amp; 0xff);
			<span class="r3 r">b</span>[10] = (<b>byte</b>) <a href="#f41381e64cf28203" class="i field">redShift</a>;
			<span class="r3 r">b</span>[11] = (<b>byte</b>) <a href="#8066faa146321033" class="i field">greenShift</a>;
			<span class="r3 r">b</span>[12] = (<b>byte</b>) <a href="#0714d9098906033b" class="i field">blueShift</a>;
			<span class="c">// plus 3 bytes padding = 16 bytes</span>
			
			<b>return</b> <span class="r3 r">b</span>;
		}
		
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> Given the dimensions and 16-byte PIXEL_FORMAT record from the VNC Host, deserialize this into a Framebuffer object.</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">b</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The 16-byte PIXEL_FORMAT record.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">width</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The width in pixels of the remote desktop.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">height</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The height in pixles of the remote desktop.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
		<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Returns a Framebuffer object matching the specification of b[].</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
		<b>public static</b> <a href="#271f2ef1d4bba1cb" class="t t">Framebuffer</a> <a id="ac4dcb97c80873db" href="R/ac4dcb97c80873db.html" target="n" data-glyph="72,1" class="i method">FromPixelFormat</a>(<b>byte</b>[] <span id="r4 rd" class="r4 r">b</span>, <b>int</b> <span id="r5 rd" class="r5 r">width</span>, <b>int</b> <span id="r6 rd" class="r6 r">height</span>)
		{
			<b>if</b> (<span class="r4 r">b</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> != 16)
				<b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Length of b must be 16 bytes.&quot;</span>);
			
			<a href="#271f2ef1d4bba1cb" class="t t">Framebuffer</a> <span id="r7 rd" class="r7 r">buffer</span> = <b>new</b> <a href="#91ce29ae01937a33" class="t constructor">Framebuffer</a>(<span class="r5 r">width</span>, <span class="r6 r">height</span>);
			
			<span class="r7 r">buffer</span>.<a href="#0d4347085a68198e" class="i property">BitsPerPixel</a>	= (<b>int</b>) <span class="r4 r">b</span>[0];
			<span class="r7 r">buffer</span>.<a href="#ce1d7513dec45dae" class="i property">Depth</a>		= (<b>int</b>) <span class="r4 r">b</span>[1];
			<span class="r7 r">buffer</span>.<a href="#2b0fb6d46084c9cf" class="i property">BigEndian</a>	= (<span class="r4 r">b</span>[2] != 0);
			<span class="r7 r">buffer</span>.<a href="#7472deb484dcc915" class="i property">TrueColour</a>	= (<span class="r4 r">b</span>[3] != 0);
			<span class="r7 r">buffer</span>.<a href="#450a0deecc433721" class="i property">RedMax</a>		= (<b>int</b>) (<span class="r4 r">b</span>[5] | <span class="r4 r">b</span>[4] &lt;&lt; 8);
			<span class="r7 r">buffer</span>.<a href="#1b89a3e32a40ac8c" class="i property">GreenMax</a>		= (<b>int</b>) (<span class="r4 r">b</span>[7] | <span class="r4 r">b</span>[6] &lt;&lt; 8);
			<span class="r7 r">buffer</span>.<a href="#120d2969df56ea4e" class="i property">BlueMax</a>		= (<b>int</b>) (<span class="r4 r">b</span>[9] | <span class="r4 r">b</span>[8] &lt;&lt; 8);
			<span class="r7 r">buffer</span>.<a href="#047dd9927dd94cdd" class="i property">RedShift</a>		= (<b>int</b>) <span class="r4 r">b</span>[10];
			<span class="r7 r">buffer</span>.<a href="#9abc3593e6f909bb" class="i property">GreenShift</a>	= (<b>int</b>) <span class="r4 r">b</span>[11];
			<span class="r7 r">buffer</span>.<a href="#799f58b2ca61b6f8" class="i property">BlueShift</a>	= (<b>int</b>) <span class="r4 r">b</span>[12];
			<span class="c">// Last 3 bytes are padding, ignore									</span>
 
			<b>return</b> <span class="r7 r">buffer</span>;
		}
	}
}
</pre></td></tr></table></div></body></html>
