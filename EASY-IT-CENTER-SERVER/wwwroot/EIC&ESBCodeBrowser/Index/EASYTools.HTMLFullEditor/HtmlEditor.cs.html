<!DOCTYPE html>
<html><head><title>HtmlEditor.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(216);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#EASYTools.HTMLFullEditor/HtmlEditor.cs" target="_top">HtmlEditor.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#EASYTools.HTMLFullEditor" target="_top">..\..\..\EASY-TOOLS\EASYTools.HTMLFullEditor\EASYTools.HTMLFullEditor\EASYTools.HTMLFullEditor.csproj</a> (EASYTools.HTMLFullEditor)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Concurrent</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Interop</span>;
<b>using</b> <span class="i n">EASYTools</span>.<span class="i n">HTMLFullEditor</span>.<span class="i n">Annotations</span>;
<b>using</b> <span class="i n">EASYTools</span>.<span class="i n">HTMLFullEditor</span>.<span class="i n">Interfaces</span>;
<b>using</b> <span class="i n">EASYTools</span>.<span class="i n">HTMLFullEditor</span>.<span class="i n">ViewModels</span>;
<b>using</b> <span class="i n">EASYTools</span>.<span class="i n">HTMLFullEditor</span>.<span class="i n">Views</span>;
 
<b>namespace</b> <span class="i n">EASYTools</span>.<span class="i n">HTMLFullEditor</span>
{
    <b>public class</b> <a id="430447938bcba693" href="R/430447938bcba693.html" target="n" data-glyph="0,0" class="t t">HtmlEditor</a> : <a href="@0@PresentationFramework/A.html#ef80474a10d9350f" class="t t">UserControl</a>
    {
        <span class="c">/*
         * Access keys are fired in web browser control, event when typing
         * (Error in complex environments, where Focus is handled badly for COM objects - see https://stackoverflow.com/questions/18256886/webbrowser-control-keyboard-and-focus-behavior).
         * For example when there is command with access key &#39;e&#39;, you couldn&#39;t write &#39;e&#39; when editing text inside browser.
         * Solution inspiration: https://stackoverflow.com/questions/8444012/access-key-getting-selected-even-we-did-not-press-alt-key-in-wpf
         */</span>
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Access Keys resolve
 
        <b>static</b> <a id="934bb854cb64a385" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="t method">HtmlEditor</a>()
        {
            <span class="c">// registering for access key events</span>
            <a href="@0@PresentationCore/A.html#957201b984f3254f" class="t t">EventManager</a>.<a href="@0@PresentationCore/A.html#66f724375990e1b8" class="i method">RegisterClassHandler</a>(
                <b>typeof</b>(<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a>),
                <a href="@0@PresentationCore/A.html#db697457e8b6de6b" class="t t">AccessKeyManager</a>.<a href="@0@PresentationCore/A.html#42cc84bd396bb3a2" class="i field">AccessKeyPressedEvent</a>,
                <b>new</b> <span class="t">AccessKeyPressedEventHandler</span>(<a href="#93c0ab51e2821bf3" class="i method">AccessKeyPressedEventHandler</a>)
            );
        }
 
        <b>private static void</b> <a id="93c0ab51e2821bf3" href="R/93c0ab51e2821bf3.html" target="n" data-glyph="76,1" class="i method">AccessKeyPressedEventHandler</a>(<b>object</b> <span id="r0 rd" class="r0 r">sender</span>, <a href="@0@PresentationCore/A.html#5b8bb3e186e9e208" class="t t">AccessKeyPressedEventArgs</a> <span id="r1 rd" class="r1 r">e</span>)
        {
            <span class="c">// If Alt key is not pressed - handle the event</span>
            <b>if</b> ((<a href="@0@PresentationCore/A.html#af9b7892ee354373" class="t t">Keyboard</a>.<a href="@0@PresentationCore/A.html#559261cd22ef6741" class="i property">Modifiers</a> &amp; <a href="@0@WindowsBase/A.html#81f37ca96e12a565" class="t t">ModifierKeys</a>.<a href="@0@WindowsBase/A.html#8d53518ec75db73c" class="i field">Alt</a>) != <a href="@0@WindowsBase/A.html#81f37ca96e12a565" class="t t">ModifierKeys</a>.<a href="@0@WindowsBase/A.html#8d53518ec75db73c" class="i field">Alt</a>)
            {
                <b>foreach</b> (<a href="@0@mscorlib/A.html#8585965bb176a426" class="k">var</a> <span id="r2 rd" class="r2 r">kv</span> <b>in</b> <a href="#4353ca87bb2787e9" class="i field">LoadedEditors</a>)
                {
                    <span class="c">// if any HtmlEditor inner browser has focus - cancel this event</span>
                    <b>if</b> (<span class="r2 r">kv</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>.<a href="#3137b33419dd76ed" class="i property">InnerBrowserHasFocus</a>)
                    {
                        <span class="r1 r">e</span>.<a href="@0@PresentationCore/A.html#745feaea376d4707" class="i property">Target</a> = <b>null</b>;
                        <span class="r1 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
                        <b>return</b>;
                    }
                }
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Saving all currently loaded Editors inside.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static readonly</b> <a href="@0@mscorlib/A.html#2e5ef5704344a309" class="t t">ConcurrentDictionary</a>&lt;<a href="#430447938bcba693" class="t t">HtmlEditor</a>, <b>bool</b>&gt; <a id="4353ca87bb2787e9" href="R/4353ca87bb2787e9.html" target="n" data-glyph="46,1" class="i field">LoadedEditors</a> = <b>new</b> <a href="@0@mscorlib/A.html#abc35f3c19fa0290" class="t constructor">ConcurrentDictionary</a>&lt;<a href="#430447938bcba693" class="t t">HtmlEditor</a>, <b>bool</b>&gt;();
 
        <b>private static void</b> <a id="27e3e131f95012f3" href="R/27e3e131f95012f3.html" target="n" data-glyph="76,1" class="i method">OnControlLoaded</a>(<b>object</b> <span id="r3 rd" class="r3 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r4 rd" class="r4 r">e</span>)
        {
            <a href="#430447938bcba693" class="k">var</a> <span id="r5 rd" class="r5 r">editor</span> = (<a href="#430447938bcba693" class="t t">HtmlEditor</a>)<span class="r3 r">sender</span>;
            <a href="#4353ca87bb2787e9" class="i field">LoadedEditors</a>.<a href="@0@mscorlib/A.html#2de2f6d77cb8d316" class="i method">TryAdd</a>(<span class="r5 r">editor</span>, <b>true</b>);
        }
 
        <b>private static void</b> <a id="52889bb8253b7f10" href="R/52889bb8253b7f10.html" target="n" data-glyph="76,1" class="i method">OnControlUnloaded</a>(<b>object</b> <span id="r6 rd" class="r6 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r7 rd" class="r7 r">e</span>)
        {
            <a href="#430447938bcba693" class="k">var</a> <span id="r8 rd" class="r8 r">editor</span> = (<a href="#430447938bcba693" class="t t">HtmlEditor</a>)<span class="r6 r">sender</span>;
            <a href="#4353ca87bb2787e9" class="i field">LoadedEditors</a>.<a href="@0@mscorlib/A.html#19ffd03eb6d3bdff" class="i method">TryRemove</a>(<span class="r8 r">editor</span>, <b>out _</b>);
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>public</b> <a id="318ac4d243d2b522" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">HtmlEditor</a>()
        {
            <a href="#922b81fe096a9c9f" class="i method">InitializeEditor</a>();
 
            <a href="#430447938bcba693" class="k">this</a>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> += <a href="#27e3e131f95012f3" class="i method">OnControlLoaded</a>;
            <a href="#430447938bcba693" class="k">this</a>.<a href="@0@PresentationFramework/A.html#139f238b2a895570" class="i">Unloaded</a> += <a href="#52889bb8253b7f10" class="i method">OnControlUnloaded</a>;
        }
 
        <b>private void</b> <a id="922b81fe096a9c9f" href="R/922b81fe096a9c9f.html" target="n" data-glyph="76,1" class="i method">InitializeEditor</a>()
        {
            <a href="@0@PresentationFramework/A.html#5f9a593483943440" class="k">var</a> <span id="r9 rd" class="r9 r">dockPanel</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#10df7c51a0014bc9" class="t constructor">DockPanel</a>();
 
            <a href="Views/EditorBrowser.cs.html#75469e512445f30a" class="t t">EditorBrowser</a> <span id="r10 rd" class="r10 r">browser</span> = <b>new</b> <a href="Views/EditorBrowser.cs.html#f28e434108fae576" class="t constructor">EditorBrowser</a>();
            <a href="P/e069d9f0e7680679.html#e069d9f0e7680679" class="k">var</a> <span id="r11 rd" class="r11 r">toolbar</span> = <b>new</b> <a href="Views/EditorToolbar.xaml.cs.html#eae3af8d4d5f5df6" class="t constructor">EditorToolbar</a>();
 
            <a href="@0@PresentationFramework/A.html#5f9a593483943440" class="t t">DockPanel</a>.<a href="@0@PresentationFramework/A.html#1bd631a5c246a5dc" class="i method">SetDock</a>(<span class="r11 r">toolbar</span>, <a href="@0@PresentationFramework/A.html#247b2a9cc539228a" class="t t">Dock</a>.<a href="@0@PresentationFramework/A.html#60fa0559eeaa26e6" class="i field">Top</a>);
            <span class="r9 r">dockPanel</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#8886057feae649bc" class="i method">Add</a>(<span class="r11 r">toolbar</span>);
            <a href="@0@PresentationFramework/A.html#5f9a593483943440" class="t t">DockPanel</a>.<a href="@0@PresentationFramework/A.html#1bd631a5c246a5dc" class="i method">SetDock</a>(<span class="r10 r">browser</span>, <a href="@0@PresentationFramework/A.html#247b2a9cc539228a" class="t t">Dock</a>.<a href="@0@PresentationFramework/A.html#dcb1dc3fc048cdcf" class="i field">Bottom</a>);
            <span class="r9 r">dockPanel</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#8886057feae649bc" class="i method">Add</a>(<span class="r10 r">browser</span>);
 
            <span class="c">// dependency on html content</span>
            <span class="r10 r">browser</span>.<a href="Views/EditorBrowser.cs.html#9a10db2caabca3f0" class="i">HtmlContentChanged</a> += <a href="#470899e37ed11d04" class="i method">BrowserContentChanged</a>;
 
            <span class="c">// set DataContexts and properties</span>
            <span class="r9 r">dockPanel</span>.<a href="@0@PresentationFramework/A.html#e4aaca7514916173" class="i property">DataContext</a> = <a href="#430447938bcba693" class="k">this</a>;
            <span class="r11 r">toolbar</span>.<a href="@0@PresentationFramework/A.html#e4aaca7514916173" class="i property">DataContext</a> = <a href="#4aada0bae93d9cc1" class="i property">Toolbar</a> = <b>new</b> <a href="ViewModels/ToolbarViewModel.cs.html#0de601b45f215c9b" class="t constructor">ToolbarViewModel</a>(<span class="r10 r">browser</span>);
            <a href="#b9acaabe8e599a7f" class="i property">Browser</a> = <span class="r10 r">browser</span>;
 
            <span class="c">// render new content</span>
            <a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> = <span class="r9 r">dockPanel</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets toolbar view model.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="ViewModels/ToolbarViewModel.cs.html#9e968c4319c4503a" class="t t">ToolbarViewModel</a> <a id="4aada0bae93d9cc1" href="R/4aada0bae93d9cc1.html" target="n" data-glyph="102,1" class="i property">Toolbar</a>
        {
            <b>get</b>;
            <b>set</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets browser control.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="Interfaces/IBrowserControl.cs.html#c6664bab75da7ecf" class="t t">IBrowserControl</a> <a id="b9acaabe8e599a7f" href="R/b9acaabe8e599a7f.html" target="n" data-glyph="102,1" class="i property">Browser</a>
        {
            <b>get</b>;
            <b>set</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets whether this HtmlEditor has Focus inside.</span>
        <span class="c">///</span><span class="c"> Handles the situation even when the focus is inside the WebBrowser control (COM Object).</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public bool</b> <a id="7f44b273fe800e69" href="R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">HasFocusInside</a>
        {
            <b>get</b>
            {
                <b>if</b> (<a href="@0@PresentationCore/A.html#731d700ccd201ec4" class="i property">IsKeyboardFocusWithin</a>)
                    <b>return</b> <b>true</b>;
 
                <span class="c">// focus can also be inside the browser</span>
                <b>return</b> <a href="#3137b33419dd76ed" class="i property">InnerBrowserHasFocus</a>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets whether the inner WebBrowser COM object has focus.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> https://stackoverflow.com/questions/18256886/webbrowser-control-keyboard-and-focus-behavior</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>private bool</b> <a id="3137b33419dd76ed" href="R/3137b33419dd76ed.html" target="n" data-glyph="106,1" class="i property">InnerBrowserHasFocus</a> =&gt; ((<a href="@0@WindowsBase/A.html#ed3e75a2e2d7c3dd" class="t t">IKeyboardInputSink</a>)((<a href="Views/EditorBrowser.cs.html#75469e512445f30a" class="t t">EditorBrowser</a>)<a href="#b9acaabe8e599a7f" class="i property">Browser</a>).<a href="Views/EditorBrowser.cs.html#899043b72e7c04cd" class="i property">Browser</a>).<a href="@0@WindowsBase/A.html#6dd00151d77ea12a" class="i method">HasFocusWithin</a>();
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> HtmlContent dependency property
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets whether the HtmlContent dependency property change should not be called after setting new value.</span>
        <span class="c">///</span><span class="c"> When this is turned off, you will se the HtmlContent to internal browser and after the browser will load the HTML,</span>
        <span class="c">///</span><span class="c"> it will se the HtmlContent dependency property back to new (altered) html content, used to render the UI of WYSIWYG (even when the user does not make any change).</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public bool</b> <a id="b1c200c821b047b9" href="R/b1c200c821b047b9.html" target="n" data-glyph="102,1" class="i property">HtmlContentDisableInitialChange</a>
        {
            <b>get</b>;
            <b>set</b>;
        } = <b>true</b>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets html content of this editor.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="6f874f89c1efb40c" href="R/6f874f89c1efb40c.html" target="n" data-glyph="102,1" class="i property">HtmlContent</a>
        {
            <b>get</b> =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#4198b01870c1cd9c" class="i field">HtmlContentProperty</a>);
            <b>set</b> =&gt; <a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#4198b01870c1cd9c" class="i field">HtmlContentProperty</a>, <b>value</b>);
        }
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="4198b01870c1cd9c" href="R/4198b01870c1cd9c.html" target="n" data-glyph="42,1" class="i field">HtmlContentProperty</a> = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#3f509a22032d7071" class="i method">Register</a>(<b>nameof</b>(<a href="#6f874f89c1efb40c" class="i property">HtmlContent</a>), <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>), <b>typeof</b>(<a href="#430447938bcba693" class="t t">HtmlEditor</a>), <b>new</b> <a href="@0@PresentationFramework/A.html#f0b5ca672c6f55d2" class="t constructor">FrameworkPropertyMetadata</a>(<a href="#cd358bb19268602d" class="i method">HtmlContentPropertyChanged</a>){<a href="@0@PresentationFramework/A.html#277aaa0e891af962" class="i property">BindsTwoWayByDefault</a> = <b>true</b>});
 
        <b>private static void</b> <a id="cd358bb19268602d" href="R/cd358bb19268602d.html" target="n" data-glyph="76,1" class="i method">HtmlContentPropertyChanged</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r12 rd" class="r12 r">d</span>, <a href="@0@WindowsBase/A.html#71a1a16823f70b8c" class="t t">DependencyPropertyChangedEventArgs</a> <span id="r13 rd" class="r13 r">e</span>) {
            <a href="#430447938bcba693" class="k">var</a> <span id="r14 rd" class="r14 r">editor</span> = (<a href="#430447938bcba693" class="t t">HtmlEditor</a>)<span class="r12 r">d</span>;
 
            <span class="c">// if the content had changed, resetting tracking variables</span>
            <b>if</b> (<span class="r14 r">editor</span>.<a href="#b9acaabe8e599a7f" class="i property">Browser</a>.<a href="Interfaces/IBrowserControl.cs.html#0463e677d7607dda" class="i method">OpenDocument</a>((<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<span class="r13 r">e</span>.<a href="@0@WindowsBase/A.html#0acf297ea547e623" class="i property">NewValue</a>))
            {
                <span class="r14 r">editor</span>.<a href="#cc5a25f0829aa333" class="i field">_firstLoadedContent</a> = <b>null</b>;
                <span class="r14 r">editor</span>.<a href="#a2131f598ebd41a3" class="i field">_hasChangedAfterFirstLoad</a> = <b>false</b>;
 
                <span class="c">// in source edit mode, BrowserContentChanged method is called immediately in OpenDocument method</span>
                <span class="c">// so i need to call it again manually, to initiate tracking variables</span>
                <b>if</b> (<span class="r14 r">editor</span>.<a href="#b9acaabe8e599a7f" class="i property">Browser</a>.<a href="Interfaces/IBrowserControl.cs.html#4095531ded23f584" class="i property">IsInSourceEditMode</a>)
                {
                    <span class="r14 r">editor</span>.<a href="#470899e37ed11d04" class="i method">BrowserContentChanged</a>(<span class="r14 r">editor</span>, <b>null</b>);
                }
            }
        }
 
        <b>private void</b> <a id="470899e37ed11d04" href="R/470899e37ed11d04.html" target="n" data-glyph="76,1" class="i method">BrowserContentChanged</a>(<b>object</b> <span id="r15 rd" class="r15 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r16 rd" class="r16 r">e</span>)
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r17 rd" class="r17 r">content</span> = <a href="#b9acaabe8e599a7f" class="i property">Browser</a>.<a href="Interfaces/IBrowserControl.cs.html#1c2370f8ecf7c9b3" class="i method">GetCurrentHtml</a>();
 
            <b>if</b> (<a href="#b1c200c821b047b9" class="i property">HtmlContentDisableInitialChange</a>)
            {
                <span class="c">// after first load - saving the (maybe transformed) HTML editor</span>
                <b>if</b> (<a href="#cc5a25f0829aa333" class="i field">_firstLoadedContent</a> == <b>null</b>)
                {
                    <a href="#cc5a25f0829aa333" class="i field">_firstLoadedContent</a> = <span class="r17 r">content</span>;
                    <b>return</b>;
                }
                <span class="c">// checking if the content has not changed</span>
                <b>if</b> (!<a href="#a2131f598ebd41a3" class="i field">_hasChangedAfterFirstLoad</a> &amp;&amp; <span class="r17 r">content</span> == <a href="#cc5a25f0829aa333" class="i field">_firstLoadedContent</a>)
                {
                    <b>return</b>;
                }
                <a href="#a2131f598ebd41a3" class="i field">_hasChangedAfterFirstLoad</a> = <b>true</b>;
            }
 
            <a href="#6f874f89c1efb40c" class="i property">HtmlContent</a> = <span class="r17 r">content</span>;
        }
 
        <b>private bool</b> <a id="a2131f598ebd41a3" href="R/a2131f598ebd41a3.html" target="n" data-glyph="46,1" class="i field">_hasChangedAfterFirstLoad</a>;
        <b>private string</b> <a id="cc5a25f0829aa333" href="R/cc5a25f0829aa333.html" target="n" data-glyph="46,1" class="i field">_firstLoadedContent</a>;
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
    }
}
</pre></td></tr></table></div></body></html>
