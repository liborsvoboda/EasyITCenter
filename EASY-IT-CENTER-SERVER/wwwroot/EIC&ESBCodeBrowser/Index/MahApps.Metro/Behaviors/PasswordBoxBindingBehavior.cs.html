<!DOCTYPE html>
<html><head><title>PasswordBoxBindingBehavior.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(223);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#MahApps.Metro/Behaviors/PasswordBoxBindingBehavior.cs" target="_top">Behaviors\PasswordBoxBindingBehavior.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#MahApps.Metro" target="_top">HelpProjects\WPF-MAIN\MahApps.Metro\src\MahApps.Metro\MahApps.Metro.csproj</a> (MahApps.Metro)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Licensed to the .NET Foundation under one or more agreements.</span>
<span class="c">// The .NET Foundation licenses this file to you under the MIT license.</span>
<span class="c">// See the LICENSE file in the project root for more information.</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Documents</span>;
<b>using</b> <span class="i n">MahApps</span>.<span class="i n">Metro</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">MahApps</span>.<span class="i n">Metro</span>.<span class="i n">ValueBoxes</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Xaml</span>.<span class="i n">Behaviors</span>;

<b>namespace</b> <span class="i n">MahApps</span>.<span class="i n">Metro</span>.<span class="i n">Behaviors</span>
{
    <b>public class</b> <a id="450fd54add866c65" href="../R/450fd54add866c65.html" target="n" data-glyph="0,0" class="t t"><span id="12f8956fa3a8ad13">PasswordBoxBindingBehavior</span></a> : <span class="t t">Behavior</span>&lt;<a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a>&gt;
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets the Password property on the PasswordBox control. This is a dependency property.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="13448ddda0df2d82" href="../R/13448ddda0df2d82.html" target="n" data-glyph="42,1" class="i field">PasswordProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#d492f342ec933480" class="i method">RegisterAttached</a>(
                <span class="s">&quot;Password&quot;</span>,
                <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>),
                <b>typeof</b>(<a href="#450fd54add866c65" class="t t">PasswordBoxBindingBehavior</a>),
                <b>new</b> <a href="@0@PresentationFramework/A.html#cfed8906a2f8b7f6" class="t constructor">FrameworkPropertyMetadata</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>, <a href="@0@PresentationFramework/A.html#3f1b30454997d7be" class="t t">FrameworkPropertyMetadataOptions</a>.<a href="@0@PresentationFramework/A.html#e51fa78b6081296d" class="i field">BindsTwoWayByDefault</a>, <a href="#fef6327ed522a6fb" class="i method">OnPasswordPropertyChanged</a>));

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Helper for getting </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#13448ddda0df2d82" class="i field">PasswordProperty</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> from </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">dpo</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">dpo</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to read </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#13448ddda0df2d82" class="i field">PasswordProperty</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> from.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Password property value.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        [<a href="@0@System/A.html#3db3d3ff1819ebd5" class="t constructor">Category</a>(<a href="../Constants.cs.html#fa5919ea0b325cd3" class="t t">AppName</a>.<a href="../Constants.cs.html#164f78b73653fd9b" class="i field">MahApps</a>)]
        [<a href="@0@WindowsBase/A.html#2fdfc16910f7c93f" class="t constructor">AttachedPropertyBrowsableForType</a>(<b>typeof</b>(<a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a>))]
        <b>public static string</b> <a id="8d0294e110f975f7" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPassword</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r0 rd" class="r0 r">dpo</span>)
        {
            <b>return</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<span class="r0 r">dpo</span>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#13448ddda0df2d82" class="i field">PasswordProperty</a>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Helper for setting </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#13448ddda0df2d82" class="i field">PasswordProperty</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> on </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">dpo</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">dpo</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to set </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#13448ddda0df2d82" class="i field">PasswordProperty</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> on.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">value</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Password property value.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        [<a href="@0@System/A.html#3db3d3ff1819ebd5" class="t constructor">Category</a>(<a href="../Constants.cs.html#fa5919ea0b325cd3" class="t t">AppName</a>.<a href="../Constants.cs.html#164f78b73653fd9b" class="i field">MahApps</a>)]
        [<a href="@0@WindowsBase/A.html#2fdfc16910f7c93f" class="t constructor">AttachedPropertyBrowsableForType</a>(<b>typeof</b>(<a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a>))]
        <b>public static void</b> <a id="5a45e961ddc8ee39" href="../R/5a45e961ddc8ee39.html" target="n" data-glyph="72,1" class="i method">SetPassword</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r1 rd" class="r1 r">dpo</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">value</span>)
        {
            <span class="r1 r">dpo</span>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#13448ddda0df2d82" class="i field">PasswordProperty</a>, <span class="r2 r">value</span>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Handles changes to the &#39;Password&#39; attached property.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static void</b> <a id="fef6327ed522a6fb" href="../R/fef6327ed522a6fb.html" target="n" data-glyph="76,1" class="i method">OnPasswordPropertyChanged</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r3 rd" class="r3 r">sender</span>, <a href="@0@WindowsBase/A.html#71a1a16823f70b8c" class="t t">DependencyPropertyChangedEventArgs</a> <span id="r4 rd" class="r4 r">e</span>)
        {
            <b>if</b> (<span class="r3 r">sender</span> <b>is</b> <a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a> <span id="r5 rd" class="r5 r">targetPasswordBox</span>)
            {
                <span class="r5 r">targetPasswordBox</span>.<a href="@0@PresentationFramework/A.html#8acdf645fca8464f" class="i">PasswordChanged</a> -= <a href="#66ddb668c8a696f9" class="i method">PasswordBoxPasswordChanged</a>;
                <b>if</b> (!<a href="#c4e3553670f2b597" class="i method">GetIsChanging</a>(<span class="r5 r">targetPasswordBox</span>))
                {
                    <span class="r5 r">targetPasswordBox</span>.<a href="@0@PresentationFramework/A.html#b61d59d675a2381e" class="i property">Password</a> = (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<span class="r4 r">e</span>.<a href="@0@WindowsBase/A.html#0acf297ea547e623" class="i property">NewValue</a>;
                }

                <span class="r5 r">targetPasswordBox</span>.<a href="@0@PresentationFramework/A.html#8acdf645fca8464f" class="i">PasswordChanged</a> += <a href="#66ddb668c8a696f9" class="i method">PasswordBoxPasswordChanged</a>;
            }
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Handle the &#39;PasswordChanged&#39;-event on the PasswordBox</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static void</b> <a id="66ddb668c8a696f9" href="../R/66ddb668c8a696f9.html" target="n" data-glyph="76,1" class="i method">PasswordBoxPasswordChanged</a>(<b>object</b> <span id="r6 rd" class="r6 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r7 rd" class="r7 r">e</span>)
        {
            <b>if</b> (<span class="r6 r">sender</span> <b>is</b> <a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a> <span id="r8 rd" class="r8 r">passwordBox</span>)
            {
                <a href="#9e93f4668289c8d1" class="i method">SetIsChanging</a>(<span class="r8 r">passwordBox</span>, <b>true</b>);
                <a href="#5a45e961ddc8ee39" class="i method">SetPassword</a>(<span class="r8 r">passwordBox</span>, <span class="r8 r">passwordBox</span>.<a href="@0@PresentationFramework/A.html#b61d59d675a2381e" class="i property">Password</a>);
                <a href="#9e93f4668289c8d1" class="i method">SetIsChanging</a>(<span class="r8 r">passwordBox</span>, <b>false</b>);
            }
        }

        <b>private static void</b> <a id="768bf9ff2809d2cf" href="../R/768bf9ff2809d2cf.html" target="n" data-glyph="76,1" class="i method">SetRevealedPasswordCaretIndex</a>(<a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a> <span id="r9 rd" class="r9 r">passwordBox</span>)
        {
            <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="k">var</a> <span id="r10 rd" class="r10 r">textBox</span> = <a href="#1163a2c6ad06760c" class="i method">GetRevealedPasswordTextBox</a>(<span class="r9 r">passwordBox</span>);
            <b>if</b> (<span class="r10 r">textBox</span> != <b>null</b>)
            {
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r11 rd" class="r11 r">caretPos</span> = <a href="#b5166b459c0981ec" class="i method">GetPasswordBoxCaretPosition</a>(<span class="r9 r">passwordBox</span>);
                <span class="r10 r">textBox</span>.<a href="@0@PresentationFramework/A.html#fbedd0e8147dd24f" class="i property">CaretIndex</a> = <span class="r11 r">caretPos</span>;
            }
        }

        <b>private static int</b> <a id="b5166b459c0981ec" href="../R/b5166b459c0981ec.html" target="n" data-glyph="76,1" class="i method">GetPasswordBoxCaretPosition</a>(<a href="@0@PresentationFramework/A.html#edb4a1ef1b1bd609" class="t t">PasswordBox</a> <span id="r12 rd" class="r12 r">passwordBox</span>)
        {
            <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="k">var</a> <span id="r13 rd" class="r13 r">selection</span> = <a href="#838ba24bd311cf86" class="i method">GetSelection</a>(<span class="r12 r">passwordBox</span>);
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="k">var</a> <span id="r14 rd" class="r14 r">tTextRange</span> = <span class="r13 r">selection</span>?.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@0@mscorlib/A.html#567d8541d0461cf7" class="i method">GetInterfaces</a>().<a href="@0@System.Core/A.html#b7e5965cab68b1cf" class="i method">FirstOrDefault</a>(<span id="r15 rd" class="r15 r">i</span> =&gt; <span class="r15 r">i</span>.<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a> == <span class="s">&quot;ITextRange&quot;</span>);
            <a href="@0@mscorlib/A.html#d9262ceecc1719ab" class="k">var</a> <span id="r16 rd" class="r16 r">oStart</span> = <span class="r14 r">tTextRange</span>?.<a href="@0@mscorlib/A.html#fabf683030a6ad8d" class="i method">GetProperty</a>(<span class="s">&quot;Start&quot;</span>)?.<a href="@0@mscorlib/A.html#3f21ec92a4dd8d30" class="i method">GetGetMethod</a>()?.<a href="@0@mscorlib/A.html#c8277ed81262a367" class="i method">Invoke</a>(<span class="r13 r">selection</span>, <b>null</b>);
            <a href="@0@mscorlib/A.html#ffebe438fd9cbf0e" class="k">var</a> <span id="r17 rd" class="r17 r">value</span> = <span class="r16 r">oStart</span>?.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@0@mscorlib/A.html#90cb501901e16fa4" class="i method">GetProperty</a>(<span class="s">&quot;Offset&quot;</span>, <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#5144189c11f6b668" class="i field">NonPublic</a> | <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#54a14f747b06c614" class="i field">Instance</a>)?.<a href="@0@mscorlib/A.html#0308429a99d58f37" class="i method">GetValue</a>(<span class="r16 r">oStart</span>, <b>null</b>) <b>as int</b>?;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r18 rd" class="r18 r">caretPosition</span> = <span class="r17 r">value</span>.<a href="@0@mscorlib/A.html#8c499091e3b47bc7" class="i method">GetValueOrDefault</a>(0);
            <b>return</b> <span class="r18 r">caretPosition</span>;
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called after the behavior is attached to an AssociatedObject.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Override this to hook up functionality to the AssociatedObject.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>protected override void</b> <a id="f594c842e5375eae" href="../R/f594c842e5375eae.html" target="n" data-glyph="75,1" class="i method">OnAttached</a>()
        {
            <b>base</b>.<span class="i method">OnAttached</span>();

            <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@PresentationFramework/A.html#8acdf645fca8464f" class="i">PasswordChanged</a> += <a href="#66ddb668c8a696f9" class="i method">PasswordBoxPasswordChanged</a>;
            <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> += <a href="#450fd54add866c65" class="k">this</a>.<a href="#000f176565300b52" class="i method">PasswordBoxLoaded</a>;
            <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="k">var</a> <span id="r19 rd" class="r19 r">selection</span> = <a href="#838ba24bd311cf86" class="i method">GetSelection</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>);
            <b>if</b> (<span class="r19 r">selection</span> != <b>null</b>)
            {
                <span class="r19 r">selection</span>.<a href="@0@PresentationFramework/A.html#e9e959ebf990d7f3" class="i">Changed</a> += <a href="#450fd54add866c65" class="k">this</a>.<a href="#077ca19e10e88f17" class="i method">PasswordBoxSelectionChanged</a>;
            }
        }

        <b>private void</b> <a id="000f176565300b52" href="../R/000f176565300b52.html" target="n" data-glyph="76,1" class="i method">PasswordBoxLoaded</a>(<b>object</b> <span id="r20 rd" class="r20 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r21 rd" class="r21 r">e</span>)
        {
            <a href="#5a45e961ddc8ee39" class="i method">SetPassword</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>, <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@PresentationFramework/A.html#b61d59d675a2381e" class="i property">Password</a>);

            <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="k">var</a> <span id="r22 rd" class="r22 r">textBox</span> = <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="../Controls/TreeHelper.cs.html#fd4ef3489442d829" class="i method">FindChild</a>&lt;<a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>&gt;(<span class="s">&quot;RevealedPassword&quot;</span>);
            <b>if</b> (<span class="r22 r">textBox</span> != <b>null</b>)
            {
                <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="k">var</a> <span id="r23 rd" class="r23 r">selection</span> = <a href="#838ba24bd311cf86" class="i method">GetSelection</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>);
                <b>if</b> (<span class="r23 r">selection</span> <b>is null</b>)
                {
                    <a href="@0@mscorlib/A.html#f3f0ea5f89a8f162" class="k">var</a> <span id="r24 rd" class="r24 r">infos</span> = <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@0@mscorlib/A.html#90cb501901e16fa4" class="i method">GetProperty</a>(<span class="s">&quot;Selection&quot;</span>, <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#5144189c11f6b668" class="i field">NonPublic</a> | <a href="@0@mscorlib/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@0@mscorlib/A.html#54a14f747b06c614" class="i field">Instance</a>);
                    <span class="r23 r">selection</span> = <span class="r24 r">infos</span>?.<a href="@0@mscorlib/A.html#0308429a99d58f37" class="i method">GetValue</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>, <b>null</b>) <b>as</b> <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>;
                    <a href="#bcd606ac71ebe035" class="i method">SetSelection</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>, <span class="r23 r">selection</span>);
                    <b>if</b> (<span class="r23 r">selection</span> != <b>null</b>)
                    {
                        <a href="#5b9bbeabe1de7049" class="i method">SetRevealedPasswordTextBox</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>, <span class="r22 r">textBox</span>);
                        <a href="#768bf9ff2809d2cf" class="i method">SetRevealedPasswordCaretIndex</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>);

                        <span class="r23 r">selection</span>.<a href="@0@PresentationFramework/A.html#e9e959ebf990d7f3" class="i">Changed</a> += <a href="#450fd54add866c65" class="k">this</a>.<a href="#077ca19e10e88f17" class="i method">PasswordBoxSelectionChanged</a>;
                    }
                }
            }
        }

        <b>private void</b> <a id="077ca19e10e88f17" href="../R/077ca19e10e88f17.html" target="n" data-glyph="76,1" class="i method">PasswordBoxSelectionChanged</a>(<b>object</b>? <span id="r25 rd" class="r25 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r26 rd" class="r26 r">e</span>)
        {
            <a href="#768bf9ff2809d2cf" class="i method">SetRevealedPasswordCaretIndex</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the behavior is being detached from its AssociatedObject, but before it has actually occurred.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Override this to unhook functionality from the AssociatedObject.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>protected override void</b> <a id="f5f91de92f8ae371" href="../R/f5f91de92f8ae371.html" target="n" data-glyph="75,1" class="i method">OnDetaching</a>()
        {
            <span class="c">// it seems, it was already detached, or never attached</span>
            <b>if</b> (<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span> != <b>null</b>)
            {
                <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="k">var</a> <span id="r27 rd" class="r27 r">selection</span> = <a href="#838ba24bd311cf86" class="i method">GetSelection</a>(<a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>);
                <b>if</b> (<span class="r27 r">selection</span> != <b>null</b>)
                {
                    <span class="r27 r">selection</span>.<a href="@0@PresentationFramework/A.html#e9e959ebf990d7f3" class="i">Changed</a> -= <a href="#450fd54add866c65" class="k">this</a>.<a href="#077ca19e10e88f17" class="i method">PasswordBoxSelectionChanged</a>;
                }

                <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@PresentationFramework/A.html#a815b4f12f279dee" class="i">Loaded</a> -= <a href="#450fd54add866c65" class="k">this</a>.<a href="#000f176565300b52" class="i method">PasswordBoxLoaded</a>;
                <a href="#450fd54add866c65" class="k">this</a>.<span class="i property">AssociatedObject</span>.<a href="@0@PresentationFramework/A.html#8acdf645fca8464f" class="i">PasswordChanged</a> -= <a href="#66ddb668c8a696f9" class="i method">PasswordBoxPasswordChanged</a>;
            }

            <b>base</b>.<span class="i method">OnDetaching</span>();
        }

        <b>private static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="cd535d380793e47e" href="../R/cd535d380793e47e.html" target="n" data-glyph="46,1" class="i field">IsChangingProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#d492f342ec933480" class="i method">RegisterAttached</a>(
                <span class="s">&quot;IsChanging&quot;</span>,
                <b>typeof</b>(<b>bool</b>),
                <b>typeof</b>(<a href="#450fd54add866c65" class="t t">PasswordBoxBindingBehavior</a>),
                <b>new</b> <a href="@0@PresentationCore/A.html#a5d9694b66892d96" class="t constructor">UIPropertyMetadata</a>(<a href="../ValueBoxes/BooleanBoxes.cs.html#1ea22ba96a3431b4" class="t t">BooleanBoxes</a>.<a href="../ValueBoxes/BooleanBoxes.cs.html#c31dc20d3767829d" class="i field">FalseBox</a>));

        <b>private static bool</b> <a id="c4e3553670f2b597" href="../R/c4e3553670f2b597.html" target="n" data-glyph="76,1" class="i method">GetIsChanging</a>(<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a> <span id="r28 rd" class="r28 r">element</span>)
        {
            <b>return</b> (<b>bool</b>)<span class="r28 r">element</span>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#cd535d380793e47e" class="i field">IsChangingProperty</a>);
        }

        <b>private static void</b> <a id="9e93f4668289c8d1" href="../R/9e93f4668289c8d1.html" target="n" data-glyph="76,1" class="i method">SetIsChanging</a>(<a href="@0@PresentationCore/A.html#7911653ccb506216" class="t t">UIElement</a> <span id="r29 rd" class="r29 r">element</span>, <b>bool</b> <span id="r30 rd" class="r30 r">value</span>)
        {
            <span class="r29 r">element</span>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#cd535d380793e47e" class="i field">IsChangingProperty</a>, <a href="../ValueBoxes/BooleanBoxes.cs.html#1ea22ba96a3431b4" class="t t">BooleanBoxes</a>.<a href="../ValueBoxes/BooleanBoxes.cs.html#679d28140d9330f2" class="i method">Box</a>(<span class="r30 r">value</span>));
        }

        <b>private static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="1fd3959d226bfb26" href="../R/1fd3959d226bfb26.html" target="n" data-glyph="46,1" class="i field">SelectionProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#d492f342ec933480" class="i method">RegisterAttached</a>(
                <span class="s">&quot;Selection&quot;</span>,
                <b>typeof</b>(<a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>),
                <b>typeof</b>(<a href="#450fd54add866c65" class="t t">PasswordBoxBindingBehavior</a>),
                <b>new</b> <a href="@0@PresentationCore/A.html#a5d9694b66892d96" class="t constructor">UIPropertyMetadata</a>(<b>default</b>(<a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>)));

        <b>private static</b> <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>? <a id="838ba24bd311cf86" href="../R/838ba24bd311cf86.html" target="n" data-glyph="76,1" class="i method">GetSelection</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r31 rd" class="r31 r">obj</span>)
        {
            <b>return</b> (<a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>?)<span class="r31 r">obj</span>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#1fd3959d226bfb26" class="i field">SelectionProperty</a>);
        }

        <b>private static void</b> <a id="bcd606ac71ebe035" href="../R/bcd606ac71ebe035.html" target="n" data-glyph="76,1" class="i method">SetSelection</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r32 rd" class="r32 r">obj</span>, <a href="@0@PresentationFramework/A.html#6a9926f1a3835042" class="t t">TextSelection</a>? <span id="r33 rd" class="r33 r">value</span>)
        {
            <span class="r32 r">obj</span>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#1fd3959d226bfb26" class="i field">SelectionProperty</a>, <span class="r33 r">value</span>);
        }

        <b>private static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="1d1800da8a228c72" href="../R/1d1800da8a228c72.html" target="n" data-glyph="46,1" class="i field">RevealedPasswordTextBoxProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#d492f342ec933480" class="i method">RegisterAttached</a>(
                <span class="s">&quot;RevealedPasswordTextBox&quot;</span>,
                <b>typeof</b>(<a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>),
                <b>typeof</b>(<a href="#450fd54add866c65" class="t t">PasswordBoxBindingBehavior</a>),
                <b>new</b> <a href="@0@PresentationCore/A.html#a5d9694b66892d96" class="t constructor">UIPropertyMetadata</a>(<b>default</b>(<a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>)));

        <b>private static</b> <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>? <a id="1163a2c6ad06760c" href="../R/1163a2c6ad06760c.html" target="n" data-glyph="76,1" class="i method">GetRevealedPasswordTextBox</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r34 rd" class="r34 r">obj</span>)
        {
            <b>return</b> (<a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>?)<span class="r34 r">obj</span>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#1d1800da8a228c72" class="i field">RevealedPasswordTextBoxProperty</a>);
        }

        <b>private static void</b> <a id="5b9bbeabe1de7049" href="../R/5b9bbeabe1de7049.html" target="n" data-glyph="76,1" class="i method">SetRevealedPasswordTextBox</a>(<a href="@0@WindowsBase/A.html#3ce192f6633decc8" class="t t">DependencyObject</a> <span id="r35 rd" class="r35 r">obj</span>, <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>? <span id="r36 rd" class="r36 r">value</span>)
        {
            <span class="r35 r">obj</span>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#1d1800da8a228c72" class="i field">RevealedPasswordTextBoxProperty</a>, <span class="r36 r">value</span>);
        }
    }
}</pre></td></tr></table></div></body></html>
