<!DOCTYPE html>
<html><head><title>InputDialog.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(222);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#MahApps.Metro/Controls/Dialogs/InputDialog.cs" target="_top">Controls\Dialogs\InputDialog.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#MahApps.Metro" target="_top">HelpProjects\WPF-MAIN\MahApps.Metro\src\MahApps.Metro\MahApps.Metro.csproj</a> (MahApps.Metro)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Licensed to the .NET Foundation under one or more agreements.</span>
<span class="c">// The .NET Foundation licenses this file to you under the MIT license.</span>
<span class="c">// See the LICENSE file in the project root for more information.</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>;

<b>namespace</b> <span class="i n">MahApps</span>.<span class="i n">Metro</span>.<span class="i n">Controls</span>.<span class="i n">Dialogs</span>
{
    [<a href="@0@PresentationFramework/A.html#96557b5c070ecfa3" class="t constructor">TemplatePart</a>(<a href="@0@PresentationFramework/A.html#f9842165d0f4cd9c" class="i property">Name</a> = <b>nameof</b>(<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>), <a href="@0@PresentationFramework/A.html#cc0b0b68afac8782" class="i property">Type</a> = <b>typeof</b>(<a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>))]
    [<a href="@0@PresentationFramework/A.html#96557b5c070ecfa3" class="t constructor">TemplatePart</a>(<a href="@0@PresentationFramework/A.html#f9842165d0f4cd9c" class="i property">Name</a> = <b>nameof</b>(<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>), <a href="@0@PresentationFramework/A.html#cc0b0b68afac8782" class="i property">Type</a> = <b>typeof</b>(<a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>))]
    [<a href="@0@PresentationFramework/A.html#96557b5c070ecfa3" class="t constructor">TemplatePart</a>(<a href="@0@PresentationFramework/A.html#f9842165d0f4cd9c" class="i property">Name</a> = <b>nameof</b>(<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a>), <a href="@0@PresentationFramework/A.html#cc0b0b68afac8782" class="i property">Type</a> = <b>typeof</b>(<a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>))]
    <b>public class</b> <a id="56efd989e280c631" href="../../R/56efd989e280c631.html" target="n" data-glyph="0,0" class="t t">InputDialog</a> : <a href="BaseMetroDialog.cs.html#9e4d9d36e4974ced" class="t t">BaseMetroDialog</a>
    {
        <b>private readonly</b> <a href="@0@mscorlib/A.html#94bf04047d6bd325" class="t t">TaskCompletionSource</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>?&gt; <a id="8035ba52564bb4ed" href="../../R/8035ba52564bb4ed.html" target="n" data-glyph="46,1" class="i field">tcs</a> = <a href="@0@mscorlib/A.html#4aca22f9388e0ac8" class="k">new</a>();
        <b>private</b> <a href="@0@mscorlib/A.html#2d80bf84f593cc0c" class="t t">CancellationTokenRegistration</a>? <a id="775e00f35a467625" href="../../R/775e00f35a467625.html" target="n" data-glyph="46,1" class="i field">cancellationTokenRegistration</a>;

        <span class="k preprocess">#</span><span class="k preprocess">region</span> Controls

        <span class="c">// ReSharper disable InconsistentNaming</span>
        <b>private</b> <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>? <a id="0fca13c91d758b1c" href="../../R/0fca13c91d758b1c.html" target="n" data-glyph="46,1" class="i field">PART_AffirmativeButton</a>;
        <b>private</b> <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>? <a id="cc15dfef7076134f" href="../../R/cc15dfef7076134f.html" target="n" data-glyph="46,1" class="i field">PART_NegativeButton</a>;
        <b>private</b> <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>? <a id="ff034fd842acab9c" href="../../R/ff034fd842acab9c.html" target="n" data-glyph="46,1" class="i field">PART_TextBox</a>;
        <span class="c">// ReSharper restore InconsistentNaming</span>

        <b>public override void</b> <a id="dd6c583ab0214583" href="../../R/dd6c583ab0214583.html" target="n" data-glyph="72,1" class="i method">OnApplyTemplate</a>()
        {
            <a href="BaseMetroDialog.cs.html#9e4d9d36e4974ced" class="k">base</a>.<a href="@0@PresentationFramework/A.html#0c1b13beb625a4a2" class="i method">OnApplyTemplate</a>();

            <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a> = <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationFramework/A.html#22f3c30930053b81" class="i method">GetTemplateChild</a>(<b>nameof</b>(<a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>)) <b>as</b> <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>;
            <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a> = <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationFramework/A.html#22f3c30930053b81" class="i method">GetTemplateChild</a>(<b>nameof</b>(<a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>)) <b>as</b> <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="t t">Button</a>;
            <a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a> = <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationFramework/A.html#22f3c30930053b81" class="i method">GetTemplateChild</a>(<b>nameof</b>(<a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a>)) <b>as</b> <a href="@0@PresentationFramework/A.html#77a66fa4f401a49f" class="t t">TextBox</a>;
        }

        <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Controls

        <span class="k preprocess">#</span><span class="k preprocess">region</span> DependencyProperties

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Identifies the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#fa38b6dcff01bdda" class="i property">Message</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> dependency property.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="71d47b8b94ae70ae" href="../../R/71d47b8b94ae70ae.html" target="n" data-glyph="42,1" class="i field">MessageProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#3f509a22032d7071" class="i method">Register</a>(<b>nameof</b>(<a href="#fa38b6dcff01bdda" class="i property">Message</a>),
                                          <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>),
                                          <b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>),
                                          <b>new</b> <a href="@0@WindowsBase/A.html#2a1a3328df22f3a0" class="t constructor">PropertyMetadata</a>(<b>default</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)));

        <b>public string</b>? <a id="fa38b6dcff01bdda" href="../../R/fa38b6dcff01bdda.html" target="n" data-glyph="102,1" class="i property">Message</a>
        {
            <b>get</b> =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>?)<a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#71d47b8b94ae70ae" class="i field">MessageProperty</a>);
            <b>set</b> =&gt; <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#71d47b8b94ae70ae" class="i field">MessageProperty</a>, <b>value</b>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Identifies the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#2d63e43012dd2288" class="i property">Input</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> dependency property.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="2b47e679d9d32844" href="../../R/2b47e679d9d32844.html" target="n" data-glyph="42,1" class="i field">InputProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#3f509a22032d7071" class="i method">Register</a>(<b>nameof</b>(<a href="#2d63e43012dd2288" class="i property">Input</a>),
                                          <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>),
                                          <b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>),
                                          <b>new</b> <a href="@0@PresentationFramework/A.html#a9606c0b7a3a3875" class="t constructor">FrameworkPropertyMetadata</a>(<b>default</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>), <a href="@0@PresentationFramework/A.html#3f1b30454997d7be" class="t t">FrameworkPropertyMetadataOptions</a>.<a href="@0@PresentationFramework/A.html#e51fa78b6081296d" class="i field">BindsTwoWayByDefault</a>));

        <b>public string</b>? <a id="2d63e43012dd2288" href="../../R/2d63e43012dd2288.html" target="n" data-glyph="102,1" class="i property">Input</a>
        {
            <b>get</b> =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>?)<a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#2b47e679d9d32844" class="i field">InputProperty</a>);
            <b>set</b> =&gt; <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#2b47e679d9d32844" class="i field">InputProperty</a>, <b>value</b>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Identifies the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#d720d35cb1fefb71" class="i property">AffirmativeButtonText</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> dependency property.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="f182ab661a668666" href="../../R/f182ab661a668666.html" target="n" data-glyph="42,1" class="i field">AffirmativeButtonTextProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#3f509a22032d7071" class="i method">Register</a>(<b>nameof</b>(<a href="#d720d35cb1fefb71" class="i property">AffirmativeButtonText</a>),
                                          <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>),
                                          <b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>),
                                          <b>new</b> <a href="@0@WindowsBase/A.html#2a1a3328df22f3a0" class="t constructor">PropertyMetadata</a>(<span class="s">&quot;OK&quot;</span>));

        <b>public string</b> <a id="d720d35cb1fefb71" href="../../R/d720d35cb1fefb71.html" target="n" data-glyph="102,1" class="i property">AffirmativeButtonText</a>
        {
            <b>get</b> =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#f182ab661a668666" class="i field">AffirmativeButtonTextProperty</a>);
            <b>set</b> =&gt; <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#f182ab661a668666" class="i field">AffirmativeButtonTextProperty</a>, <b>value</b>);
        }

        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Identifies the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#a21dd682de52e432" class="i property">NegativeButtonText</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> dependency property.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static readonly</b> <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a> <a id="82c50353ca2a3c84" href="../../R/82c50353ca2a3c84.html" target="n" data-glyph="42,1" class="i field">NegativeButtonTextProperty</a>
            = <a href="@0@WindowsBase/A.html#4a20845df0b86ddd" class="t t">DependencyProperty</a>.<a href="@0@WindowsBase/A.html#3f509a22032d7071" class="i method">Register</a>(<b>nameof</b>(<a href="#a21dd682de52e432" class="i property">NegativeButtonText</a>),
                                          <b>typeof</b>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>),
                                          <b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>),
                                          <b>new</b> <a href="@0@WindowsBase/A.html#2a1a3328df22f3a0" class="t constructor">PropertyMetadata</a>(<span class="s">&quot;Cancel&quot;</span>));

        <b>public string</b> <a id="a21dd682de52e432" href="../../R/a21dd682de52e432.html" target="n" data-glyph="102,1" class="i property">NegativeButtonText</a>
        {
            <b>get</b> =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#0e1012f338283c7a" class="i method">GetValue</a>(<a href="#82c50353ca2a3c84" class="i field">NegativeButtonTextProperty</a>);
            <b>set</b> =&gt; <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#b1809fe135a72ec5" class="i method">SetValue</a>(<a href="#82c50353ca2a3c84" class="i field">NegativeButtonTextProperty</a>, <b>value</b>);
        }

        <span class="k preprocess">#</span><span class="k preprocess">endregion</span> DependencyProperties

        <span class="k preprocess">#</span><span class="k preprocess">region</span> Constructor

        <b>internal</b> <a id="30eb77376f42a130" href="../../R/../../0000000000.html" target="n" data-glyph="74,1" class="t constructor">InputDialog</a>()
            : <a href="#9a7d1d6397b34ae1" class="k">this</a>(<b>null</b>)
        {
        }

        <b>internal</b> <a id="9a7d1d6397b34ae1" href="../../R/9a7d1d6397b34ae1.html" target="n" data-glyph="74,1" class="t constructor">InputDialog</a>(<a href="../MetroWindow.cs.html#5a37f9897ea7f8e0" class="t t">MetroWindow</a>? <span id="r0 rd" class="r0 r">parentWindow</span>)
            : <a href="#6f04da6f6e01dc4a" class="k">this</a>(<span class="r0 r">parentWindow</span>, <b>null</b>)
        {
        }

        <b>internal</b> <a id="6f04da6f6e01dc4a" href="../../R/6f04da6f6e01dc4a.html" target="n" data-glyph="74,1" class="t constructor">InputDialog</a>(<a href="../MetroWindow.cs.html#5a37f9897ea7f8e0" class="t t">MetroWindow</a>? <span id="r1 rd" class="r1 r">parentWindow</span>, <a href="MetroDialogSettings.cs.html#28729669bd8ecc77" class="t t">MetroDialogSettings</a>? <span id="r2 rd" class="r2 r">settings</span>)
            : <a href="BaseMetroDialog.cs.html#0eddd16cc6fe9b29" class="k">base</a>(<span class="r1 r">parentWindow</span>, <span class="r2 r">settings</span>)
        {
            <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#abf250e9e5452be5" class="i method">SetCurrentValue</a>(<a href="#f182ab661a668666" class="i field">AffirmativeButtonTextProperty</a>, <a href="#56efd989e280c631" class="k">this</a>.<a href="BaseMetroDialog.cs.html#bf134373b9c776a6" class="i property">DialogSettings</a>.<a href="MetroDialogSettings.cs.html#b4939d811931c91e" class="i property">AffirmativeButtonText</a>);
            <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#abf250e9e5452be5" class="i method">SetCurrentValue</a>(<a href="#82c50353ca2a3c84" class="i field">NegativeButtonTextProperty</a>, <a href="#56efd989e280c631" class="k">this</a>.<a href="BaseMetroDialog.cs.html#bf134373b9c776a6" class="i property">DialogSettings</a>.<a href="MetroDialogSettings.cs.html#fd38781fbc020095" class="i property">NegativeButtonText</a>);
        }

        <b>static</b> <a id="f33e471bf5ff25dc" href="../../R/../../0000000000.html" target="n" data-glyph="76,1" class="t method">InputDialog</a>()
        {
            <a href="@0@PresentationFramework/A.html#6339cc8ec3e1311a" class="i field">DefaultStyleKeyProperty</a>.<a href="@0@WindowsBase/A.html#fe43392fad81405d" class="i method">OverrideMetadata</a>(<b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>), <b>new</b> <a href="@0@PresentationFramework/A.html#69f23b8966049b7c" class="t constructor">FrameworkPropertyMetadata</a>(<b>typeof</b>(<a href="#56efd989e280c631" class="t t">InputDialog</a>)));
        }

        <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Constructor

        <b>internal async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>?&gt; <a id="6f2326e344c82d3d" href="../../R/6f2326e344c82d3d.html" target="n" data-glyph="74,1" class="i method">WaitForButtonPressAsync</a>()
        {
            <b>await</b> <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@WindowsBase/A.html#bd03df1631104fbc" class="i property">Dispatcher</a>.<a href="@0@WindowsBase/A.html#968dc7ef71211110" class="i method">BeginInvoke</a>(<b>new</b> <span class="t">Action</span>(() =&gt;
                {
                    <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationCore/A.html#0e11f7ae56f1c30f" class="i method">Focus</a>();
                    <a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a>?.<a href="@0@PresentationCore/A.html#0e11f7ae56f1c30f" class="i method">Focus</a>();
                }));

            <a href="#56efd989e280c631" class="k">this</a>.<a href="#0e462429e1fac3ba" class="i method">SetUpHandlers</a>();

            <b>return</b> <b>await</b> <a href="#56efd989e280c631" class="k">this</a>.<a href="#8035ba52564bb4ed" class="i field">tcs</a>.<a href="@0@mscorlib/A.html#14fe3876fba4607a" class="i property">Task</a>.<a href="@0@mscorlib/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>);
        }

        <b>private void</b> <a id="792bd522139edec3" href="../../R/792bd522139edec3.html" target="n" data-glyph="76,1" class="i method">OnKeyDownHandler</a>(<b>object</b> <span id="r3 rd" class="r3 r">sender</span>, <a href="@0@PresentationCore/A.html#0d2ce926f5cfc74b" class="t t">KeyEventArgs</a> <span id="r4 rd" class="r4 r">e</span>)
        {
            <b>if</b> (<span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#102560189e85fa41" class="i property">Key</a> == <a href="@0@WindowsBase/A.html#8e0d9266dee78287" class="t t">Key</a>.<a href="@0@WindowsBase/A.html#51a26d8f82f371eb" class="i field">Escape</a> || (<span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#102560189e85fa41" class="i property">Key</a> == <a href="@0@WindowsBase/A.html#8e0d9266dee78287" class="t t">Key</a>.<a href="@0@WindowsBase/A.html#fb6b5b92594477c5" class="i field">System</a> &amp;&amp; <span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#a729b8f7ffa361b1" class="i property">SystemKey</a> == <a href="@0@WindowsBase/A.html#8e0d9266dee78287" class="t t">Key</a>.<a href="@0@WindowsBase/A.html#69f00d74f1dd9239" class="i field">F4</a>))
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#e53c6d0a68df4d95" class="i method">CleanUpHandlers</a>();

                <a href="#56efd989e280c631" class="k">this</a>.<a href="#8035ba52564bb4ed" class="i field">tcs</a>.<a href="@0@mscorlib/A.html#f58e440930617bf6" class="i method">TrySetResult</a>(<b>null</b>!);

                <span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
            }
            <b>else</b> <b>if</b> (<span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#102560189e85fa41" class="i property">Key</a> == <a href="@0@WindowsBase/A.html#8e0d9266dee78287" class="t t">Key</a>.<a href="@0@WindowsBase/A.html#38a06ab0ee7279d0" class="i field">Enter</a>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#e53c6d0a68df4d95" class="i method">CleanUpHandlers</a>();

                <a href="#56efd989e280c631" class="k">this</a>.<a href="#8035ba52564bb4ed" class="i field">tcs</a>.<a href="@0@mscorlib/A.html#f58e440930617bf6" class="i method">TrySetResult</a>(!<a href="@0@mscorlib/A.html#4d607d6d56a93c7e" class="i method">ReferenceEquals</a>(<span class="r3 r">sender</span>, <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>) ? <a href="#56efd989e280c631" class="k">this</a>.<a href="#2d63e43012dd2288" class="i property">Input</a>! : <b>null</b>!);

                <span class="r4 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
            }
        }

        <b>private void</b> <a id="f59bc6fc635cb55d" href="../../R/f59bc6fc635cb55d.html" target="n" data-glyph="76,1" class="i method">OnButtonClick</a>(<b>object</b> <span id="r5 rd" class="r5 r">sender</span>, <a href="@0@PresentationCore/A.html#3089ebf2139eba9d" class="t t">RoutedEventArgs</a> <span id="r6 rd" class="r6 r">e</span>)
        {
            <a href="#56efd989e280c631" class="k">this</a>.<a href="#e53c6d0a68df4d95" class="i method">CleanUpHandlers</a>();

            <a href="#56efd989e280c631" class="k">this</a>.<a href="#8035ba52564bb4ed" class="i field">tcs</a>.<a href="@0@mscorlib/A.html#f58e440930617bf6" class="i method">TrySetResult</a>(<a href="@0@mscorlib/A.html#4d607d6d56a93c7e" class="i method">ReferenceEquals</a>(<span class="r5 r">sender</span>, <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>) ? <a href="#56efd989e280c631" class="k">this</a>.<a href="#2d63e43012dd2288" class="i property">Input</a>! : <b>null</b>!);

            <span class="r6 r">e</span>.<a href="@0@PresentationCore/A.html#f2bcc08494fea0e6" class="i property">Handled</a> = <b>true</b>;
        }

        <b>private void</b> <a id="0e462429e1fac3ba" href="../../R/0e462429e1fac3ba.html" target="n" data-glyph="76,1" class="i method">SetUpHandlers</a>()
        {
            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#f59bc6fc635cb55d" class="i method">OnButtonClick</a>;
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#f59bc6fc635cb55d" class="i method">OnButtonClick</a>;
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> += <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;

            <a href="#56efd989e280c631" class="k">this</a>.<a href="#775e00f35a467625" class="i field">cancellationTokenRegistration</a> = <a href="#56efd989e280c631" class="k">this</a>.<a href="BaseMetroDialog.cs.html#bf134373b9c776a6" class="i property">DialogSettings</a>
                                                     .<a href="MetroDialogSettings.cs.html#dc088b316c8947bc" class="i property">CancellationToken</a>
                                                     .<a href="@0@mscorlib/A.html#b4627f3ac7f722a5" class="i method">Register</a>(() =&gt;
                                                         {
                                                             <a href="#56efd989e280c631" class="k">this</a>.<a href="../Extensions.cs.html#0f91027776f39144" class="i method">BeginInvoke</a>(() =&gt;
                                                                 {
                                                                     <a href="#56efd989e280c631" class="k">this</a>.<a href="#e53c6d0a68df4d95" class="i method">CleanUpHandlers</a>();
                                                                     <a href="#56efd989e280c631" class="k">this</a>.<a href="#8035ba52564bb4ed" class="i field">tcs</a>.<a href="@0@mscorlib/A.html#f58e440930617bf6" class="i method">TrySetResult</a>(<b>null</b>!);
                                                                 });
                                                         });
        }

        <b>private void</b> <a id="e53c6d0a68df4d95" href="../../R/e53c6d0a68df4d95.html" target="n" data-glyph="76,1" class="i method">CleanUpHandlers</a>()
        {
            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#f59bc6fc635cb55d" class="i method">OnButtonClick</a>;
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#cc15dfef7076134f" class="i field">PART_NegativeButton</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#f59bc6fc635cb55d" class="i method">OnButtonClick</a>;
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#0fca13c91d758b1c" class="i field">PART_AffirmativeButton</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <b>if</b> (<a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a> <b>is not null</b>)
            {
                <a href="#56efd989e280c631" class="k">this</a>.<a href="#ff034fd842acab9c" class="i field">PART_TextBox</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;
            }

            <a href="#56efd989e280c631" class="k">this</a>.<a href="@0@PresentationCore/A.html#823b5eebadb2cc18" class="i">KeyDown</a> -= <a href="#56efd989e280c631" class="k">this</a>.<a href="#792bd522139edec3" class="i method">OnKeyDownHandler</a>;

            <a href="#56efd989e280c631" class="k">this</a>.<a href="#775e00f35a467625" class="i field">cancellationTokenRegistration</a>?.<a href="@0@mscorlib/A.html#f05a1300415bcfde" class="i method">Dispose</a>();
        }
    }
}</pre></td></tr></table></div></body></html>
