<!DOCTYPE html>
<html><head><title>StoryboardExample.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(128);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#PropertyAnimation/StoryboardExample.cs" target="_top">StoryboardExample.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#PropertyAnimation" target="_top">HelpProjects\WPF-MORE\Animation\PropertyAnimation\PropertyAnimation.csproj</a> (PropertyAnimation)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// // Copyright (c) Microsoft. All rights reserved.</span>
<span class="c">// // Licensed under the MIT license. See LICENSE file in the project root for full license information.</span>

<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>.<span class="i n">Animation</span>;

<b>namespace</b> <span class="i n">PropertyAnimation</span>
{
    <span class="c">// Uses a storyboard to animate the properties</span>
    <span class="c">// of two buttons.</span>
    <b>public class</b> <a id="4be6a01cdd3c8bff" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">StoryboardExample</a> : <a href="@0@PresentationFramework/A.html#ee962c953241b09c" class="t t">Page</a>
    {
        <b>public</b> <a id="fc4996fe96545c40" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">StoryboardExample</a>()
        {
            <span class="c">// Create a name scope for the page.</span>
            <a href="@0@WindowsBase/A.html#185e46e8c27ef773" class="t t">NameScope</a>.<a href="@0@WindowsBase/A.html#ae8ef0705a9052b3" class="i method">SetNameScope</a>(<a href="#4be6a01cdd3c8bff" class="k">this</a>, <b>new</b> <a href="@0@WindowsBase/A.html#38e8f49e5fd31c2f" class="t constructor">NameScope</a>());

            <a href="@0@PresentationFramework/A.html#00ffee65dfb4fb12" class="i property">WindowTitle</a> = <span class="s">&quot;Animate Properties using Storyboards&quot;</span>;
            <a href="@0@PresentationFramework/A.html#74647d237fc89a63" class="k">var</a> <span id="r0 rd" class="r0 r">myStackPanel</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#71baf37380eff816" class="t constructor">StackPanel</a>
            {
                <a href="@0@PresentationFramework/A.html#0c275d66ceac4be8" class="i property">MinWidth</a> = 500,
                <a href="@0@PresentationFramework/A.html#8aedc94268115177" class="i property">Margin</a> = <b>new</b> <a href="@0@PresentationFramework/A.html#f24f92e6dee837d3" class="t constructor">Thickness</a>(30),
                <a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#2389f1469eca0a2b" class="i field">Left</a>
            };
            <a href="@0@PresentationFramework/A.html#f469b4aeb3697bb8" class="k">var</a> <span id="r1 rd" class="r1 r">myTextBlock</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#450e4175035f484c" class="t constructor">TextBlock</a> {<a href="@0@PresentationFramework/A.html#e77c881b0d6f7e9e" class="i property">Text</a> = <span class="s">&quot;Storyboard Animation Example&quot;</span>};
            <span class="r0 r">myStackPanel</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#8886057feae649bc" class="i method">Add</a>(<span class="r1 r">myTextBlock</span>);

            <span class="c">//</span>
            <span class="c">// Create and animate the first button.</span>
            <span class="c">//</span>

            <span class="c">// Create a button.</span>
            <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="k">var</a> <span id="r2 rd" class="r2 r">myWidthAnimatedButton</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#9b9343f1fa48f518" class="t constructor">Button</a>
            {
                <a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a> = 30,
                <a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a> = 200,
                <a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#2389f1469eca0a2b" class="i field">Left</a>,
                <a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> = <span class="s">&quot;A Button&quot;</span>,
                <a href="@0@PresentationFramework/A.html#1d519a9bdfa176e6" class="i property">Name</a> = <span class="s">&quot;myWidthAnimatedButton&quot;</span>
            };

            <span class="c">// Set the Name of the button so that it can be referred</span>
            <span class="c">// to in the storyboard that&#39;s created later.</span>
            <span class="c">// The ID doesn&#39;t have to match the variable name;</span>
            <span class="c">// it can be any unique identifier.</span>

            <span class="c">// Register the name with the page to which the button belongs.</span>
            <a href="@0@PresentationFramework/A.html#97b55b23588bec8e" class="i method">RegisterName</a>(<span class="r2 r">myWidthAnimatedButton</span>.<a href="@0@PresentationFramework/A.html#1d519a9bdfa176e6" class="i property">Name</a>, <span class="r2 r">myWidthAnimatedButton</span>);

            <span class="c">// Create a DoubleAnimation to animate the width of the button.</span>
            <a href="@0@PresentationCore/A.html#a17bc32ef694a3ac" class="k">var</a> <span id="r3 rd" class="r3 r">myDoubleAnimation</span> = <b>new</b> <a href="@0@PresentationCore/A.html#22053e96b78c403a" class="t constructor">DoubleAnimation</a>
            {
                <a href="@0@PresentationCore/A.html#488b69a83fcd2b30" class="i property">From</a> = 200,
                <a href="@0@PresentationCore/A.html#f6c06d8f76b8628a" class="i property">To</a> = 300,
                <a href="@0@PresentationCore/A.html#aa3a36b776218bff" class="i property">Duration</a> = <b>new</b> <a href="@0@PresentationCore/A.html#b34a900856537ced" class="t constructor">Duration</a>(<a href="@1@System.Runtime/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@System.Runtime/A.html#668d91d771bce54b" class="i method">FromMilliseconds</a>(3000))
            };

            <span class="c">// Configure the animation to target the button&#39;s Width property.</span>
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="t t">Storyboard</a>.<a href="@0@PresentationFramework/A.html#a1bc4112eb04c911" class="i method">SetTargetName</a>(<span class="r3 r">myDoubleAnimation</span>, <span class="r2 r">myWidthAnimatedButton</span>.<a href="@0@PresentationFramework/A.html#1d519a9bdfa176e6" class="i property">Name</a>);
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="t t">Storyboard</a>.<a href="@0@PresentationFramework/A.html#9bf65aa14f9b04b0" class="i method">SetTargetProperty</a>(<span class="r3 r">myDoubleAnimation</span>, <b>new</b> <a href="@0@PresentationFramework/A.html#cf4296c7d69477b8" class="t constructor">PropertyPath</a>(<a href="@0@PresentationFramework/A.html#eab43ecf1e67f8ba" class="i field">WidthProperty</a>));

            <span class="c">// Create a storyboard to contain the animation.</span>
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="k">var</a> <span id="r4 rd" class="r4 r">myWidthAnimatedButtonStoryboard</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#a4987eaf37f92cec" class="t constructor">Storyboard</a>();
            <span class="r4 r">myWidthAnimatedButtonStoryboard</span>.<a href="@0@PresentationCore/A.html#a34849b73cc39556" class="i property">Children</a>.<a href="@0@PresentationCore/A.html#1a3ad140834286df" class="i method">Add</a>(<span class="r3 r">myDoubleAnimation</span>);

            <span class="c">// Animate the button width when it&#39;s clicked.</span>
            <span class="r2 r">myWidthAnimatedButton</span>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> +=
                <b>delegate</b> { <span class="r4 r">myWidthAnimatedButtonStoryboard</span>.<a href="@0@PresentationFramework/A.html#e930b0c99d8ca30a" class="i method">Begin</a>(<span class="r2 r">myWidthAnimatedButton</span>); };


            <span class="r0 r">myStackPanel</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#8886057feae649bc" class="i method">Add</a>(<span class="r2 r">myWidthAnimatedButton</span>);

            <span class="c">//</span>
            <span class="c">// Create and animate the second button.</span>
            <span class="c">//</span>

            <span class="c">// Create a second button.</span>
            <a href="@0@PresentationFramework/A.html#bfc2d93e5b6e9a96" class="k">var</a> <span id="r5 rd" class="r5 r">myColorAnimatedButton</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#9b9343f1fa48f518" class="t constructor">Button</a>
            {
                <a href="@0@PresentationFramework/A.html#df2641c07f10d929" class="i property">Height</a> = 30,
                <a href="@0@PresentationFramework/A.html#d0e1f940abafebe8" class="i property">Width</a> = 200,
                <a href="@0@PresentationFramework/A.html#af1a9620ef03c2dd" class="i property">HorizontalAlignment</a> = <a href="@0@PresentationFramework/A.html#4adb839fdbe93e93" class="t t">HorizontalAlignment</a>.<a href="@0@PresentationFramework/A.html#2389f1469eca0a2b" class="i field">Left</a>,
                <a href="@0@PresentationFramework/A.html#2811283b5ba60413" class="i property">Content</a> = <span class="s">&quot;Another Button&quot;</span>
            };

            <span class="c">// Create a SolidColorBrush to paint the button&#39;s background.</span>
            <a href="@0@PresentationCore/A.html#2bdb4a721050df52" class="k">var</a> <span id="r6 rd" class="r6 r">myBackgroundBrush</span> = <b>new</b> <a href="@0@PresentationCore/A.html#3387a4fb06ed3ffd" class="t constructor">SolidColorBrush</a> {<a href="@0@PresentationCore/A.html#eed7cf36d73cf29b" class="i property">Color</a> = <a href="@0@PresentationCore/A.html#0584e1e7d7fb612c" class="t t">Colors</a>.<a href="@0@PresentationCore/A.html#aa1fb11db08ec967" class="i property">Blue</a>};

            <span class="c">// Because a Brush isn&#39;t a FrameworkElement, it doesn&#39;t</span>
            <span class="c">// have a Name property to set. Instead, you just</span>
            <span class="c">// register a name for the SolidColorBrush with</span>
            <span class="c">// the page where it&#39;s used.</span>
            <a href="@0@PresentationFramework/A.html#97b55b23588bec8e" class="i method">RegisterName</a>(<span class="s">&quot;myAnimatedBrush&quot;</span>, <span class="r6 r">myBackgroundBrush</span>);

            <span class="c">// Use the brush to paint the background of the button.</span>
            <span class="r5 r">myColorAnimatedButton</span>.<a href="@0@PresentationFramework/A.html#4e6ce8c1fbfefae7" class="i property">Background</a> = <span class="r6 r">myBackgroundBrush</span>;

            <span class="c">// Create a ColorAnimation to animate the button&#39;s background.</span>
            <a href="@0@PresentationCore/A.html#b3ad738a9d2e46f8" class="k">var</a> <span id="r7 rd" class="r7 r">myColorAnimation</span> = <b>new</b> <a href="@0@PresentationCore/A.html#82b7d0b190e21c02" class="t constructor">ColorAnimation</a>
            {
                <a href="@0@PresentationCore/A.html#95613e9c5a23c2f1" class="i property">From</a> = <a href="@0@PresentationCore/A.html#0584e1e7d7fb612c" class="t t">Colors</a>.<a href="@0@PresentationCore/A.html#ff276a65240551dd" class="i property">Red</a>,
                <a href="@0@PresentationCore/A.html#a9abfcf7a3555586" class="i property">To</a> = <a href="@0@PresentationCore/A.html#0584e1e7d7fb612c" class="t t">Colors</a>.<a href="@0@PresentationCore/A.html#aa1fb11db08ec967" class="i property">Blue</a>,
                <a href="@0@PresentationCore/A.html#aa3a36b776218bff" class="i property">Duration</a> = <b>new</b> <a href="@0@PresentationCore/A.html#b34a900856537ced" class="t constructor">Duration</a>(<a href="@1@System.Runtime/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@System.Runtime/A.html#668d91d771bce54b" class="i method">FromMilliseconds</a>(7000))
            };

            <span class="c">// Configure the animation to target the brush&#39;s Color property.</span>
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="t t">Storyboard</a>.<a href="@0@PresentationFramework/A.html#a1bc4112eb04c911" class="i method">SetTargetName</a>(<span class="r7 r">myColorAnimation</span>, <span class="s">&quot;myAnimatedBrush&quot;</span>);
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="t t">Storyboard</a>.<a href="@0@PresentationFramework/A.html#9bf65aa14f9b04b0" class="i method">SetTargetProperty</a>(<span class="r7 r">myColorAnimation</span>, <b>new</b> <a href="@0@PresentationFramework/A.html#cf4296c7d69477b8" class="t constructor">PropertyPath</a>(<a href="@0@PresentationCore/A.html#2bdb4a721050df52" class="t t">SolidColorBrush</a>.<a href="@0@PresentationCore/A.html#b8179e0afc58b350" class="i field">ColorProperty</a>));

            <span class="c">// Create a storyboard to contain the animation.</span>
            <a href="@0@PresentationFramework/A.html#ccdf3751fb4ab867" class="k">var</a> <span id="r8 rd" class="r8 r">myColorAnimatedButtonStoryboard</span> = <b>new</b> <a href="@0@PresentationFramework/A.html#a4987eaf37f92cec" class="t constructor">Storyboard</a>();
            <span class="r8 r">myColorAnimatedButtonStoryboard</span>.<a href="@0@PresentationCore/A.html#a34849b73cc39556" class="i property">Children</a>.<a href="@0@PresentationCore/A.html#1a3ad140834286df" class="i method">Add</a>(<span class="r7 r">myColorAnimation</span>);

            <span class="c">// Animate the button background color when it&#39;s clicked.</span>
            <span class="r5 r">myColorAnimatedButton</span>.<a href="@0@PresentationFramework/A.html#56b78e5307732315" class="i">Click</a> +=
                <b>delegate</b> { <span class="r8 r">myColorAnimatedButtonStoryboard</span>.<a href="@0@PresentationFramework/A.html#e930b0c99d8ca30a" class="i method">Begin</a>(<span class="r5 r">myColorAnimatedButton</span>); };


            <span class="r0 r">myStackPanel</span>.<a href="@0@PresentationFramework/A.html#fb9060d71a3afc83" class="i property">Children</a>.<a href="@0@PresentationFramework/A.html#8886057feae649bc" class="i method">Add</a>(<span class="r5 r">myColorAnimatedButton</span>);
            <a href="@0@PresentationFramework/A.html#e0e81738f06c54b6" class="i property">Content</a> = <span class="r0 r">myStackPanel</span>;
        }
    }
}

<span class="c">//&lt;/Snippet11&gt;</span></pre></td></tr></table></div></body></html>
