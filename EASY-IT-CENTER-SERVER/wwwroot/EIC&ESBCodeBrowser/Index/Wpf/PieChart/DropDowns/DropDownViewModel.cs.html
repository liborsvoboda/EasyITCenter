<!DOCTYPE html>
<html><head><title>DropDownViewModel.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(106);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Wpf/PieChart/DropDowns/DropDownViewModel.cs" target="_top">PieChart\DropDowns\DropDownViewModel.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Wpf" target="_top">HelpProjects\WPF-MAIN\Live-Charts-master\Examples\Wpf\Wpf.csproj</a> (Wpf)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i n">LiveCharts</span>;
<b>using</b> <span class="i n">LiveCharts</span>.<span class="i n">Helpers</span>;
<b>using</b> <span class="i n">LiveCharts</span>.<span class="i n">Wpf</span>;

<b>namespace</b> <span class="i n">Wpf</span>.<span class="i n">PieChart</span>.<span class="i n">DropDowns</span>
{
    <b>public class</b> <a id="79d7bec235b9dd7b" href="../../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">DropDownViewModel</a> : <a href="@0@System/A.html#fd4b42d7e29d53e5" class="t t">INotifyPropertyChanged</a>
    {
        <b>private</b> <a href="/LiveCharts/A.html#90afae0d66da3706" class="t t">SeriesCollection</a> <a id="bbba02803c21c4e6" href="../../R/bbba02803c21c4e6.html" target="n" data-glyph="46,1" class="i field">_series</a>;

        <b>public</b> <a id="904f709a10e08f62" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">DropDownViewModel</a>()
        {
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="k">var</a> <span id="r0 rd" class="r0 r">navigation</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/LiveCharts/A.html#90afae0d66da3706" class="t t">SeriesCollection</a>&gt;();
            <b>var</b> <span id="r1 rd" class="r1 r">initialValues</span> = <a href="DataProvider.cs.html#31d46641e5c63e2a" class="t t">DataProvider</a>.<a href="DataProvider.cs.html#80245b2d6a1f50b5" class="i property">Values</a>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();

            <a href="#5573cbcae117d598" class="i property">Series</a> = <a href="#e2db3d084dd5f41d" class="i method">GroupSeriesByTheshold</a>(<span class="r2 r">content</span>: <span class="r1 r">initialValues</span>, <span class="r3 r">threshold</span>: <span class="r1 r">initialValues</span>.<a href="@0@System.Core/A.html#c437c6d4acd57795" class="i method">Max</a>() * .7);

            <a href="#c4aa7af0e53f5b78" class="i property">SliceClickCommand</a> = <b>new</b> <a href="DropDownCommand.cs.html#cef9cf117db669d6" class="t constructor">DropDownCommand</a>(<span id="r4 rd" class="r4 r">dropDownPoint</span> =&gt;
            {
                <span class="c">//if the point has no content to display...</span>
                <b>if</b> (<span class="r4 r">dropDownPoint</span>.<a href="PiePoint.cs.html#56e9118f3bea5ea0" class="i property">Content</a>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> == 1) <b>return</b>;

                <span class="r0 r">navigation</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<a href="#5573cbcae117d598" class="i property">Series</a>.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r5 rd" class="r5 r">x</span> =&gt; <b>new</b> <a href="/LiveCharts.Wpf/A.html#5c2d8721172dcf59" class="t constructor">PieSeries</a>
                {
                    <a href="/LiveCharts.Wpf/A.html#ba565e37fd8fc84c" class="i property">Values</a> = <span class="r5 r">x</span>.<a href="/LiveCharts/A.html#ccd53d4aee7d99d6" class="i property">Values</a>,
                    <a href="/LiveCharts.Wpf/A.html#17d624e96dd007c8" class="i property">Title</a> = <span class="r5 r">x</span>.<a href="/LiveCharts/A.html#961c56a31ffce977" class="i property">Title</a>,
                    <a href="/LiveCharts.Wpf/A.html#a6f44874beaa1a39" class="i property">Fill</a> = ((<a href="/LiveCharts.Wpf/A.html#424fba5494c39d40" class="t t">Series</a>) <span class="r5 r">x</span>).<a href="/LiveCharts.Wpf/A.html#a6f44874beaa1a39" class="i property">Fill</a>
                }).<a href="/LiveCharts/A.html#f4c99f2dab43a29c" class="i method">AsSeriesCollection</a>());

                <a href="#5573cbcae117d598" class="i property">Series</a> = <a href="#e2db3d084dd5f41d" class="i method">GroupSeriesByTheshold</a>(<span class="r2 r">content</span>: <span class="r4 r">dropDownPoint</span>.<a href="PiePoint.cs.html#56e9118f3bea5ea0" class="i property">Content</a>, <span class="r3 r">threshold</span>: <span class="r4 r">dropDownPoint</span>.<a href="PiePoint.cs.html#56e9118f3bea5ea0" class="i property">Content</a>.<a href="@0@System.Core/A.html#c437c6d4acd57795" class="i method">Max</a>() * .7);
            });

            <a href="#2413e773cd00227e" class="i property">GoBackCommand</a> = <b>new</b> <a href="RelayCommand.cs.html#0f28cdceb2ab0a7a" class="t constructor">RelayCommand</a>(() =&gt;
            {
                <b>if</b> (!<span class="r0 r">navigation</span>.<a href="@0@System.Core/A.html#8788153112b7ffd0" class="i method">Any</a>())<b>return</b>;
                <a href="/LiveCharts/A.html#90afae0d66da3706" class="k">var</a> <span id="r6 rd" class="r6 r">previous</span> = <span class="r0 r">navigation</span>.<a href="@0@System.Core/A.html#75722fd194dc2e0e" class="i method">Last</a>();
                <b>if</b>(<span class="r6 r">previous</span> == <b>null</b>) <b>return</b>;
                <a href="#5573cbcae117d598" class="i property">Series</a> = <span class="r6 r">previous</span>;
                <span class="r0 r">navigation</span>.<a href="@0@mscorlib/A.html#db8cdd552a0bb10c" class="i method">Remove</a>(<span class="r6 r">previous</span>);
            });

            <a href="#3c1bea709457a627" class="i property">Formatter</a> = <span id="r7 rd" class="r7 r">x</span> =&gt; <span class="r7 r">x</span>.<a href="@0@mscorlib/A.html#0e003048b54ae390" class="i method">ToString</a>(<span class="s">&quot;N1&quot;</span>);
        }

        <b>public</b> <a href="/LiveCharts/A.html#90afae0d66da3706" class="t t">SeriesCollection</a> <a id="5573cbcae117d598" href="../../R/5573cbcae117d598.html" target="n" data-glyph="102,1" class="i property">Series</a>
        {
            <b>get</b> { <b>return</b> <a href="#bbba02803c21c4e6" class="i field">_series</a>; }
            <b>set</b>
            {
                <a href="#bbba02803c21c4e6" class="i field">_series</a> = <b>value</b>;
                <a href="#d345e9e557414327" class="i method">OnPropertyChanged</a>(<span class="s">&quot;Series&quot;</span>);
            }
        }
        <b>public</b> <a href="DropDownCommand.cs.html#0f7b51b812b057ea" class="t t">DropDownCommand</a> <a id="c4aa7af0e53f5b78" href="../../R/c4aa7af0e53f5b78.html" target="n" data-glyph="102,1" class="i property">SliceClickCommand</a> { <b>get</b>; <b>set</b>; }
        <b>public</b> <a href="RelayCommand.cs.html#592cc21a2a4b3995" class="t t">RelayCommand</a> <a id="2413e773cd00227e" href="../../R/2413e773cd00227e.html" target="n" data-glyph="102,1" class="i property">GoBackCommand</a> { <b>get</b>; <b>set</b>; }
        <b>public</b> <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<b>double</b>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="3c1bea709457a627" href="../../R/3c1bea709457a627.html" target="n" data-glyph="102,1" class="i property">Formatter</a> { <b>get</b>; <b>set</b>; }
        
        <b>private static</b> <a href="/LiveCharts/A.html#90afae0d66da3706" class="t t">SeriesCollection</a> <a id="e2db3d084dd5f41d" href="../../R/e2db3d084dd5f41d.html" target="n" data-glyph="76,1" class="i method">GroupSeriesByTheshold</a>(<b>double</b>[] <span id="r2 rd" class="r2 r">content</span>, <b>double</b> <span id="r3 rd" class="r3 r">threshold</span>)
        {
            <a href="/LiveCharts/A.html#90afae0d66da3706" class="k">var</a> <span id="r8 rd" class="r8 r">series</span> = <span class="r2 r">content</span>
                .<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r9 rd" class="r9 r">x</span> =&gt; <span class="r9 r">x</span> &gt; <span class="r3 r">threshold</span>)
                .<a href="@0@System.Core/A.html#d3e6cf8553f8ad92" class="i method">Select</a>((<span id="r10 rd" class="r10 r">value</span>, <span id="r11 rd" class="r11 r">index</span>) =&gt; <b>new</b> <a href="/LiveCharts.Wpf/A.html#5c2d8721172dcf59" class="t constructor">PieSeries</a>
                {
                    <a href="/LiveCharts.Wpf/A.html#ba565e37fd8fc84c" class="i property">Values</a> = <b>new</b> <a href="/LiveCharts/A.html#9dc8c197acdf6c12" class="t constructor">ChartValues</a>&lt;<a href="PiePoint.cs.html#efa9dfafa49d840e" class="t t">DropDownPoint</a>&gt;
                    {
                        <b>new</b> <a href="PiePoint.cs.html#efa9dfafa49d840e" class="t constructor">DropDownPoint</a> {<a href="PiePoint.cs.html#56e9118f3bea5ea0" class="i property">Content</a> = <b>new</b>[] {<span class="r10 r">value</span>}}
                    },
                    <a href="/LiveCharts.Wpf/A.html#17d624e96dd007c8" class="i property">Title</a> = <span class="s">&quot;Series &quot;</span> + <span class="r11 r">index</span>
                }).<a href="/LiveCharts/A.html#f4c99f2dab43a29c" class="i method">AsSeriesCollection</a>();

            <a href="/LiveCharts.Wpf/A.html#3640f7dc24676fc5" class="k">var</a> <span id="r12 rd" class="r12 r">thresholdSeries</span> = <b>new</b> <a href="/LiveCharts.Wpf/A.html#5c2d8721172dcf59" class="t constructor">PieSeries</a>
            {
                <a href="/LiveCharts.Wpf/A.html#ba565e37fd8fc84c" class="i property">Values</a> = <b>new</b> <a href="/LiveCharts/A.html#9dc8c197acdf6c12" class="t constructor">ChartValues</a>&lt;<a href="PiePoint.cs.html#efa9dfafa49d840e" class="t t">DropDownPoint</a>&gt;
                {
                    <b>new</b> <a href="PiePoint.cs.html#efa9dfafa49d840e" class="t constructor">DropDownPoint</a>
                    {
                        <a href="PiePoint.cs.html#56e9118f3bea5ea0" class="i property">Content</a> = <span class="r2 r">content</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r13 rd" class="r13 r">x</span> =&gt; <span class="r13 r">x</span> &lt; <span class="r3 r">threshold</span>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>()
                    }
                },
                <a href="/LiveCharts.Wpf/A.html#17d624e96dd007c8" class="i property">Title</a> = <span class="s">&quot;DropDown Slice&quot;</span>,
                <a href="/LiveCharts.Wpf/A.html#a6f44874beaa1a39" class="i property">Fill</a> = <b>new</b> <a href="@0@PresentationCore/A.html#28be7a261187a210" class="t constructor">SolidColorBrush</a>(<a href="@0@PresentationCore/A.html#9c469acbf7b2cb81" class="t t">Color</a>.<a href="@0@PresentationCore/A.html#c0c2e7d2eff59dd2" class="i method">FromRgb</a>(30,30,30)),
                <a href="/LiveCharts.Wpf/A.html#edae27e23bdad165" class="i property">PushOut</a> = 5
            };
            <span class="r8 r">series</span>.<a href="/LiveCharts/A.html#501ee31de2dd2f3e" class="i method">Add</a>(<span class="r12 r">thresholdSeries</span>);

            <b>return</b> <span class="r8 r">series</span>;
        }

        <span class="k preprocess">#</span><span class="k preprocess">region</span> INotifyPropertyChanged implementation

        <b>public event</b> <a href="@0@System/A.html#670754815f6804ff" class="t t">PropertyChangedEventHandler</a> <a id="4ee479c822acfe32" href="../../R/4ee479c822acfe32.html" target="n" data-glyph="30,1" class="i">PropertyChanged</a>;

        <b>protected virtual void</b> <a id="d345e9e557414327" href="../../R/d345e9e557414327.html" target="n" data-glyph="75,1" class="i method">OnPropertyChanged</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">propertyName</span>)
        {
            <a href="@0@System/A.html#670754815f6804ff" class="k">var</a> <span id="r15 rd" class="r15 r">handler</span> = <a href="#4ee479c822acfe32" class="i">PropertyChanged</a>;
            <b>if</b> (<span class="r15 r">handler</span> != <b>null</b>) <span class="r15 r">handler</span>(<a href="#79d7bec235b9dd7b" class="k">this</a>, <b>new</b> <a href="@0@System/A.html#76958b0a96ed2a2e" class="t constructor">PropertyChangedEventArgs</a>(<span class="r14 r">propertyName</span>));
        }

        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
    }
}</pre></td></tr></table></div></body></html>
