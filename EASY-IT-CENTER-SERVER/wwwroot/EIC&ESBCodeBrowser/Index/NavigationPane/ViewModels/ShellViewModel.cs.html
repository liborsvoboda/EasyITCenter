<!DOCTYPE html>
<html><head><title>ShellViewModel.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(122);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#NavigationPane/ViewModels/ShellViewModel.cs" target="_top">ViewModels\ShellViewModel.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#NavigationPane" target="_top">HelpProjects\WPF-MAIN\WPFprism\NavigationPane\NavigationPane\NavigationPane.csproj</a> (NavigationPane)</td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">ObjectModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Windows</span>.<span class="i n">Input</span>;

<b>using</b> <span class="i n">MahApps</span>.<span class="i n">Metro</span>.<span class="i n">Controls</span>;

<b>using</b> <span class="i n">NavigationPane</span>.<span class="i n">Constants</span>;
<b>using</b> <span class="i n">NavigationPane</span>.<span class="i n">Strings</span>;

<b>using</b> <span class="i n">Prism</span>.<span class="i n">Commands</span>;
<b>using</b> <span class="i n">Prism</span>.<span class="i n">Mvvm</span>;
<b>using</b> <span class="i n">Prism</span>.<span class="i n">Regions</span>;

<b>namespace</b> <span class="i n">NavigationPane</span>.<span class="i n">ViewModels</span>
{
    <b>public class</b> <a id="a43238798e49bd7e" href="../R/a43238798e49bd7e.html" target="n" data-glyph="0,0" class="t t">ShellViewModel</a> : <span class="t t">BindableBase</span>
    {
        <b>private readonly</b> <span class="t t">IRegionManager</span> <a id="bf00b86eba08ba5b" href="../R/bf00b86eba08ba5b.html" target="n" data-glyph="46,1" class="i field">_regionManager</a>;
        <b>private</b> <span class="t t">IRegionNavigationService</span> <a id="2ec050b2b2fc3c9e" href="../R/2ec050b2b2fc3c9e.html" target="n" data-glyph="46,1" class="i field">_navigationService</a>;
        <b>private</b> <a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a> <a id="15d7d46ea00ce143" href="../R/15d7d46ea00ce143.html" target="n" data-glyph="46,1" class="i field">_selectedMenuItem</a>;
        <b>private</b> <a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a> <a id="4c2daf5870196af9" href="../R/4c2daf5870196af9.html" target="n" data-glyph="46,1" class="i field">_selectedOptionsMenuItem</a>;
        <b>private</b> <span class="t t">DelegateCommand</span> <a id="316413918f20b75c" href="../R/316413918f20b75c.html" target="n" data-glyph="46,1" class="i field">_goBackCommand</a>;
        <b>private</b> <span class="t t">ICommand</span> <a id="256b8e20ba9073a9" href="../R/256b8e20ba9073a9.html" target="n" data-glyph="46,1" class="i field">_loadedCommand</a>;
        <b>private</b> <span class="t t">ICommand</span> <a id="855262d681a15387" href="../R/855262d681a15387.html" target="n" data-glyph="46,1" class="i field">_unloadedCommand</a>;
        <b>private</b> <span class="t t">ICommand</span> <a id="a95397de5c0ecf60" href="../R/a95397de5c0ecf60.html" target="n" data-glyph="46,1" class="i field">_menuItemInvokedCommand</a>;
        <b>private</b> <span class="t t">ICommand</span> <a id="6b399f74a4f67adf" href="../R/6b399f74a4f67adf.html" target="n" data-glyph="46,1" class="i field">_optionsMenuItemInvokedCommand</a>;

        <b>public</b> <a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a> <a id="d794ba79dff52cf3" href="../R/d794ba79dff52cf3.html" target="n" data-glyph="102,1" class="i property">SelectedMenuItem</a>
        {
            <b>get</b> { <b>return</b> <a href="#15d7d46ea00ce143" class="i field">_selectedMenuItem</a>; }
            <b>set</b> { <span class="i method">SetProperty</span>(<b>ref</b> <a href="#15d7d46ea00ce143" class="i field">_selectedMenuItem</a>, <b>value</b>); }
        }

        <b>public</b> <a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a> <a id="94ccf16a131f349f" href="../R/94ccf16a131f349f.html" target="n" data-glyph="102,1" class="i property">SelectedOptionsMenuItem</a>
        {
            <b>get</b> { <b>return</b> <a href="#4c2daf5870196af9" class="i field">_selectedOptionsMenuItem</a>; }
            <b>set</b> { <span class="i method">SetProperty</span>(<b>ref</b> <a href="#4c2daf5870196af9" class="i field">_selectedOptionsMenuItem</a>, <b>value</b>); }
        }

        <span class="c">// TODO WTS: Change the icons and titles for all HamburgerMenuItems here.</span>
        <b>public</b> <span class="t t">ObservableCollection</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt; <a id="4606707f96d642b1" href="../R/4606707f96d642b1.html" target="n" data-glyph="102,1" class="i property">MenuItems</a> { <b>get</b>; } = <b>new</b> <span class="t constructor">ObservableCollection</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt;()
        {
            <b>new</b> <a href="/MahApps.Metro/A.html#dc576e56277e774b" class="t constructor">HamburgerMenuGlyphItem</a>() { <a href="/MahApps.Metro/A.html#7757a14ecc42d301" class="i property">Label</a> = <a href="../Strings/Resources.Designer.cs.html#e2ab5c378fcbbb9b" class="t t">Resources</a>.<a href="../Strings/Resources.Designer.cs.html#a21d1e77ebf92ac7" class="i property">ShellMainPage</a>, <a href="/MahApps.Metro/A.html#ab557a224af877de" class="i property">Glyph</a> = <span class="s">&quot;\uE8A5&quot;</span>, <a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a> = <a href="../Constants/PageKeys.cs.html#1333b6dbd93ed540" class="t t">PageKeys</a>.<a href="../Constants/PageKeys.cs.html#d75f0a004d5f16c6" class="i field">Main</a> },
            <b>new</b> <a href="/MahApps.Metro/A.html#dc576e56277e774b" class="t constructor">HamburgerMenuGlyphItem</a>() { <a href="/MahApps.Metro/A.html#7757a14ecc42d301" class="i property">Label</a> = <a href="../Strings/Resources.Designer.cs.html#e2ab5c378fcbbb9b" class="t t">Resources</a>.<a href="../Strings/Resources.Designer.cs.html#9106c9858f0b35f0" class="i property">ShellMasterDetailPage</a>, <a href="/MahApps.Metro/A.html#ab557a224af877de" class="i property">Glyph</a> = <span class="s">&quot;\uE8A5&quot;</span>, <a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a> = <a href="../Constants/PageKeys.cs.html#1333b6dbd93ed540" class="t t">PageKeys</a>.<a href="../Constants/PageKeys.cs.html#f748680597b312ed" class="i field">MasterDetail</a> },
            <b>new</b> <a href="/MahApps.Metro/A.html#dc576e56277e774b" class="t constructor">HamburgerMenuGlyphItem</a>() { <a href="/MahApps.Metro/A.html#7757a14ecc42d301" class="i property">Label</a> = <a href="../Strings/Resources.Designer.cs.html#e2ab5c378fcbbb9b" class="t t">Resources</a>.<a href="../Strings/Resources.Designer.cs.html#f7f2cd9e01a8ea92" class="i property">ShellWebViewPage</a>, <a href="/MahApps.Metro/A.html#ab557a224af877de" class="i property">Glyph</a> = <span class="s">&quot;\uE8A5&quot;</span>, <a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a> = <a href="../Constants/PageKeys.cs.html#1333b6dbd93ed540" class="t t">PageKeys</a>.<a href="../Constants/PageKeys.cs.html#ec61bdbec3f5cb00" class="i field">WebView</a> },
        };

        <b>public</b> <span class="t t">ObservableCollection</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt; <a id="1dfe203a5b879d3e" href="../R/1dfe203a5b879d3e.html" target="n" data-glyph="102,1" class="i property">OptionMenuItems</a> { <b>get</b>; } = <b>new</b> <span class="t constructor">ObservableCollection</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt;()
        {
            <b>new</b> <a href="/MahApps.Metro/A.html#dc576e56277e774b" class="t constructor">HamburgerMenuGlyphItem</a>() { <a href="/MahApps.Metro/A.html#7757a14ecc42d301" class="i property">Label</a> = <a href="../Strings/Resources.Designer.cs.html#e2ab5c378fcbbb9b" class="t t">Resources</a>.<a href="../Strings/Resources.Designer.cs.html#a78cf0037f324591" class="i property">ShellSettingsPage</a>, <a href="/MahApps.Metro/A.html#ab557a224af877de" class="i property">Glyph</a> = <span class="s">&quot;\uE713&quot;</span>, <a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a> = <a href="../Constants/PageKeys.cs.html#1333b6dbd93ed540" class="t t">PageKeys</a>.<a href="../Constants/PageKeys.cs.html#bd152183895193b9" class="i field">Settings</a> }
        };

        <b>public</b> <span class="t t">DelegateCommand</span> <a id="2896cc73deb1bc10" href="../R/2896cc73deb1bc10.html" target="n" data-glyph="102,1" class="i property">GoBackCommand</a> =&gt; <a href="#316413918f20b75c" class="i field">_goBackCommand</a> ?? (<a href="#316413918f20b75c" class="i field">_goBackCommand</a> = <b>new</b> <span class="t constructor">DelegateCommand</span>(<a href="#ecacae7427e5abdc" class="i method">OnGoBack</a>, <a href="#ce5687855957ad51" class="i method">CanGoBack</a>));

        <b>public</b> <span class="t t">ICommand</span> <a id="d1e2271dd0fe5b05" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">LoadedCommand</a> =&gt; <a href="#256b8e20ba9073a9" class="i field">_loadedCommand</a> ?? (<a href="#256b8e20ba9073a9" class="i field">_loadedCommand</a> = <b>new</b> <span class="t constructor">DelegateCommand</span>(<a href="#f6ba164a99787b0b" class="i method">OnLoaded</a>));

        <b>public</b> <span class="t t">ICommand</span> <a id="2545ecaed7a6a2c2" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">UnloadedCommand</a> =&gt; <a href="#855262d681a15387" class="i field">_unloadedCommand</a> ?? (<a href="#855262d681a15387" class="i field">_unloadedCommand</a> = <b>new</b> <span class="t constructor">DelegateCommand</span>(<a href="#c0dd65231e5507e5" class="i method">OnUnloaded</a>));

        <b>public</b> <span class="t t">ICommand</span> <a id="ae419bf545edb351" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">MenuItemInvokedCommand</a> =&gt; <a href="#a95397de5c0ecf60" class="i field">_menuItemInvokedCommand</a> ?? (<a href="#a95397de5c0ecf60" class="i field">_menuItemInvokedCommand</a> = <b>new</b> <span class="t constructor">DelegateCommand</span>(<a href="#9a4faff134f30fd7" class="i method">OnMenuItemInvoked</a>));

        <b>public</b> <span class="t t">ICommand</span> <a id="8721a66a5123f7bb" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">OptionsMenuItemInvokedCommand</a> =&gt; <a href="#6b399f74a4f67adf" class="i field">_optionsMenuItemInvokedCommand</a> ?? (<a href="#6b399f74a4f67adf" class="i field">_optionsMenuItemInvokedCommand</a> = <b>new</b> <span class="t constructor">DelegateCommand</span>(<a href="#d564e58d16a942ae" class="i method">OnOptionsMenuItemInvoked</a>));

        <b>public</b> <a id="06f10de76567fe9b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ShellViewModel</a>(<span class="t t">IRegionManager</span> <span id="r0 rd" class="r0 r">regionManager</span>)
        {
            <a href="#bf00b86eba08ba5b" class="i field">_regionManager</a> = <span class="r0 r">regionManager</span>;
        }

        <b>private void</b> <a id="f6ba164a99787b0b" href="../R/f6ba164a99787b0b.html" target="n" data-glyph="76,1" class="i method">OnLoaded</a>()
        {
            <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a> = <a href="#bf00b86eba08ba5b" class="i field">_regionManager</a>.<span class="i property">Regions</span>[<a href="../Constants/Regions.cs.html#c37a56c6215d9ab7" class="t t">Regions</a>.<a href="../Constants/Regions.cs.html#8d637fa2c8e9cdc6" class="i field">Main</a>].<span class="i property">NavigationService</span>;
            <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<span class="i">Navigated</span> += <a href="#7f47f379ca8890a5" class="i method">OnNavigated</a>;
            <a href="#d794ba79dff52cf3" class="i property">SelectedMenuItem</a> = <a href="#4606707f96d642b1" class="i property">MenuItems</a>.<span class="i method">First</span>();
        }

        <b>private void</b> <a id="c0dd65231e5507e5" href="../R/c0dd65231e5507e5.html" target="n" data-glyph="76,1" class="i method">OnUnloaded</a>()
        {
            <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<span class="i">Navigated</span> -= <a href="#7f47f379ca8890a5" class="i method">OnNavigated</a>;
            <a href="#bf00b86eba08ba5b" class="i field">_regionManager</a>.<span class="i property">Regions</span>.<span class="i method">Remove</span>(<a href="../Constants/Regions.cs.html#c37a56c6215d9ab7" class="t t">Regions</a>.<a href="../Constants/Regions.cs.html#8d637fa2c8e9cdc6" class="i field">Main</a>);
        }

        <b>private bool</b> <a id="ce5687855957ad51" href="../R/ce5687855957ad51.html" target="n" data-glyph="76,1" class="i method">CanGoBack</a>()
            =&gt; <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a> != <b>null</b> &amp;&amp; <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<span class="i property">Journal</span>.<span class="i property">CanGoBack</span>;

        <b>private void</b> <a id="ecacae7427e5abdc" href="../R/ecacae7427e5abdc.html" target="n" data-glyph="76,1" class="i method">OnGoBack</a>()
            =&gt; <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<span class="i property">Journal</span>.<span class="i method">GoBack</span>();

        <b>private void</b> <a id="9a4faff134f30fd7" href="../R/9a4faff134f30fd7.html" target="n" data-glyph="76,1" class="i method">OnMenuItemInvoked</a>()
            =&gt; <a href="#d3710e2ee58f7d08" class="i method">RequestNavigate</a>(<a href="#d794ba79dff52cf3" class="i property">SelectedMenuItem</a>.<a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a>?.<a href="@1@System.Runtime/A.html#ff31a6bf27c58f89" class="i method">ToString</a>());

        <b>private void</b> <a id="d564e58d16a942ae" href="../R/d564e58d16a942ae.html" target="n" data-glyph="76,1" class="i method">OnOptionsMenuItemInvoked</a>()
            =&gt; <a href="#d3710e2ee58f7d08" class="i method">RequestNavigate</a>(<a href="#94ccf16a131f349f" class="i property">SelectedOptionsMenuItem</a>.<a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a>?.<a href="@1@System.Runtime/A.html#ff31a6bf27c58f89" class="i method">ToString</a>());

        <b>private void</b> <a id="d3710e2ee58f7d08" href="../R/d3710e2ee58f7d08.html" target="n" data-glyph="76,1" class="i method">RequestNavigate</a>(<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">target</span>)
        {
            <b>if</b> (<a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<a href="../Helpers/IRegionNavigationServiceExtensions.cs.html#5e9db30995ca80df" class="i method">CanNavigate</a>(<span class="r1 r">target</span>))
            {
                <a href="#2ec050b2b2fc3c9e" class="i field">_navigationService</a>.<span class="i method">RequestNavigate</span>(<span class="r1 r">target</span>);
            }
        }

        <b>private void</b> <a id="7f47f379ca8890a5" href="../R/7f47f379ca8890a5.html" target="n" data-glyph="76,1" class="i method">OnNavigated</a>(<b>object</b> <span id="r2 rd" class="r2 r">sender</span>, <span class="t t">RegionNavigationEventArgs</span> <span id="r3 rd" class="r3 r">e</span>)
        {
            <a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="k">var</a> <span id="r4 rd" class="r4 r">item</span> = <a href="#4606707f96d642b1" class="i property">MenuItems</a>
                        .<span class="i method">OfType</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt;()
                        .<span class="i method">FirstOrDefault</span>(<span id="r5 rd" class="r5 r">i</span> =&gt; <span class="r3 r">e</span>.<span class="i property">Uri</span>.<a href="@1@System.Runtime/A.html#bf3caa11ab73e433" class="i method">ToString</a>() == <span class="r5 r">i</span>.<a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a>?.<a href="@1@System.Runtime/A.html#ff31a6bf27c58f89" class="i method">ToString</a>());
            <b>if</b> (<span class="r4 r">item</span> != <b>null</b>)
            {
                <a href="#d794ba79dff52cf3" class="i property">SelectedMenuItem</a> = <span class="r4 r">item</span>;
            }
            <b>else</b>
            {
                <a href="#94ccf16a131f349f" class="i property">SelectedOptionsMenuItem</a> = <a href="#1dfe203a5b879d3e" class="i property">OptionMenuItems</a>
                        .<span class="i method">OfType</span>&lt;<a href="/MahApps.Metro/A.html#1bba5e5176ace3ac" class="t t">HamburgerMenuItem</a>&gt;()
                        .<span class="i method">FirstOrDefault</span>(<span id="r6 rd" class="r6 r">i</span> =&gt; <span class="r3 r">e</span>.<span class="i property">Uri</span>.<a href="@1@System.Runtime/A.html#bf3caa11ab73e433" class="i method">ToString</a>() == <span class="r6 r">i</span>.<a href="/MahApps.Metro/A.html#77e7bab4fa605481" class="i property">Tag</a>?.<a href="@1@System.Runtime/A.html#ff31a6bf27c58f89" class="i method">ToString</a>());
            }

            <a href="#2896cc73deb1bc10" class="i property">GoBackCommand</a>.<span class="i method">RaiseCanExecuteChanged</span>();
        }
    }
}
</pre></td></tr></table></div></body></html>
