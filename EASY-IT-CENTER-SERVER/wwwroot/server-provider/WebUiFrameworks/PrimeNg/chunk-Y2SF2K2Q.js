import{a as J,b as W}from"./chunk-W23CXJV4.js";import{a as $}from"./chunk-PXBAS5CJ.js";import{a as H,r as X,s as Y}from"./chunk-5R6LCAUH.js";import{a as b,q as G,r as Z}from"./chunk-UWMVDULA.js";import{Cc as K,Eb as F,Fb as D,Fc as O,Gb as V,Hb as y,Ic as Q,Jc as U,Nc as z,Pc as I,Qb as L,Sa as c,T as M,Ta as d,V as T,da as P,ea as B,ib as m,jb as C,kb as f,kc as j,ma as o,mb as S,na as h,rb as w,sb as k,ua as N,ub as R,va as p,vb as A,vc as q,xb as v,yb as _,za as x,zb as g}from"./chunk-ZJD4PHQZ.js";var ee=["input"];function te(l,r){if(l&1){let u=v();w(0,"TimesIcon",5),_("click",function(){o(u);let i=g(2);return h(i.clear())}),k()}l&2&&(f("styleClass","p-inputmask-clear-icon"),C("data-pc-section","clearIcon"))}function ie(l,r){}function se(l,r){l&1&&m(0,ie,0,0,"ng-template")}function ne(l,r){if(l&1){let u=v();w(0,"span",6),_("click",function(){o(u);let i=g(2);return h(i.clear())}),m(1,se,1,0,null,7),k()}if(l&2){let u=g(2);C("data-pc-section","clearIcon"),c(),f("ngTemplateOutlet",u.clearIconTemplate)}}function ae(l,r){if(l&1&&(R(0),m(1,te,1,2,"TimesIcon",3)(2,ne,2,2,"span",4),A()),l&2){let u=g();c(),f("ngIf",!u.clearIconTemplate),c(),f("ngIf",u.clearIconTemplate)}}var le={provide:H,useExisting:M(()=>re),multi:!0},re=(()=>{let r=class r{get mask(){return this._mask}set mask(t){this._mask=t,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}constructor(t,i,e,s){this.document=t,this.platformId=i,this.el=e,this.cd=s,this.type="text",this.slotChar="_",this.autoClear=!0,this.showClear=!1,this.characterPattern="[A-Za-z]",this.keepBuffer=!1,this.onComplete=new p,this.onFocus=new p,this.onBlur=new p,this.onInput=new p,this.onKeydown=new p,this.onClear=new p,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.androidChrome=!0}ngOnInit(){if(I(this.platformId)){let t=navigator.userAgent;this.androidChrome=/chrome/i.test(t)&&/android/i.test(t)}this.initMask()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this.clearIconTemplate=t.template;break}})}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let t=this.mask.split("");for(let i=0;i<t.length;i++){let e=t[i];e=="?"?(this.len--,this.partialPosition=i):this.defs[e]?(this.tests.push(new RegExp(this.defs[e])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<t.length;i++){let e=t[i];e!="?"&&(this.defs[e]?this.buffer.push(this.getPlaceholder(i)):this.buffer.push(e))}this.defaultBuffer=this.buffer.join("")}writeValue(t){this.value=t,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.value==null||this.value==null?this.inputViewChild.nativeElement.value="":this.inputViewChild.nativeElement.value=this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}caret(t,i){let e,s,n;if(!(!this.inputViewChild?.nativeElement.offsetParent||this.inputViewChild.nativeElement!==this.inputViewChild.nativeElement.ownerDocument.activeElement))if(typeof t=="number")s=t,n=typeof i=="number"?i:s,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(s,n):this.inputViewChild.nativeElement.createTextRange&&(e=this.inputViewChild.nativeElement.createTextRange(),e.collapse(!0),e.moveEnd("character",n),e.moveStart("character",s),e.select());else return this.inputViewChild.nativeElement.setSelectionRange?(s=this.inputViewChild.nativeElement.selectionStart,n=this.inputViewChild.nativeElement.selectionEnd):this.document&&this.document.selection.createRange&&(e=this.document.createRange(),s=0-e.duplicate().moveStart("character",-1e5),n=s+e.text.length),{begin:s,end:n}}isCompleted(){let t;for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(t){return t<this.slotChar.length?this.slotChar.charAt(t):this.slotChar.charAt(0)}seekNext(t){for(;++t<this.len&&!this.tests[t];);return t}seekPrev(t){for(;--t>=0&&!this.tests[t];);return t}shiftL(t,i){let e,s;if(!(t<0)){for(e=t,s=this.seekNext(i);e<this.len;e++)if(this.tests[e]){if(s<this.len&&this.tests[e].test(this.buffer[s]))this.buffer[e]=this.buffer[s],this.buffer[s]=this.getPlaceholder(s);else break;s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}}shiftR(t){let i,e,s,n;for(i=t,e=this.getPlaceholder(t);i<this.len;i++)if(this.tests[i])if(s=this.seekNext(i),n=this.buffer[i],this.buffer[i]=e,s<this.len&&this.tests[s].test(n))e=n;else break}handleAndroidInput(t){var i=this.inputViewChild?.nativeElement.value,e=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);e.begin>0&&!this.tests[e.begin-1];)e.begin--;if(e.begin===0)for(;e.begin<this.firstNonMaskPos&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);e.begin<this.len&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(t){if(this.focused=!1,this.onModelTouched(),this.keepBuffer||this.checkVal(),this.updateFilledState(),this.onBlur.emit(t),this.inputViewChild?.nativeElement.value!=this.focusText||this.inputViewChild?.nativeElement.value!=this.value){this.updateModel(t);let i=this.document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild?.nativeElement.dispatchEvent(i)}}onInputKeydown(t){if(this.readonly)return;let i=t.which||t.keyCode,e,s,n,a;I(this.platformId)&&(a=/iphone/i.test(b.getUserAgent())),this.oldVal=this.inputViewChild?.nativeElement.value,this.onKeydown.emit(t),i===8||i===46||a&&i===127?(e=this.caret(),s=e.begin,n=e.end,n-s===0&&(s=i!==46?this.seekPrev(s):n=this.seekNext(s-1),n=i===46?this.seekNext(n):n),this.clearBuffer(s,n),this.keepBuffer?this.shiftL(s,n-2):this.shiftL(s,n-1),this.updateModel(t),this.onInput.emit(t),t.preventDefault()):i===13?(this.onInputBlur(t),this.updateModel(t)):i===27&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(t),t.preventDefault())}onKeyPress(t){if(!this.readonly){var i=t.which||t.keyCode,e=this.caret(),s,n,a,E;t.ctrlKey||t.altKey||t.metaKey||i<32||i>34&&i<41||(i&&i!==13&&(e.end-e.begin!==0&&(this.clearBuffer(e.begin,e.end),this.shiftL(e.begin,e.end-1)),s=this.seekNext(e.begin-1),s<this.len&&(n=String.fromCharCode(i),this.tests[s].test(n)&&(this.shiftR(s),this.buffer[s]=n,this.writeBuffer(),a=this.seekNext(s),b.isClient()&&/android/i.test(b.getUserAgent())?setTimeout(()=>{this.caret(a)},0):this.caret(a),e.begin<=this.lastRequiredNonMaskPos&&(E=this.isCompleted()),this.onInput.emit(t))),t.preventDefault()),this.updateModel(t),this.updateFilledState(),E&&this.onComplete.emit())}}clearBuffer(t,i){if(!this.keepBuffer){let e;for(e=t;e<i&&e<this.len;e++)this.tests[e]&&(this.buffer[e]=this.getPlaceholder(e))}}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(t){let i=this.inputViewChild?.nativeElement.value,e=-1,s,n,a;for(s=0,a=0;s<this.len;s++)if(this.tests[s]){for(this.buffer[s]=this.getPlaceholder(s);a++<i.length;)if(n=i.charAt(a-1),this.tests[s].test(n)){this.keepBuffer||(this.buffer[s]=n),e=s;break}if(a>i.length){this.clearBuffer(s+1,this.len);break}}else this.buffer[s]===i.charAt(a)&&a++,s<this.partialPosition&&(e=s);return t?this.writeBuffer():e+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild?.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild?.nativeElement.value.substring(0,e+1)),this.partialPosition?s:this.firstNonMaskPos}onInputFocus(t){if(this.readonly)return;this.focused=!0,clearTimeout(this.caretTimeoutId);let i;this.focusText=this.inputViewChild?.nativeElement.value,i=this.keepBuffer?this.inputViewChild?.nativeElement.value.length:this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild?.nativeElement===this.inputViewChild?.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask?.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(t)}onInputChange(t){this.androidChrome?this.handleAndroidInput(t):this.handleInputChange(t),this.onInput.emit(t)}handleInputChange(t){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let t=[];for(let i=0;i<this.buffer.length;i++){let e=this.buffer[i];this.tests[i]&&e!=this.getPlaceholder(i)&&t.push(e)}return t.join("")}updateModel(t){let i=this.unmask?this.getUnmaskedValue():t.target.value;(i!==null||i!==void 0)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild?.nativeElement&&this.inputViewChild.nativeElement.value!=""}focus(){this.inputViewChild?.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}};r.\u0275fac=function(i){return new(i||r)(d(q),d(x),d(N),d(j))},r.\u0275cmp=P({type:r,selectors:[["p-inputMask"]],contentQueries:function(i,e,s){if(i&1&&F(s,G,4),i&2){let n;V(n=y())&&(e.templates=n)}},viewQuery:function(i,e){if(i&1&&D(ee,7),i&2){let s;V(s=y())&&(e.inputViewChild=s.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(i,e){i&2&&S("p-inputwrapper-filled",e.filled)("p-inputwrapper-focus",e.focused)("p-inputmask-clearable",e.showClear&&!e.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:"autoClear",showClear:"showClear",style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaRequired:"ariaRequired",disabled:"disabled",readonly:"readonly",unmask:"unmask",name:"name",required:"required",characterPattern:"characterPattern",autoFocus:"autoFocus",autocomplete:"autocomplete",keepBuffer:"keepBuffer",mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[L([le])],decls:3,vars:21,consts:[["input",""],["pInputText","","pAutoFocus","",1,"p-inputmask",3,"focus","blur","keydown","keypress","input","paste","ngStyle","ngClass","disabled","readonly","autofocus"],[4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-inputmask-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-inputmask-clear-icon",3,"click"],[4,"ngTemplateOutlet"]],template:function(i,e){if(i&1){let s=v();w(0,"input",1,0),_("focus",function(a){return o(s),h(e.onInputFocus(a))})("blur",function(a){return o(s),h(e.onInputBlur(a))})("keydown",function(a){return o(s),h(e.onInputKeydown(a))})("keypress",function(a){return o(s),h(e.onKeyPress(a))})("input",function(a){return o(s),h(e.onInputChange(a))})("paste",function(a){return o(s),h(e.handleInputChange(a))}),k(),m(2,ae,3,2,"ng-container",2)}i&2&&(f("ngStyle",e.style)("ngClass",e.styleClass)("disabled",e.disabled)("readonly",e.readonly)("autofocus",e.autoFocus),C("id",e.inputId)("type",e.type)("name",e.name)("placeholder",e.placeholder)("title",e.title)("size",e.size)("autocomplete",e.autocomplete)("maxlength",e.maxlength)("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy)("aria-required",e.ariaRequired)("required",e.required)("data-pc-name","inputmask")("data-pc-section","root"),c(2),f("ngIf",e.value!=null&&e.filled&&e.showClear&&!e.disabled))},dependencies:[K,O,U,Q,X,J,$],styles:[`@layer primeng{.p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}}
`],encapsulation:2,changeDetection:0});let l=r;return l})(),xe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=B({type:r}),r.\u0275inj=T({imports:[z,Y,W,Z]});let l=r;return l})();export{re as a,xe as b};
