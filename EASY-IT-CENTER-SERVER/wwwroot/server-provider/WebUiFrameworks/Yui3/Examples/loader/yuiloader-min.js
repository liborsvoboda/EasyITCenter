
YAHOO.Loader=function(){scripts={};isLoaded={};transActions=[];holder=document.createElement('span');holder.id='yui_loader_holder';document.body.appendChild(holder);return{scripts:scripts,isLoaded:isLoaded,holder:holder,transActions:transActions};}();YAHOO.Loader.onFileLoad=function(fileName,tId,status,o){};YAHOO.Loader.onFileFail=function(fileName,tId,status,o){};YAHOO.Loader.insertScript=function(name){if(!this.isLoaded[name]){var _file=name;_yuiloader_handler.argument=_file;var tmp=YAHOO.util.Connect.asyncRequest('GET',_file,_yuiloader_handler);this.transActions[tmp.tId]=_file;this.isLoaded[name]=_file;}};YAHOO.Loader.insertGood=function(o){this.holder.innerHTML+='<script>'+eval(o.responseText)+'</script>';this.onFileLoad(this.transActions[o.tId],o.tId,o.status,o);};YAHOO.Loader.insertBad=function(o){o.fileName=this.transActions[o.tId];this.onFileFail(this.transActions[o.tId],o.tId,o.status,o);};YAHOO.Loader.add=function(file){if(file instanceof Array){for(var i=0;i<file.length;i++){this.scripts[files[i]]=file[i];}}else{this.scripts[files]=file;}};YAHOO.Loader.load=function(thisFile){if(thisFile){if(thisFile instanceof Array){for(var i=0;i<thisFile.length;i++){this.insertScript(thisFile[i]);}}else{this.insertScript(thisFile);}}else{for(var i in this.scripts){this.insertScript(this.scripts[i]);}}};var _yuiloader_handler={success:YAHOO.Loader.insertGood,failure:YAHOO.Loader.insertBad,scope:YAHOO.Loader};