(function(){YAHOO.widget.SimpleEditor.prototype._createCurrentElement=function(G,F){G=((G)?G:"a");var M=null,D=[],A=this._getDoc();if(this.currentFont){if(!F){F={}}F.fontFamily=this.currentFont;this.currentFont=null}this.currentElement=[];var C=function(S,U){var T=null;S=((S)?S:"span");S=S.toLowerCase();switch(S){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":T=A.createElement(S);break;default:T=A.createElement(S);if(S==="span"){YAHOO.util.Dom.addClass(T,"yui-tag-"+S);YAHOO.util.Dom.addClass(T,"yui-tag");T.setAttribute("tag",S)}for(var R in U){if(YAHOO.lang.hasOwnProperty(U,R)){T.style[R]=U[R]}}break}return T};if(!this._hasSelection()){if(this._getDoc().queryCommandEnabled("insertimage")){this._getDoc().execCommand("insertimage",false,"yui-tmp-img");var L=this._getDoc().getElementsByTagName("img");for(var J=0;J<L.length;J++){if(L[J].getAttribute("src",2)=="yui-tmp-img"){D=C(G,F);L[J].parentNode.replaceChild(D,L[J]);this.currentElement[this.currentElement.length]=D}}}else{if(this.currentEvent){M=YAHOO.util.Event.getTarget(this.currentEvent)}else{M=this._getDoc().body}}if(M){D=C(G,F);if(this._isElement(M,"body")||this._isElement(M,"html")){if(this._isElement(M,"html")){M=this._getDoc().body}M.appendChild(D)}else{if(M.nextSibling){M.parentNode.insertBefore(D,M.nextSibling)}else{M.parentNode.appendChild(D)}}this.currentElement[this.currentElement.length]=D;this.currentEvent=null;if(this.browser.webkit){this._getSelection().setBaseAndExtent(D,0,D,0);if(this.browser.webkit3){this._getSelection().collapseToStart()}else{this._getSelection().collapse(true)}}}}else{this._setEditorStyle(true);this._getDoc().execCommand("fontname",false,"yui-tmp");var Q=[],I,H=["font","span","i","b","u"];if(!this._isElement(this._getSelectedElement(),"body")){H[H.length]=this._getDoc().getElementsByTagName(this._getSelectedElement().tagName);H[H.length]=this._getDoc().getElementsByTagName(this._getSelectedElement().parentNode.tagName)}for(var P=0;P<H.length;P++){var B=this._getDoc().getElementsByTagName(H[P]);for(var O=0;O<B.length;O++){Q[Q.length]=B[O]}}for(var K=0;K<Q.length;K++){if((YAHOO.util.Dom.getStyle(Q[K],"font-family")=="yui-tmp")||(Q[K].face&&(Q[K].face=="yui-tmp"))){D=C(Q[K].tagName,F);D.innerHTML=Q[K].innerHTML;if(this._isElement(Q[K],"ol")||(this._isElement(Q[K],"ul"))){var E=Q[K].getElementsByTagName("li")[0];Q[K].style.fontFamily="inherit";E.style.fontFamily="inherit";D.innerHTML=E.innerHTML;E.innerHTML="";E.appendChild(D);this.currentElement[this.currentElement.length]=D}else{if(this._isElement(Q[K],"li")){Q[K].innerHTML="";Q[K].appendChild(D);Q[K].style.fontFamily="inherit";this.currentElement[this.currentElement.length]=D}else{if(Q[K].parentNode){Q[K].parentNode.replaceChild(D,Q[K]);this.currentElement[this.currentElement.length]=D;this.currentEvent=null;if(this.browser.webkit){this._getSelection().setBaseAndExtent(D,0,D,0);if(this.browser.webkit3){this._getSelection().collapseToStart()}else{this._getSelection().collapse(true)}}if(this.browser.ie&&F&&F.fontSize){this._getSelection().empty()}if(this.browser.gecko){this._getSelection().collapseToStart()}}}}}}var N=this.currentElement.length;for(var O=0;O<N;O++){if((O+1)!=N){if(this.currentElement[O]&&this.currentElement[O].nextSibling){if(this._isElement(this.currentElement[O],"br")){this.currentElement[this.currentElement.length]=this.currentElement[O].nextSibling}}}}}}})();