<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CSharpEditor: CSharpEditor/InterprocessDebugger.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doxy.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CSharpEditor
   &#160;<span id="projectnumber">1.1.2</span>
   </div>
   <div id="projectbrief">A C# source code editor with syntax highlighting, intelligent code completion and real-time compilation error checking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_interprocess_debugger_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InterprocessDebugger.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    CSharpEditor - A C# source code editor with syntax highlighting, intelligent</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    code completion and real-time compilation error checking.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Copyright (C) 2021  Giorgio Bianchini</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> </span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    the Free Software Foundation, version 3.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> Avalonia.Controls;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> Avalonia.LogicalTree;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> Microsoft.CodeAnalysis;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> System.Collections;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> System.Collections.Immutable;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> System.Diagnostics;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using</span> System.IO;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> System.IO.Pipes;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> System.Reflection;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> System.Text.Json;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using</span> System.Threading.Tasks;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_c_sharp_editor.html">CSharpEditor</a></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">    /// A class used to analyse breakpoints on a separate process (to avoid deadlocks with breakpoints in synchronous code).</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html">   39</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html">InterprocessDebuggerServer</a> : IDisposable</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keyword">private</span> Process ClientProcess;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> ClientExePath;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keyword">private</span> List&lt;string&gt; InitialArguments;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        NamedPipeServerStream PipeServerOut;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        NamedPipeServerStream PipeServerIn;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        StreamWriter PipeServerOutWriter;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        StreamReader PipeServerInReader;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">private</span> Func&lt;int, int&gt; GetClientPid;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> disposedValue;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">        /// Initializes a new &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt;, starting the client process and establishing pipes to communicate with it.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">        /// &lt;param name=&quot;clientExePath&quot;&gt;The path to the executable of the client process.&lt;/param&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aec7f3fa664378e685d8531a308ecfe1c">   55</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aec7f3fa664378e685d8531a308ecfe1c">InterprocessDebuggerServer</a>(<span class="keywordtype">string</span> clientExePath)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            this.InitializeServer(clientExePath, <span class="keyword">new</span> List&lt;string&gt;(), <span class="keyword">null</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">        /// Initializes a new &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt;, starting the client process and establishing pipes to communicate with it.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">        /// &lt;param name=&quot;clientExePath&quot;&gt;The path to the executable of the client process.&lt;/param&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">        /// &lt;param name=&quot;initialArguments&quot;&gt;The arguments that will be used to start the client process. The additional arguments specific to the &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt; will be appended after these.&lt;/param&gt;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a9a36eff3f1594eaba48f75ddbab2e9bd">   65</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a9a36eff3f1594eaba48f75ddbab2e9bd">InterprocessDebuggerServer</a>(<span class="keywordtype">string</span> clientExePath, IEnumerable&lt;string&gt; initialArguments)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            this.InitializeServer(clientExePath, initialArguments.ToList(), <span class="keyword">null</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">        /// Initializes a new &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt;, starting the client process and establishing pipes to communicate with it.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">        /// &lt;param name=&quot;clientExePath&quot;&gt;The path to the executable of the client process.&lt;/param&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">        /// &lt;param name=&quot;initialArguments&quot;&gt;The arguments that will be used to start the client process. The additional arguments specific to the &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt; will be appended after these.&lt;/param&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">        /// &lt;param name=&quot;getClientPid&quot;&gt;A method that returns the process identifier (PID) of the client debugger process. The argument of this method is the PID of the process that has been started by the server. If this is &lt;see langword=&quot;null&quot;/&gt;, it is assumed that the process started by the server is the client debugger process.&lt;/param&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aceda16cd1829ba41c6e94bfb574d75db">   76</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aceda16cd1829ba41c6e94bfb574d75db">InterprocessDebuggerServer</a>(<span class="keywordtype">string</span> clientExePath, IEnumerable&lt;string&gt; initialArguments, Func&lt;int, int&gt; getClientPid)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            this.InitializeServer(clientExePath, initialArguments.ToList(), getClientPid);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> InitializeServer(<span class="keywordtype">string</span> clientExePath, List&lt;string&gt; initialArguments, Func&lt;int, int&gt; getClientPid)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            ClientExePath = clientExePath;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            ClientProcess = <span class="keyword">new</span> Process();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            ClientProcess.StartInfo.FileName = clientExePath;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            InitialArguments = initialArguments;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordtype">string</span> pipeNameOut = Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordtype">string</span> pipeNameIn = Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            PipeServerOut?.Dispose();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            PipeServerIn?.Dispose();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            PipeServerOut = <span class="keyword">new</span> NamedPipeServerStream(pipeNameOut, PipeDirection.Out);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            PipeServerIn = <span class="keyword">new</span> NamedPipeServerStream(pipeNameIn, PipeDirection.In);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            PipeServerOutWriter = <span class="keyword">new</span> StreamWriter(PipeServerOut);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            PipeServerInReader = <span class="keyword">new</span> StreamReader(PipeServerIn);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> arg <span class="keywordflow">in</span> initialArguments)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                ClientProcess.StartInfo.ArgumentList.Add(arg);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            ClientProcess.StartInfo.ArgumentList.Add(Process.GetCurrentProcess().Id.ToString());</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            ClientProcess.StartInfo.ArgumentList.Add(pipeNameOut);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            ClientProcess.StartInfo.ArgumentList.Add(pipeNameIn);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            ClientProcess.StartInfo.UseShellExecute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            ClientProcess.Start();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            PipeServerOut.WaitForConnection();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            PipeServerIn.WaitForConnection();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            this.GetClientPid = getClientPid;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">if</span> (GetClientPid != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordtype">int</span> newPid = GetClientPid(ClientProcess.Id);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                ClientProcess = Process.GetProcessById(newPid);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordtype">string</span> guid = System.Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            PipeServerOutWriter.WriteLine(guid);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            PipeServerOutWriter.Flush();            </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordtype">string</span> input = PipeServerInReader.ReadLine();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">if</span> (input != guid)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ApplicationException(<span class="stringliteral">&quot;The client debugger process answered incorrectly!\n&quot;</span> + input);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">        /// Returns a function to handle breakpoints in synchronous methods by transferring the breakpoint information to the client process. Pass the output of this method as an argument to &lt;see cref=&quot;Editor.Compile(Func{BreakpointInfo, bool}, Func{BreakpointInfo, Task{bool}})&quot;/&gt;. The function will lock until the client process signals that execution can resume.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">        /// &lt;param name=&quot;editor&quot;&gt;The &lt;see cref=&quot;Editor&quot;/&gt; whose code will be debugged. Note that no reference to this object is kept after this method returns.&lt;/param&gt;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">        /// &lt;returns&gt;A function to handle breakpoints in synchronous methods by transferring the breakpoint information to the client process. If the client process is not executing when a breakpoint occurs, it is started again.&lt;/returns&gt;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a87ffb08b0e69a7e599f12f1cb780b2b5">  143</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> Func&lt;BreakpointInfo, bool&gt; <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a87ffb08b0e69a7e599f12f1cb780b2b5">SynchronousBreak</a>(<a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a> editor)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            IEnumerable&lt;MetadataReference&gt; editorReferences = editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a24774cd2c8f07561aefc4f59cbb6c333">References</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordtype">string</span> text = editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a88a3a8f146b6e4e5d1d5b582affb6343">Text</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordtype">string</span> preSource = editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#aa7c7077ceefc90e0cb0936c813aa8a4e">PreSource</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordtype">string</span> postSource = editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#ad51afe4effabbdc759f5aa3ba33e57c3">PostSource</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">return</span> (info) =&gt;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">if</span> (ClientProcess.HasExited)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    InitializeServer(ClientExePath, InitialArguments, GetClientPid);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                PipeServerOutWriter.WriteLine(<span class="stringliteral">&quot;Init&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                Dictionary&lt;string, object&gt; objectCache = <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                Dictionary&lt;string, (string, VariableTypes, string)&gt; localVariables = <span class="keyword">new</span> Dictionary&lt;<span class="keywordtype">string</span>, (<span class="keywordtype">string</span>, VariableTypes, <span class="keywordtype">string</span>)&gt;();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                Dictionary&lt;string, TaggedText[]&gt; localVariablesDisplayParts = <span class="keyword">new</span> Dictionary&lt;string, TaggedText[]&gt;();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">foreach</span> (KeyValuePair&lt;string, object&gt; variable <span class="keywordflow">in</span> info.LocalVariables)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                    <span class="keywordtype">string</span> guid = System.Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                    objectCache.Add(guid, variable.Value);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                    localVariablesDisplayParts.Add(variable.Key, info.LocalVariableDisplayParts[variable.Key]);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    (VariableTypes variableType, <span class="keywordtype">string</span> valueJSON) = GetVariableTypeAndJSONValue(variable.Value);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    localVariables.Add(variable.Key, (guid, variableType, valueJSON));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordtype">string</span> localVariablesDisplayPartsJson = JsonSerializer.Serialize((from el in localVariablesDisplayParts select <span class="keyword">new</span> <span class="keywordtype">string</span>[] { el.Key, JsonSerializer.Serialize((from el2 in el.Value select (ReadWriteTaggedText)el2).ToArray()) }).ToArray());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordtype">string</span> localVariablesJson = JsonSerializer.Serialize((from el in localVariables select <span class="keyword">new</span> <span class="keywordtype">string</span>[] { el.Key, el.Value.Item1, JsonSerializer.Serialize(el.Value.Item2), el.Value.Item3 }).ToArray());</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                List&lt;string&gt; references = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">foreach</span> (MetadataReference reference <span class="keywordflow">in</span> editorReferences)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="keywordflow">if</span> (reference is PortableExecutableReference port)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        references.Add(port.FilePath);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordtype">string</span> message = JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { localVariablesDisplayPartsJson, localVariablesJson, text, info.BreakpointSpan.Start.ToString(), preSource, postSource, JsonSerializer.Serialize(references) });</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                PipeServerOutWriter.WriteLine(message);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                PipeServerOutWriter.Flush();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">while</span> (!ClientProcess.HasExited)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordtype">string</span> line = PipeServerInReader.ReadLine();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    <span class="keywordflow">if</span> (!ClientProcess.HasExited &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrEmpty(line))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <span class="keywordtype">string</span>[] inputMessage = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(line);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keywordflow">if</span> (inputMessage[0] == <span class="stringliteral">&quot;GetItems&quot;</span>)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                            IEnumerable enumerable = (IEnumerable)objectCache[inputMessage[1]];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                            List&lt;string[]&gt; items = <span class="keyword">new</span> List&lt;string[]&gt;();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            <span class="keywordflow">foreach</span> (<span class="keywordtype">object</span> obj <span class="keywordflow">in</span> enumerable)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                <span class="keywordtype">string</span> guid = System.Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                objectCache.Add(guid, obj);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                (VariableTypes variableType, <span class="keywordtype">string</span> valueJSON) = GetVariableTypeAndJSONValue(obj);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                items.Add(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { guid, JsonSerializer.Serialize(variableType), valueJSON });</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                            }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                            PipeServerOutWriter.WriteLine(JsonSerializer.Serialize(items));</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                            PipeServerOutWriter.Flush();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inputMessage[0] == <span class="stringliteral">&quot;GetProperty&quot;</span>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                            <span class="keywordtype">bool</span> isProperty = Convert.ToBoolean(inputMessage[3]);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            <span class="keywordtype">object</span> owner = objectCache[inputMessage[1]];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                            <span class="keywordtype">object</span> obj;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                            {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                <span class="keywordflow">if</span> (isProperty)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                    obj = owner.GetType().InvokeMember(inputMessage[2], BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.GetProperty, <span class="keyword">null</span>, owner, <span class="keyword">null</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                    obj = owner.GetType().InvokeMember(inputMessage[2], BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.GetField, <span class="keyword">null</span>, owner, <span class="keyword">null</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                            {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                obj = <span class="stringliteral">&quot;An error occurred while accessing this member:\n&quot;</span> + ex.Message;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                            <span class="keywordtype">string</span> guid = System.Guid.NewGuid().ToString(<span class="stringliteral">&quot;N&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            objectCache.Add(guid, obj);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            (VariableTypes variableType, <span class="keywordtype">string</span> valueJSON) = GetVariableTypeAndJSONValue(obj);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                            PipeServerOutWriter.WriteLine(JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { guid, JsonSerializer.Serialize(variableType), valueJSON }));</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                            PipeServerOutWriter.Flush();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                        }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inputMessage[0] == <span class="stringliteral">&quot;Resume&quot;</span>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            <span class="keywordflow">return</span> Convert.ToBoolean(inputMessage[1]);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            };</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">        /// Returns a function to handle breakpoints in asynchronous methods by transferring the breakpoint information to the client process. Pass the output of this method as an argument to &lt;see cref=&quot;Editor.Compile(Func{BreakpointInfo, bool}, Func{BreakpointInfo, Task{bool}})&quot;/&gt;. This function will actually execute synchronously and lock until the client process signals that execution can resume.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">        /// &lt;param name=&quot;editor&quot;&gt;The &lt;see cref=&quot;Editor&quot;/&gt; whose code will be debugged. Note that no reference to this object is kept after this method returns.&lt;/param&gt;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">        /// &lt;returns&gt;A function to handle breakpoints in asynchronous methods by transferring the breakpoint information to the client process. If the client process is not executing when a breakpoint occurs, it is started again.&lt;/returns&gt;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#ab8bc1cda872980db9a2a328df3efc9f0">  267</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> Func&lt;BreakpointInfo, Task&lt;bool&gt;&gt; <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#ab8bc1cda872980db9a2a328df3efc9f0">AsynchronousBreak</a>(<a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a> editor)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            Func&lt;BreakpointInfo, bool&gt; syncBreak = SynchronousBreak(editor);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">return</span> (info) =&gt;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordtype">bool</span> tbr = syncBreak(info);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="keywordflow">return</span> Task&lt;bool&gt;.FromResult(tbr);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            };</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> (VariableTypes variableType, <span class="keywordtype">string</span> valueJSON) GetVariableTypeAndJSONValue(<span class="keywordtype">object</span> variableValue)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            VariableTypes variableType = VariableTypes.Other;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordtype">string</span> valueJSON = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">if</span> (variableValue is <span class="keywordtype">string</span> str)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                variableType = VariableTypes.String;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                valueJSON = JsonSerializer.Serialize(str);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is <span class="keywordtype">char</span> chr)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                variableType = VariableTypes.Char;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                valueJSON = JsonSerializer.Serialize(chr.ToString());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is <span class="keywordtype">long</span> || variableValue is <span class="keywordtype">int</span> || variableValue is <span class="keywordtype">double</span> || variableValue is decimal || variableValue is ulong || variableValue is uint || variableValue is <span class="keywordtype">short</span> || variableValue is ushort || variableValue is <span class="keywordtype">byte</span> || variableValue is sbyte || variableValue is <span class="keywordtype">float</span>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                variableType = VariableTypes.Number;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                valueJSON = JsonSerializer.Serialize(Convert.ToString(variableValue, System.Globalization.CultureInfo.InvariantCulture));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is <span class="keywordtype">bool</span> bol)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                variableType = VariableTypes.Bool;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                valueJSON = JsonSerializer.Serialize(bol.ToString().ToLower());</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is <span class="keyword">null</span>)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                variableType = VariableTypes.Null;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                valueJSON = JsonSerializer.Serialize(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is IEnumerable)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordtype">string</span> enumerableType = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordtype">int</span> count = -1;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">foreach</span> (Type interf <span class="keywordflow">in</span> ((Type)variableValue.GetType()).GetInterfaces())</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="keywordflow">if</span> (interf.IsGenericType &amp;&amp; interf.GetGenericTypeDefinition() == typeof(IEnumerable&lt;&gt;))</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        <span class="keywordflow">foreach</span> (Type tp <span class="keywordflow">in</span> interf.GetGenericArguments())</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                            enumerableType += tp.Name + <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <span class="keywordflow">if</span> (enumerableType.Length &gt; 2)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    enumerableType = enumerableType.Substring(0, enumerableType.Length - 2);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">if</span> (variableValue is ICollection collection)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    count = collection.Count;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                variableType = VariableTypes.IEnumerable;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                valueJSON = JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { enumerableType, count.ToString() });</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue is Enum)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                variableType = VariableTypes.Enum;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                valueJSON = JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { variableValue.GetType().Name, variableValue.ToString() });</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">if</span> (variableValue.GetType().IsClass)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    <span class="keywordflow">if</span> (variableValue is Delegate)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        variableType = VariableTypes.Delegate;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        variableType = VariableTypes.Class;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variableValue.GetType().IsInterface)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    variableType = VariableTypes.Interface;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    variableType = VariableTypes.Other;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                List&lt;System.Reflection.MemberInfo&gt; propertyList = <span class="keyword">new</span> List&lt;System.Reflection.MemberInfo&gt;();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">foreach</span> (System.Reflection.MemberInfo prop in ((Type)variableValue.GetType()).GetMembers(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic))</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    <span class="keywordflow">if</span> (prop.MemberType == System.Reflection.MemberTypes.Property || prop.MemberType == System.Reflection.MemberTypes.Field)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        propertyList.Add(prop);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                propertyList = <span class="keyword">new</span> List&lt;MemberInfo&gt;(from el in propertyList where (el.MemberType == MemberTypes.Field &amp;&amp; !((FieldInfo)el).IsStatic) || (el.MemberType == MemberTypes.Property &amp;&amp; !((((PropertyInfo)el).GetMethod != <span class="keyword">null</span> &amp;&amp; ((PropertyInfo)el).GetMethod.IsStatic) || (((PropertyInfo)el).SetMethod != <span class="keyword">null</span> &amp;&amp; ((PropertyInfo)el).SetMethod.IsStatic))) orderby el.Name ascending select el);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                List&lt;string[]&gt; properties = <span class="keyword">new</span> List&lt;string[]&gt;();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span> (propertyList.Count &gt; 0)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <span class="keywordflow">foreach</span> (MemberInfo property <span class="keywordflow">in</span> propertyList)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        <span class="keywordflow">if</span> (property.MemberType == MemberTypes.Field)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                        {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                            {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                properties.Add(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="keyword">property</span>.Name, <span class="keywordtype">bool</span>.FalseString, (!((FieldInfo)property).IsPublic).ToString() });</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                            }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            <span class="keywordflow">catch</span> { }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (property.MemberType == MemberTypes.Property)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                            {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                properties.Add(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="keyword">property</span>.Name, <span class="keywordtype">bool</span>.TrueString, (!(((PropertyInfo)property).GetMethod?.IsPublic == <span class="keyword">true</span> || ((PropertyInfo)property).SetMethod?.IsPublic == <span class="keyword">true</span>)).ToString() });</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                            <span class="keywordflow">catch</span> { }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                valueJSON = JsonSerializer.Serialize(properties);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">return</span> (variableType, valueJSON);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">        /// Kills the debugger client process and frees the pipe resources.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">        /// &lt;param name=&quot;disposing&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> Dispose(<span class="keywordtype">bool</span> disposing)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> (!disposedValue)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">if</span> (disposing)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    PipeServerOutWriter.WriteLine(<span class="stringliteral">&quot;Abort&quot;</span>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    PipeServerOutWriter.Flush();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    PipeServerOutWriter.Dispose();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    PipeServerInReader.Dispose();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    PipeServerOut.Dispose();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    PipeServerIn.Dispose();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                ClientProcess.Kill();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                disposedValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">        /// Destructor for the debugger server, which also kills the client process.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span>        ~InterprocessDebuggerServer()</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            Dispose(disposing: <span class="keyword">false</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">        /// Kills the debugger client process and frees the pipe resources.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a14a5f0a361e204ffc0c4ada5618da861">  442</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a14a5f0a361e204ffc0c4ada5618da861">Dispose</a>()</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            Dispose(disposing: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            GC.SuppressFinalize(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    /// A control that shows breakpoint information for breakpoints reached on a server process. This control contains a read-only &lt;see cref=&quot;CSharpEditor.Editor&quot;/&gt; to display the code, which is reused as much as possible to reduce the initialization time.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html">  453</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html">InterprocessDebuggerClient</a> : UserControl, IDisposable</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        readonly NamedPipeClientStream PipeClientIn;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        readonly NamedPipeClientStream PipeClientOut;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        readonly StreamReader PipeClientInReader;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        readonly StreamWriter PipeClientOutWriter;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        readonly Process ParentProcess;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> ParentProcessExitedRaised = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">        /// Invoked when the server process that started this client has been closed or has signaled that all client activity should cease.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a0bbd888a5540414dde5d998c9eea4e6c">  466</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keyword">event</span> EventHandler&lt;EventArgs&gt; <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a0bbd888a5540414dde5d998c9eea4e6c">ParentProcessExited</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">        /// Invoked when the server process signals that a breakpoint has been reached.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#ad892fd3e787d059a6e14cc134bf2add9">  471</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keyword">event</span> EventHandler&lt;EventArgs&gt; <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#ad892fd3e787d059a6e14cc134bf2add9">BreakpointHit</a>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">        /// Invoked when the user signals that code execution can resume.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8f1c07f30f8bf6bcaf95b4be34b1b94e">  476</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keyword">event</span> EventHandler&lt;EventArgs&gt; <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8f1c07f30f8bf6bcaf95b4be34b1b94e">BreakpointResumed</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a> <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> disposedValue;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">        /// Creates a new &lt;see cref=&quot;InterprocessDebuggerClient&quot;/&gt;, using the information provided by the &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt; to open the pipes to communicate with it.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">        /// &lt;param name=&quot;args&quot;&gt;The arguments with which the &lt;see cref=&quot;InterprocessDebuggerServer&quot;/&gt; started the client process.&lt;/param&gt;</span></div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8dd6e2325bda9310d39b1a61e18414d5">  485</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8dd6e2325bda9310d39b1a61e18414d5">InterprocessDebuggerClient</a>(<span class="keywordtype">string</span>[] args)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            ParentProcess = Process.GetProcessById(<span class="keywordtype">int</span>.Parse(args[0]));</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">if</span> (ParentProcess != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                ParentProcess.EnableRaisingEvents = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                ParentProcess.Exited += (s, e) =&gt;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    <span class="keywordflow">if</span> (!ParentProcessExitedRaised)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        ParentProcessExitedRaised = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        ParentProcessExited?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                };</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            PipeClientIn = <span class="keyword">new</span> NamedPipeClientStream(<span class="stringliteral">&quot;.&quot;</span>, args[1], PipeDirection.In);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            PipeClientOut = <span class="keyword">new</span> NamedPipeClientStream(<span class="stringliteral">&quot;.&quot;</span>, args[2], PipeDirection.Out);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            PipeClientIn.Connect();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            PipeClientOut.Connect();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            PipeClientOutWriter = <span class="keyword">new</span> StreamWriter(PipeClientOut);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            PipeClientInReader = <span class="keyword">new</span> StreamReader(PipeClientIn);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordtype">string</span> message = PipeClientInReader.ReadLine();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            PipeClientOutWriter.WriteLine(message);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            PipeClientOutWriter.Flush();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">        /// Start the loop that waits for breakpoint signals from the server.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">        /// &lt;param name=&quot;e&quot;&gt;The event args.&lt;/param&gt;</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">override</span> async <span class="keywordtype">void</span> OnAttachedToLogicalTree(LogicalTreeAttachmentEventArgs e)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            base.OnAttachedToLogicalTree(e);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a> = await <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a>.<a class="code" href="class_c_sharp_editor_1_1_editor.html#ae4025b21e148ce56ad0f67cc05ecd8cd">Create</a>();</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a>.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a0518cc36b888ead3b11539b6d0ca2990">AccessType</a> = <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a>.<a class="code" href="class_c_sharp_editor_1_1_editor.html#aab07641ec51f146705d8e9c62e3aee38">AccessTypes</a>.ReadOnly;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                this.Content = <a class="code" href="class_c_sharp_editor_1_1_editor.html">Editor</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">while</span> (!ParentProcess.HasExited)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <span class="keywordtype">string</span> message = await PipeClientInReader.ReadLineAsync();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keywordflow">if</span> (message == <span class="stringliteral">&quot;Abort&quot;</span>)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    <span class="keywordflow">if</span> (!ParentProcessExitedRaised)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                        ParentProcessExitedRaised = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        ParentProcessExited?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">if</span> (!ParentProcess.HasExited &amp;&amp; message == <span class="stringliteral">&quot;Init&quot;</span>)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    message = await PipeClientInReader.ReadLineAsync();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                    <span class="keywordflow">if</span> (message == <span class="stringliteral">&quot;Abort&quot;</span>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        <span class="keywordflow">if</span> (!ParentProcessExitedRaised)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                            ParentProcessExitedRaised = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                            ParentProcessExited?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    <span class="keywordflow">if</span> (!ParentProcess.HasExited &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrEmpty(message))</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        <span class="keywordtype">string</span>[] messageParts = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(message);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        <span class="keywordtype">string</span>[][] localVariablesDisplayPartsJson = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[][]&gt;(messageParts[0]);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                        <span class="keywordtype">string</span>[][] localVariablesJson = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[][]&gt;(messageParts[1]);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                        <span class="keywordtype">string</span> sourceCode = messageParts[2];</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        <span class="keywordtype">int</span> breakpointStart = <span class="keywordtype">int</span>.Parse(messageParts[3]);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                        <span class="keywordtype">string</span> preSource = messageParts[4];</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        <span class="keywordtype">string</span> postSource = messageParts[5];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                        IEnumerable&lt;CachedMetadataReference&gt; references = from el in JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(messageParts[6]) select CachedMetadataReference.CreateFromFile(el);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                        Dictionary&lt;string, TaggedText[]&gt; localVariablesDisplayParts = <span class="keyword">new</span> Dictionary&lt;string, TaggedText[]&gt;();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                        <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span>[] item <span class="keywordflow">in</span> localVariablesDisplayPartsJson)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                        {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                            localVariablesDisplayParts.Add(item[0], (from el in JsonSerializer.Deserialize&lt;ReadWriteTaggedText[]&gt;(item[1]) select (TaggedText)el).ToArray());</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        Dictionary&lt;string, (string, VariableTypes, object)&gt; localVariables = <span class="keyword">new</span> Dictionary&lt;<span class="keywordtype">string</span>, (<span class="keywordtype">string</span>, VariableTypes, <span class="keywordtype">object</span>)&gt;();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span>[] item <span class="keywordflow">in</span> localVariablesJson)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                            VariableTypes variableType = JsonSerializer.Deserialize&lt;VariableTypes&gt;(item[2]);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                            <span class="keywordtype">object</span> variableValue = ParseVariableValue(variableType, item[3]);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                            localVariables.Add(item[0], (item[1], variableType, variableValue));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        (<span class="keywordtype">string</span> propertyId, VariableTypes propertyType, <span class="keywordtype">object</span> propertyValue) propertyOrFieldGetter(<span class="keywordtype">string</span> variableId, <span class="keywordtype">string</span> propertyName, <span class="keywordtype">bool</span> isProperty)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                        {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                            PipeClientOutWriter.WriteLine(JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;GetProperty&quot;</span>, variableId, propertyName, isProperty.ToString() }));</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                            PipeClientOutWriter.Flush();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                            <span class="keywordtype">string</span> message = PipeClientInReader.ReadLine();</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                            <span class="keywordflow">if</span> (message == <span class="stringliteral">&quot;Abort&quot;</span>)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                            {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                <span class="keywordflow">if</span> (!ParentProcessExitedRaised)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                    ParentProcessExitedRaised = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                    ParentProcessExited?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                <span class="keywordflow">return</span> (<span class="stringliteral">&quot;&quot;</span>, VariableTypes.Null, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                            }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                            <span class="keywordtype">string</span>[] output = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(message);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            VariableTypes variableType = JsonSerializer.Deserialize&lt;VariableTypes&gt;(output[1]);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                            <span class="keywordflow">return</span> (output[0], variableType, ParseVariableValue(variableType, output[2]));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                        }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        (<span class="keywordtype">string</span> itemId, VariableTypes itemType, <span class="keywordtype">object</span> itemValue)[] itemsGetter(<span class="keywordtype">string</span> variableId)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                            PipeClientOutWriter.WriteLine(JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;GetItems&quot;</span>, variableId }));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                            PipeClientOutWriter.Flush();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                            <span class="keywordtype">string</span> message = PipeClientInReader.ReadLine();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                            <span class="keywordflow">if</span> (message == <span class="stringliteral">&quot;Abort&quot;</span>)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                            {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                <span class="keywordflow">if</span> (!ParentProcessExitedRaised)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                                {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                                    ParentProcessExitedRaised = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                                    ParentProcessExited?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">new</span> (string, VariableTypes, object)[] { (<span class="stringliteral">&quot;&quot;</span>, VariableTypes.Null, <span class="stringliteral">&quot;&quot;</span>) };</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                            <span class="keywordtype">string</span>[][] output = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[][]&gt;(message);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                            <span class="keywordflow">return</span> (from el in output let variableType = JsonSerializer.Deserialize&lt;VariableTypes&gt;(el[1]) select (el[0], variableType, ParseVariableValue(variableType, el[2]))).ToArray();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                        RemoteBreakpointInfo info = <span class="keyword">new</span> RemoteBreakpointInfo(breakpointStart, localVariables, localVariablesDisplayParts, propertyOrFieldGetter, itemsGetter);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                        <span class="keywordflow">if</span> (Editor == <span class="keyword">null</span> || Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#aa7c7077ceefc90e0cb0936c813aa8a4e">PreSource</a> != preSource || Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#ad51afe4effabbdc759f5aa3ba33e57c3">PostSource</a> != postSource)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                        {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            Editor = await Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#ae4025b21e148ce56ad0f67cc05ecd8cd">Create</a>(sourceCode, preSource, postSource, references);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a0518cc36b888ead3b11539b6d0ca2990">AccessType</a> = Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#aab07641ec51f146705d8e9c62e3aee38">AccessTypes</a>.ReadOnly;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                            this.Content = Editor;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                            await Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a50680ef0a5d209b351cc6a5abb0d7f14">SetText</a>(sourceCode);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                            await Editor.SetReferences(ImmutableList.Create((from el in references select (MetadataReference)el).ToArray()));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        BreakpointHit?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        <span class="keywordtype">bool</span> shouldSuppress = await Editor.<a class="code" href="class_c_sharp_editor_1_1_editor.html#a7da1f0ea6bbfaec0c7dbb69d8ae52152">AsynchronousBreak</a>(info);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        PipeClientOutWriter.WriteLine(JsonSerializer.Serialize(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;Resume&quot;</span>, shouldSuppress.ToString() }));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        PipeClientOutWriter.Flush();</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        BreakpointResumed?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> EventArgs());</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">object</span> ParseVariableValue(VariableTypes variableType, <span class="keywordtype">string</span> item)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordtype">object</span> variableValue = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">switch</span> (variableType)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">case</span> VariableTypes.String:</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Char:</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Number:</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Bool:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Null:</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    variableValue = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>&gt;(item);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="keywordflow">case</span> VariableTypes.IEnumerable:</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        <span class="keywordtype">string</span>[] value = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(item);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                        variableValue = (value[0], <span class="keywordtype">int</span>.Parse(value[1]));</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Enum:</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                    {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                        <span class="keywordtype">string</span>[] value = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[]&gt;(item);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        variableValue = (value[0], value[1]);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Class:</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Delegate:</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Interface:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">case</span> VariableTypes.Other:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                    {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                        <span class="keywordtype">string</span>[][] value = JsonSerializer.Deserialize&lt;<span class="keywordtype">string</span>[][]&gt;(item);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        variableValue = (from el in value select (el[0], Convert.ToBoolean(el[1]), Convert.ToBoolean(el[2]))).ToArray();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">return</span> variableValue;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">        /// Closes the pipes used by this instance.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">        /// &lt;param name=&quot;disposing&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> Dispose(<span class="keywordtype">bool</span> disposing)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">if</span> (!disposedValue)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="keywordflow">if</span> (disposing)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                    PipeClientInReader.Dispose();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    PipeClientOutWriter.Dispose();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    PipeClientIn.Dispose();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                    PipeClientOut.Dispose();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                disposedValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">        /// Closes the pipes uses by this instance.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a3206044c61b361016159c95a9404c835">  729</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a3206044c61b361016159c95a9404c835">Dispose</a>()</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            Dispose(disposing: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            GC.SuppressFinalize(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_a87ffb08b0e69a7e599f12f1cb780b2b5"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a87ffb08b0e69a7e599f12f1cb780b2b5">CSharpEditor.InterprocessDebuggerServer.SynchronousBreak</a></div><div class="ttdeci">Func&lt; BreakpointInfo, bool &gt; SynchronousBreak(Editor editor)</div><div class="ttdoc">Returns a function to handle breakpoints in synchronous methods by transferring the breakpoint inform...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00143">InterprocessDebugger.cs:143</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_a50680ef0a5d209b351cc6a5abb0d7f14"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#a50680ef0a5d209b351cc6a5abb0d7f14">CSharpEditor.Editor.SetText</a></div><div class="ttdeci">async Task SetText(string text)</div><div class="ttdoc">Sets the text of the document.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00384">Editor.public.cs:384</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_a7da1f0ea6bbfaec0c7dbb69d8ae52152"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#a7da1f0ea6bbfaec0c7dbb69d8ae52152">CSharpEditor.Editor.AsynchronousBreak</a></div><div class="ttdeci">async Task&lt; bool &gt; AsynchronousBreak(BreakpointInfo info)</div><div class="ttdoc">A function to handle breakpoints in asynchronous methods. Pass this as an argument to Compile(Func&lt;Br...</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00452">Editor.public.cs:452</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html">CSharpEditor.InterprocessDebuggerServer</a></div><div class="ttdoc">A class used to analyse breakpoints on a separate process (to avoid deadlocks with breakpoints in syn...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00039">InterprocessDebugger.cs:40</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_a0518cc36b888ead3b11539b6d0ca2990"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#a0518cc36b888ead3b11539b6d0ca2990">CSharpEditor.Editor.AccessType</a></div><div class="ttdeci">AccessTypes AccessType</div><div class="ttdoc">Determines whether the text of the document can be edited by the user.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00161">Editor.public.cs:162</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_ab8bc1cda872980db9a2a328df3efc9f0"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#ab8bc1cda872980db9a2a328df3efc9f0">CSharpEditor.InterprocessDebuggerServer.AsynchronousBreak</a></div><div class="ttdeci">Func&lt; BreakpointInfo, Task&lt; bool &gt; &gt; AsynchronousBreak(Editor editor)</div><div class="ttdoc">Returns a function to handle breakpoints in asynchronous methods by transferring the breakpoint infor...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00267">InterprocessDebugger.cs:267</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html_a3206044c61b361016159c95a9404c835"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a3206044c61b361016159c95a9404c835">CSharpEditor.InterprocessDebuggerClient.Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdoc">Closes the pipes uses by this instance.</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00729">InterprocessDebugger.cs:729</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_aceda16cd1829ba41c6e94bfb574d75db"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aceda16cd1829ba41c6e94bfb574d75db">CSharpEditor.InterprocessDebuggerServer.InterprocessDebuggerServer</a></div><div class="ttdeci">InterprocessDebuggerServer(string clientExePath, IEnumerable&lt; string &gt; initialArguments, Func&lt; int, int &gt; getClientPid)</div><div class="ttdoc">Initializes a new InterprocessDebuggerServer, starting the client process and establishing pipes to c...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00076">InterprocessDebugger.cs:76</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_a9a36eff3f1594eaba48f75ddbab2e9bd"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a9a36eff3f1594eaba48f75ddbab2e9bd">CSharpEditor.InterprocessDebuggerServer.InterprocessDebuggerServer</a></div><div class="ttdeci">InterprocessDebuggerServer(string clientExePath, IEnumerable&lt; string &gt; initialArguments)</div><div class="ttdoc">Initializes a new InterprocessDebuggerServer, starting the client process and establishing pipes to c...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00065">InterprocessDebugger.cs:65</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html_a0bbd888a5540414dde5d998c9eea4e6c"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a0bbd888a5540414dde5d998c9eea4e6c">CSharpEditor.InterprocessDebuggerClient.ParentProcessExited</a></div><div class="ttdeci">EventHandler&lt; EventArgs &gt; ParentProcessExited</div><div class="ttdoc">Invoked when the server process that started this client has been closed or has signaled that all cli...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00466">InterprocessDebugger.cs:466</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html_a8dd6e2325bda9310d39b1a61e18414d5"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8dd6e2325bda9310d39b1a61e18414d5">CSharpEditor.InterprocessDebuggerClient.InterprocessDebuggerClient</a></div><div class="ttdeci">InterprocessDebuggerClient(string[] args)</div><div class="ttdoc">Creates a new InterprocessDebuggerClient, using the information provided by the InterprocessDebuggerS...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00485">InterprocessDebugger.cs:485</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html_ad892fd3e787d059a6e14cc134bf2add9"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#ad892fd3e787d059a6e14cc134bf2add9">CSharpEditor.InterprocessDebuggerClient.BreakpointHit</a></div><div class="ttdeci">EventHandler&lt; EventArgs &gt; BreakpointHit</div><div class="ttdoc">Invoked when the server process signals that a breakpoint has been reached.</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00471">InterprocessDebugger.cs:471</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_a24774cd2c8f07561aefc4f59cbb6c333"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#a24774cd2c8f07561aefc4f59cbb6c333">CSharpEditor.Editor.References</a></div><div class="ttdeci">ImmutableList&lt; MetadataReference &gt; References</div><div class="ttdoc">The list of MetadataReferences for which the compiled assembly will have bindings.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00270">Editor.public.cs:270</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_aab07641ec51f146705d8e9c62e3aee38"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#aab07641ec51f146705d8e9c62e3aee38">CSharpEditor.Editor.AccessTypes</a></div><div class="ttdeci">AccessTypes</div><div class="ttdoc">Describes the actions that the user can perform on the code.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00138">Editor.public.cs:139</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_a14a5f0a361e204ffc0c4ada5618da861"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#a14a5f0a361e204ffc0c4ada5618da861">CSharpEditor.InterprocessDebuggerServer.Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdoc">Kills the debugger client process and frees the pipe resources.</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00442">InterprocessDebugger.cs:442</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_server_html_aec7f3fa664378e685d8531a308ecfe1c"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_server.html#aec7f3fa664378e685d8531a308ecfe1c">CSharpEditor.InterprocessDebuggerServer.InterprocessDebuggerServer</a></div><div class="ttdeci">InterprocessDebuggerServer(string clientExePath)</div><div class="ttdoc">Initializes a new InterprocessDebuggerServer, starting the client process and establishing pipes to c...</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00055">InterprocessDebugger.cs:55</a></div></div>
<div class="ttc" id="anamespace_c_sharp_editor_html"><div class="ttname"><a href="namespace_c_sharp_editor.html">CSharpEditor</a></div><div class="ttdef"><b>Definition:</b> <a href="_auto_saver_8cs_source.html#l00023">AutoSaver.cs:24</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_a88a3a8f146b6e4e5d1d5b582affb6343"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#a88a3a8f146b6e4e5d1d5b582affb6343">CSharpEditor.Editor.Text</a></div><div class="ttdeci">string Text</div><div class="ttdoc">The source code of the document as a string.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00102">Editor.public.cs:103</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_aa7c7077ceefc90e0cb0936c813aa8a4e"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#aa7c7077ceefc90e0cb0936c813aa8a4e">CSharpEditor.Editor.PreSource</a></div><div class="ttdeci">string PreSource</div><div class="ttdoc">Source code to be prepended to the text of the document when compiling it.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00080">Editor.public.cs:81</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html">CSharpEditor.Editor</a></div><div class="ttdoc">A C# source code editor for Avalonia.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8axaml_8cs_source.html#l00043">Editor.axaml.cs:44</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_ae4025b21e148ce56ad0f67cc05ecd8cd"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#ae4025b21e148ce56ad0f67cc05ecd8cd">CSharpEditor.Editor.Create</a></div><div class="ttdeci">static async Task&lt; Editor &gt; Create(string initialText=&quot;&quot;, string preSource=&quot;&quot;, string postSource=&quot;&quot;, IEnumerable&lt; CachedMetadataReference &gt; references=null, CSharpCompilationOptions compilationOptions=null, string guid=null, Shortcut[] additionalShortcuts=null)</div><div class="ttdoc">Create a new Editor instance.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00328">Editor.public.cs:328</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html">CSharpEditor.InterprocessDebuggerClient</a></div><div class="ttdoc">A control that shows breakpoint information for breakpoints reached on a server process....</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00453">InterprocessDebugger.cs:454</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_interprocess_debugger_client_html_a8f1c07f30f8bf6bcaf95b4be34b1b94e"><div class="ttname"><a href="class_c_sharp_editor_1_1_interprocess_debugger_client.html#a8f1c07f30f8bf6bcaf95b4be34b1b94e">CSharpEditor.InterprocessDebuggerClient.BreakpointResumed</a></div><div class="ttdeci">EventHandler&lt; EventArgs &gt; BreakpointResumed</div><div class="ttdoc">Invoked when the user signals that code execution can resume.</div><div class="ttdef"><b>Definition:</b> <a href="_interprocess_debugger_8cs_source.html#l00476">InterprocessDebugger.cs:476</a></div></div>
<div class="ttc" id="aclass_c_sharp_editor_1_1_editor_html_ad51afe4effabbdc759f5aa3ba33e57c3"><div class="ttname"><a href="class_c_sharp_editor_1_1_editor.html#ad51afe4effabbdc759f5aa3ba33e57c3">CSharpEditor.Editor.PostSource</a></div><div class="ttdeci">string PostSource</div><div class="ttdoc">Source code to be appended after the text of the document when compiling it.</div><div class="ttdef"><b>Definition:</b> <a href="_editor_8public_8cs_source.html#l00097">Editor.public.cs:97</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_893732ece2dfac99897cc4d5917c9672.html">CSharpEditor</a></li><li class="navelem"><b>InterprocessDebugger.cs</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
