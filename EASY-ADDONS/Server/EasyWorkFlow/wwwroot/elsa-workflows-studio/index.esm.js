import{S as s}from"./p-52f280e6.js";export{A as ActivityTraits,O as OrderBy,S as SyntaxNames,W as WorkflowContextFidelity,a as WorkflowPersistenceBehavior,b as WorkflowStatus,g as getVersionOptionsString}from"./p-52f280e6.js";import{E as o,H as i}from"./p-f90ae5bc.js";export{E as EventTypes}from"./p-f90ae5bc.js";export{A as ActivityIconProvider,a as activityIconProvider}from"./p-f6467a51.js";export{C as ConfirmDialogService,c as confirmDialogService}from"./p-df403ef3.js";export{P as PropertyDisplayManager,T as ToastNotificationService,p as propertyDisplayManager,t as toastNotificationService}from"./p-3bf1afb6.js";export{a as createElsaClient,c as createHttpClient}from"./p-d8f8621c.js";import{e as r}from"./p-d17a08e5.js";export{e as eventBus}from"./p-d17a08e5.js";export{P as PluginManager,p as pluginManager}from"./p-9aef4752.js";import"./p-a3b5bd35.js";import{h as n}from"./p-4bdcf3f8.js";import{a as f}from"./p-e47f7c7d.js";import"./p-d44d1ddb.js";import"./p-80de33dc.js";class l{constructor(){r.on(o.ActivityDesignDisplaying,this.onActivityDisplaying),r.on(o.DashboardLoadingMenu,this.onLoadingMenu)}onActivityDisplaying(t){const o=t.activityModel;if(!o.type.endsWith("Webhook"))return;const e=(o.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:s.Literal}},i=n(e.expressions[e.syntax||s.Literal]);t.bodyDisplay=`<p>${i}</p>`}onLoadingMenu(t){t.data={menuItems:[["webhook-definitions","WebhookDefinitions"]],routes:[["webhook-definitions","elsa-studio-webhook-definitions-list",!0],["webhook-definitions/:id","elsa-studio-webhook-definitions-edit",!1]]}}}let d=null,m=null;class w{constructor(t){this.serverUrl=t.serverUrl,r.on(o.WorkflowRegistryLoadingColumns,this.onLoadingColumns),r.on(o.WorkflowRegistryUpdating,this.onUpdating)}onLoadingColumns(t){t.data={headers:[["Enabled"]],hasContextItems:!0}}async onUpdating(t){const e=await async function(t){if(m)return m;const e=await function(t){if(d)return d;const e={baseURL:t};r.emit(o.HttpClientConfigCreated,this,{config:e});const s=f.create(e),a=new i(s);return r.emit(o.HttpClientCreated,this,{service:a,httpClient:s}),d=s}(t);return m={workflowSettingsApi:{list:async()=>(await e.get("v1/workflow-settings")).data,save:async t=>(await e.post("v1/workflow-settings",t)).data,delete:async t=>{await e.delete(`v1/workflow-settings/${t}`)}}},m}(this.serverUrl),s=(await e.workflowSettingsApi.list()).find((o=>o.workflowBlueprintId==t.params[0]&&o.key==t.params[1]));null!=s&&await e.workflowSettingsApi.delete(s.id);const a={workflowBlueprintId:t.params[0],key:t.params[1],value:t.params[2]};await e.workflowSettingsApi.save(a),await r.emit(o.WorkflowRegistryUpdated,this)}}export{l as WebhooksPlugin,w as WorkflowSettingsPlugin};