import{e as t}from"./p-d17a08e5.js";import{S as s}from"./p-52f280e6.js";import{E as e}from"./p-f90ae5bc.js";import"./p-a3b5bd35.js";import{h as n,g as i,s as r,p as o}from"./p-4bdcf3f8.js";import{h as a}from"./p-d44d1ddb.js";import{p as c}from"./p-3bf1afb6.js";import{a as p}from"./p-f6467a51.js";class l{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("If"!==i.type)return;const s=(i.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},e=i.description,o=n(e&&e.length>0?e:s.expressions[s.syntax]||"");t.bodyDisplay=`<p>${o}</p>`}}class y{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const i=t.activityModel;if("HttpEndpoint"!==i.type)return;const e=(i.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:s.Literal}},o=n(e.expressions[e.syntax||s.Literal]);t.bodyDisplay=`<p>${o}</p>`}}class u{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("Timer"!==i.type)return;const s=(i.properties||[]).find((t=>"Timeout"==t.name))||{name:"Timeout",expressions:{Literal:""},syntax:"Literal"},e=n(s.expressions[s.syntax]||"");t.bodyDisplay=`<p>${e}</p>`}}class d{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("WriteLine"!==i.type)return;const e=(i.properties||[]).find((t=>"Text"==t.name))||{name:"Text",expressions:{Literal:""},syntax:s.Literal};t.bodyDisplay=`<p>${n(e.expressions[e.syntax||"Literal"]||"")}</p>`}}class h{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("SendEmail"!==i.type)return;const e=(i.properties||[]).find((t=>"To"==t.name))||{expressions:{Json:""},syntax:s.Json},o=i.description,r=n(o&&o.length>0?o:e.expressions[e.syntax||s.Json]||"");t.bodyDisplay=`<p>To: ${r}</p>`}}class g{display(t,s){const e=i(t,s.name);return a("elsa-check-list-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class D{display(t,s){const e=i(t,s.name);return a("elsa-checkbox-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class m{display(t,s){const e=i(t,s.name),n=s.options||{},o=this.getEditorHeight(n);return a("elsa-script-property",{propertyDescriptor:s,propertyModel:e,"editor-height":o,syntax:n.syntax,context:n.context})}update(t,i,s){const e=s.get(i.name);r(t,i.name,e,"Literal")}getEditorHeight(t){switch(t.editorHeight||"Default"){case"Large":return"20em";case"Default":default:return"8em"}}}class x{display(t,s){const e=i(t,s.name);return a("elsa-dropdown-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class f{display(t,s){const e=i(t,s.name);return a("elsa-json-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class A{display(t,s){const e=i(t,s.name);return a("elsa-multi-text-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class v{display(t,s){const e=i(t,s.name);return a("elsa-multi-line-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class S{display(t,s){const e=i(t,s.name);return a("elsa-radio-list-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class w{display(t,s){const e=i(t,s.name);return a("elsa-single-line-property",{propertyDescriptor:s,propertyModel:e})}}class L{display(t,s){const e=i(t,s.name);return a("elsa-switch-cases-property",{propertyDescriptor:s,propertyModel:e})}update(t,i,s){}}class C{constructor(){this.addDriver("single-line",(()=>new w)),this.addDriver("multi-line",(()=>new v)),this.addDriver("json",(()=>new f)),this.addDriver("check-list",(()=>new g)),this.addDriver("radio-list",(()=>new S)),this.addDriver("checkbox",(()=>new D)),this.addDriver("dropdown",(()=>new x)),this.addDriver("multi-text",(()=>new A)),this.addDriver("code-editor",(()=>new m)),this.addDriver("switch-case-builder",(()=>new L))}addDriver(t,i){c.addDriver(t,i)}}class b{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("Fork"!==i.type)return;const e=s.Json,n=((i.properties||[]).find((t=>"Branches"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||[];t.outcomes=n.$values?n.$values:Array.isArray(n)?n:o(n)||[]}}class R{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("RunJavaScript"!==i.type)return;const e=((i.properties||[]).find((t=>"PossibleOutcomes"==t.name))||{expressions:{Json:""},syntax:s.Json}).expressions[s.Json]||[];t.outcomes=Array.isArray(e)?e:o(e)||["Done"],0==t.outcomes.length&&(t.outcomes=["Done"])}}class T{constructor(){t.on(e.ActivityDescriptorDisplaying,this.onActivityDescriptorDisplaying),t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDescriptorDisplaying(t){const i=p.getIcon(t.activityDescriptor.type);i&&(t.activityIcon=i)}onActivityDesignDisplaying(t){const i=p.getIcon(t.activityModel.type);i&&(t.activityIcon=i)}}class j{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel,s=t.activityDescriptor.inputProperties.filter((t=>"switch-case-builder"==t.uiHint));if(0==s.length)return;let e={};for(const t of s){const s=((i.properties||[]).find((i=>i.name==t.name))||{expressions:{Switch:""},syntax:"Switch"}).expressions.Switch||[],n=s.$values?s.$values:Array.isArray(s)?s:o(s)||[];for(const t of n)e[t.name]=!0}const n=Object.keys(e);t.outcomes=[...n,"Default","Done"]}}class P{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("While"!==i.type)return;const s=(i.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},e=i.description,o=n(e&&e.length>0?e:s.expressions[s.syntax]||"");t.bodyDisplay=`<p>${o}</p>`}}class M{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("StartAt"!==i.type)return;const s=(i.properties||[]).find((t=>"Instant"==t.name))||{name:"Instant",expressions:{Literal:""},syntax:"Literal"},e=n(s.expressions[s.syntax]||"");t.bodyDisplay=`<p>${e}</p>`}}class ${constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("Cron"!==i.type)return;const s=(i.properties||[]).find((t=>"CronExpression"==t.name))||{name:"CronExpression",expressions:{Literal:""},syntax:"Literal"},e=n(s.expressions[s.syntax]||"");t.bodyDisplay=`<p>${e}</p>`}}class J{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const i=t.activityModel;if("SignalReceived"!==i.type)return;const e=(i.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:s.Literal}},o=n(e.expressions[e.syntax||s.Literal]);t.bodyDisplay=`<p>${o}</p>`}}class k{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const i=t.activityModel;if("SendSignal"!==i.type)return;const e=(i.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:s.Literal}},o=n(e.expressions[e.syntax||s.Literal]);t.bodyDisplay=`<p>${o}</p>`}}class E{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("UserTask"!==i.type)return;const e=s.Json,n=((i.properties||[]).find((t=>"Actions"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||"[]";t.outcomes=n.$values?n.$values:Array.isArray(n)?n:o(n)||[]}}class N{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("State"!==i.type)return;const e=i.properties||[],r=e.find((t=>"StateName"==t.name))||{name:"Text",expressions:{Literal:""},syntax:s.Literal};t.displayName=n(r.expressions[r.syntax||"Literal"]||"State");const a=s.Json,p=(e.find((t=>"Transitions"==t.name))||{expressions:{Json:"[]"},syntax:a}).expressions[a]||[];t.outcomes=p.$values?p.$values:Array.isArray(p)?p:o(p)||[]}}class H{constructor(){this.onActivityEditorAppearing=t=>{"SendHttpRequest"==t.activityDescriptor.type&&(document.querySelector("#ReadContent").addEventListener("change",this.updateUI),document.querySelector("#ResponseContentParserName").addEventListener("change",this.updateUI),this.updateUI())},this.onActivityEditorDisappearing=t=>{"SendHttpRequest"==t.activityDescriptor.type&&(document.querySelector("#ReadContent").removeEventListener("change",this.updateUI),document.querySelector("#ResponseContentParserName").removeEventListener("change",this.updateUI))},this.updateUI=()=>{const t=document.querySelector("#ReadContent"),i=document.querySelector("#ResponseContentParserName"),s=document.querySelector("#ResponseContentParserNameControl"),e=document.querySelector("#ResponseContentTargetTypeControl"),n=i.value;s.classList.toggle("hidden",!t.checked),e.classList.toggle("hidden",!t.checked||".NET Type"!=n)},t.on(e.ActivityEditor.Appearing,this.onActivityEditorAppearing),t.on(e.ActivityEditor.Disappearing,this.onActivityEditorDisappearing),t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("SendHttpRequest"!==i.type)return;const e=s.Json,n=((i.properties||[]).find((t=>"SupportedStatusCodes"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||[];let r=n.$values?n.$values:Array.isArray(n)?n:o(n)||[];t.outcomes=[...r,"Done","Unsupported Status Code"]}}class q{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const i=t.activityModel;if("RunWorkflow"!==i.type)return;const e=s.Json,n=((i.properties||[]).find((t=>"PossibleOutcomes"==t.name))||{expressions:{Json:"[]"},syntax:e}).expressions[e]||[];let r=n.$values?n.$values:Array.isArray(n)?n:o(n)||[];r=["Done",...r,"Not Found"],t.outcomes=r}}class I{constructor(){this.plugins=[],this.pluginTypes=[],this.createPlugin=t=>new t(this.elsaStudio),this.pluginTypes=[C,T,l,P,b,j,y,H,u,M,$,J,k,d,q,N,R,E,h]}initialize(t){if(!this.initialized){this.elsaStudio=t;for(const t of this.pluginTypes)this.createPlugin(t);this.initialized=!0}}registerPlugins(t){for(const i of t)this.registerPlugin(i)}registerPlugin(t){this.pluginTypes.push(t),this.initialized&&this.createPlugin(t)}}const O=new I;export{I as P,O as p};